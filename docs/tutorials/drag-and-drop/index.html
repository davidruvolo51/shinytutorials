<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/shinytutorials/styles.71eb8c58f73ec608561e.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2b2b2b}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#d4d0ab}.token.punctuation{color:#fefefe}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#abe338}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.important,.token.regex{color:gold}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:700}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:400}}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:url(/shinytutorials/static/open-sans-v17-latin-regular-5f4d4bc11d64b6cb605b7030c1997270.eot);src:local("Open Sans Regular"),local("OpenSans-Regular"),url(/shinytutorials/static/open-sans-v17-latin-regular-5f4d4bc11d64b6cb605b7030c1997270.eot?#iefix) format("embedded-opentype"),url(/shinytutorials/static/open-sans-v17-latin-regular-33543c5cc5d88f5695dd08c87d280dfd.woff2) format("woff2"),url(/shinytutorials/static/open-sans-v17-latin-regular-de0869e324680c99efa1250515b4b41c.woff) format("woff"),url(/shinytutorials/static/open-sans-v17-latin-regular-049a929c5d81988b3ae6d2f985ca7aa5.ttf) format("truetype"),url(/shinytutorials/static/open-sans-v17-latin-regular-7aab4c13671282c90669eb6a10357e41.svg#OpenSans) format("svg")}@font-face{font-family:Open Sans;font-style:normal;font-weight:600;src:url(/shinytutorials/static/open-sans-v17-latin-600-ddacaf4a9db58cda27c76ce88c408546.eot);src:local("Open Sans SemiBold"),local("OpenSans-SemiBold"),url(/shinytutorials/static/open-sans-v17-latin-600-ddacaf4a9db58cda27c76ce88c408546.eot?#iefix) format("embedded-opentype"),url(/shinytutorials/static/open-sans-v17-latin-600-819af3d3abdc9f135d49b80a91e2ff4c.woff2) format("woff2"),url(/shinytutorials/static/open-sans-v17-latin-600-449d681cd6006390e1bee3c3a660430b.woff) format("woff"),url(/shinytutorials/static/open-sans-v17-latin-600-8f7128145a3c2b83923552a328df7cdc.ttf) format("truetype"),url(/shinytutorials/static/open-sans-v17-latin-600-e16f375be3c2a73b58255a02f6d3a9ce.svg#OpenSans) format("svg")}body,html{padding:0;margin:0;font-family:Open Sans,Helvetica,sans-serif;cursor:default;font-size:15pt}article,aside,footer,header,main,nav{padding:0;margin:0;display:block}h1,h2,h3,h4,h5,h6{display:block;color:#2a2c32;line-height:1.3;padding:0;margin:0 0 6px}p{color:#3f454b;line-height:1.6;padding:0;margin:0 0 12px}ol li,ul li{margin:0;padding:0;line-height:1.7}ol li p,ul li p{padding:0;margin:0;line-height:1}ol li a,ul li a{padding:0;margin:0;line-height:1.5}li{color:#3f454b;line-height:1.3}a{color:#5177b8;text-decoration:none;box-shadow:0 2px 0 #5177b8}blockquote{line-height:1.3}input{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:90%;font-size:12pt;padding:8px 8px 8px 12px;border-radius:0;border:none;background-color:#f6f6f6;box-shadow:inset 0 2px 2px #d8d8d8}img,input{display:block}img{width:100%}:not(pre)>code{font-size:14pt}.icon{display:inline-block;width:20px;height:20px}.gatsby-highlight{margin:24px 0;font-size:12pt;overflow:auto}.gatsby-highlight pre{border-radius:6px}.gatsby-resp-image-link{box-shadow:none}button{display:block;border:none;background:none;cursor:pointer}.btn,.btn-link{display:block;padding:4px;margin:8px 0;font-size:14px;background-color:transparent;border-left:3px solid transparent;text-align:center}.btn-primary,.btn-secondary{text-transform:uppercase;letter-spacing:2px;font-weight:600;border-radius:3px;padding:6px 12px}.btn-primary{background-color:#5177b8;border:2px solid #5177b8;color:#fff;padding:8px 12px}.btn-primary:focus,.btn-primary:hover{background-color:transparent;border-color:#5177b8;color:#5177b8}.btn-secondary{background-color:transparent;border:2px solid #5177b8;color:#5177b8}.btn-secondary:focus,.btn-secondary:hover{background-color:#5177b8;color:#f6f6f6;border-color:#5177b8}.btn-keyword{font-size:12pt}.btn-keyword.selected,.btn-keyword:focus,.btn-keyword:hover{color:#5177b8;font-weight:600;border-left-color:#5177b8}.btn-centered{width:100px;margin:24px auto 0}.nav{position:fixed;top:0;left:0;width:100%;padding:6px 0;display:-ms-grid;display:grid;grid-template-columns:65% 35%;grid-template-areas:"brandLink menuBtn";column-gap:0;row-gap:0;background-color:#fff;box-shadow:0 2px 6px rgba(0,0,0,.18);z-index:15}.nav .nav-item{display:flex;align-items:center}.nav .brand-link{grid-area:brandLink;color:#5177b8;font-weight:600;font-size:14pt;letter-spacing:2px;padding:0 0 0 16px;box-shadow:none}.nav .brand-link .brand-link-icon path{fill:#5177b8}.nav .navigation{display:block;position:absolute;top:48px;width:1px;height:1px;clip:rect(0 0 0 0);clip:rect(0,0,0,0);padding:32px 0;background-color:#fff;z-index:14}.nav .navigation .menu-item{display:block;text-align:center}.nav .navigation .menu-item .menu-link{font-size:16pt;box-shadow:none}.nav .navigation.expanded{width:100%;height:auto;clip:auto;box-shadow:0 6px 6px rgba(0,0,0,.18)}.nav .menu-btns{justify-content:flex-end;grid-area:menuBtn}.nav .menu-btns .menu-button{margin:0}.nav .menu-btns .menu-button #menuBtn{margin-right:16px}@media(min-width:742px){.nav{grid-template-areas:"brandLink navLinks menuBtns";grid-template-columns:.75fr 3fr 1fr}.nav .brand-link{padding-bottom:0;grid-area:brandLink}.nav .navigation{position:static;display:flex;width:100%;grid-area:navLinks;box-shadow:none;margin-left:12px}.nav .navigation .menu-item{display:inline-block;width:auto;margin:0 24px 0 0}.nav .navigation .menu-item .menu-link{font-size:11pt}.nav .navigation .menu-item:last-child{margin-right:0}.nav .menu-btns{justify-content:flex-end;grid-area:menuBtns}.nav .menu-btns .menu-button{margin:0}.nav .menu-btns .menu-button#themeToggle{margin-right:24px}.nav .menu-btns .menu-item:not(.visible){display:none}}.menu{width:100%;margin:0 auto;list-style:none;padding:6px 0}.menu .menu-item{display:block;padding:0;margin:0 0 12px}.menu .menu-item .menu-link{position:relative;text-transform:uppercase;font-size:11pt;letter-spacing:2px;font-weight:600;color:#5177b8;padding-bottom:4px;border-bottom:2px solid transparent}.menu .menu-item .menu-link .menu-link-icon{position:relative;padding-right:6px;top:4px}.menu .menu-item .menu-link .menu-link-icon path{fill:#5177b8}.menu .menu-item .menu-link:hover{border-bottom-color:#5177b8}@media screen and (min-width:972px){.menu .menu-item{display:inline-block;margin:0 18px 0 0}}.footer{margin:0;padding:62px 0;background-color:#2a2c32}.footer h2{display:block;width:85%;margin:0 auto;padding-top:12px;color:#d8d8d8;letter-spacing:2.5px}.footer .menu{list-style:none;width:85%;margin:12px auto;padding:0}.footer .menu .menu-item{margin-right:24px}.footer .menu .menu-item .menu-link{color:#d8d8d8;box-shadow:none}.footer .menu .menu-item .menu-link .menu-link-icon path{fill:#d8d8d8}.footer .menu .menu-item .menu-link:hover{border-bottom-color:#d8d8d8}.post{padding:32px;border-radius:6px}.post .post-image{background-position:50%;background-size:cover;margin-bottom:12px}.post .post-title,.post .post-title-link{position:relative}.post .post-title{margin:0;padding:0}.post .post-title-link a{color:#2a2c32;box-shadow:0 1px 0 #3f454b}.post .post-status{position:relative;left:24px;top:-2px;font-size:11pt;text-transform:uppercase;font-weight:600;letter-spacing:2px;padding:3px 6px;border-radius:6px;background-color:#f6f6f6}.post .post-status[data-value=New]{background-color:rgba(81,119,184,.1);color:#5177b8}.post .post-status[data-value=Popular]{background-color:rgba(34,135,116,.1);color:#218573}.post .post-status[data-value=Favorite]{background-color:#a61c3c;color:#d8d8d8}.post .post-desc{padding:0;margin:0 0 6px;width:100%}.post .post-date{display:inline-block;color:#3f454b;font-size:11pt;font-family:consolas,courier,sans-serif;margin-right:12px}.post .post-tags{display:block;padding:0;margin:0 0 16px;list-style:none;color:#3f454b}.post .post-tags li{display:inline-block;margin-right:12px}.post .post-tags li .tag{border-radius:6px;font-size:11pt;padding:5px 10px;background-color:#f6f6f6;font-family:consolas,courier,sans-serif}.post .post-tags li .tag:before{content:"#"}.post .post-tags li:first-child{margin-left:0}.post .post-link{display:block;text-align:center;text-transform:uppercase;font-size:12pt;letter-spacing:2px;text-decoration:none;border-radius:4px;padding:6px 0;font-weight:600;box-shadow:none}.post .post-link:hover{text-decoration:underline}.post.post-feature{margin:16px auto;background-color:#fff}.post.post-feature .post-link{margin:0 auto;border:1px solid #5177b8;background-color:#5177b8;color:#fff}.post.post-plain{background-color:#fff;margin-bottom:16px}.post.post-plain .post-link{border:1px solid #5177b8}.post.post-plain .post-link:hover{background-color:#5177b8;color:#fff}.post.no-results-post{text-align:center}.post-form{padding:32px;border-radius:0 0 6px 6px;background-color:#fff;border-top:4px solid #5177b8;margin-bottom:16px}.post-form .input-label{display:block;padding:0;margin:0;font-size:18pt;color:#3f454b;font-weight:600}.post-form .input-example{line-height:1.5;padding:0;font-size:12pt;color:#3f454b;margin:0 0 12px}@media screen and (min-width:972px){.post{max-width:872px}.post.post-plain .post-link,.post.post-plain .post-tags{display:inline-flex;justify-content:center;align-items:center}.post.post-plain .post-link{width:125px;float:right}.post-form{max-width:872px}}.hero{width:100%;padding:44px 0;display:flex;position:relative;justify-content:center;align-items:center;background-color:#fff;overflow:hidden}.hero.hero-index .hero-content{width:90%;margin:0 auto;padding:72px 0;z-index:2}.hero.hero-index .hero-content .hero-title{font-size:21pt;letter-spacing:2.5px}.hero.hero-index .hero-content .hero-subtitle{font-weight:600;font-size:32pt;letter-spacing:2px;line-height:1.2}.hero.hero-index .hero-content .hero-image{display:block;width:300px;margin:44px auto;box-shadow:0 12px 3px -6px rgba(0,0,0,.18)}.hero.hero-text .hero-content{width:90%;margin:0 auto;padding:82px 0 0}.hero.hero-text .hero-content p{margin:0}.hero.hero-style-1{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNDQwcHgiIGhlaWdodD0iNjcxcHgiIHZpZXdCb3g9IjAgMCAxNDQwIDY3MSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTkuMSAoODYxNDQpIC0gaHR0cHM6Ly9za2V0Y2guY29tLS0+PHRpdGxlPmhlcm8tYmstZ3JheTwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9IkJhY2tncm91bmRzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBpZD0iaGVyby1iay1ncmF5LWNvcHkiIGZpbGw9IiM1MTc3YjgiIGZpbGwtb3BhY2l0eT0iMC4zIj48cGF0aCBkPSJNLTEuMjk5NjU0ODNlLTE0LDAgTDE0NDAsMCBDMTQ0MCw5NS45MTQ2OTE5IDE0NDAsMTg1Ljk3MzIwOCAxNDQwLDI3MC4xNzU1NDcgQzE0NDAsMzU0LjM3Nzg4NyAxNDQwLDQ3OS4zMTkzNzEgMTQ0MCw2NDUgQzEyODYuMzEwNjIsNTg3Ljc4MzUyNiAxMTI0LjkxNjc3LDU1MS45MDgyNTQgOTU1LjgxODQ0NSw1MzcuMzc0MTgzIEM3MDIuMTcwOTU5LDUxNS41NzMwNzYgNDU2Ljc1MDAwNiw3NDYuNzg4NDcxIDIxNi4yNzE0MTEsNjQ1IEM3MS41NDI5NDAxLDU4My43NDAxMjEgMC45MjI0ODU1MDIsNTA2LjI2ODcxIDEuMDM5NTg1MDhlLTEzLDQxMS42MzcxNzIgQy0wLjA2NjI0ODYzNzQsNDA0Ljg0MTE3MyAtMC4wNjYyNDg2Mzc0LDM5NC4yOTU0NDkgLTEuNTgxMzczOTJlLTE0LDM4MCBMLTEuMjk5NjU0ODNlLTE0LDAgWiIgaWQ9Imhlcm8tYmstZ3JheSIvPjwvZz48L2c+PC9zdmc+);background-size:cover;background-position:50% 100%;background-repeat:no-repeat}@media(min-width:972px){.hero.hero-index .hero-content,.hero.hero-text .hero-content{width:100%;max-width:972px}.hero.hero-index .hero-content .hero-image,.hero.hero-text .hero-content .hero-image{transform:scale(1.25)}}.flex{display:flex}.flex .flex-child{display:block;width:100%;height:auto}.flex.flex-30x70-layout,.flex.flex-33x3-layout,.flex.flex-50x2-layout{width:100%;flex-wrap:wrap}@media(min-width:812px){.flex.flex-30x70-layout .flex-child{display:inline-block}.flex.flex-30x70-layout .flex-child:nth-child(odd){width:30%}.flex.flex-30x70-layout .flex-child:nth-child(2n){width:70%}.flex.flex-33x3-layout .flex-child{display:inline-block;width:33%}.flex.flex-50x2-layout .flex-child{display:inline-block}.flex.flex-50x2-layout .flex-child:nth-child(2n),.flex.flex-50x2-layout .flex-child:nth-child(odd){width:50%}}.article-profile{display:inline-flex;justify-content:center;align-items:center;margin-top:12px}.article-profile .profile-img{width:40px;border-radius:50%}.article-profile .profile-name{font-size:12pt;margin-left:6px;color:#3f454b}.article-hero{padding-bottom:0}.article-hero h1{font-size:13pt;text-transform:uppercase;letter-spacing:2px}.article-hero h2{font-size:28pt}.article-hero .article-dates,.article-hero .article-readtime{margin:0;line-height:1.5;font-size:11pt;text-transform:uppercase;letter-spacing:2px;padding:0}.article-hero .article-dates time,.article-hero .article-readtime time{font-weight:400}.article-hero .article-readtime{color:#5177b8}.article{width:100%;padding:32px 0;border-radius:6px;background-color:#fff}.article .article-abstract,.article .article-body,.article .article-footer,.article .article-title{display:block;width:90%;margin:0 auto}.article .article-title{text-align:center}.article .article-abstract{color:#3f454b;line-height:1.6}.article .article-abstract :not(h2){color:#3f454b}.article .article-body h2{padding:0;margin:24px 0 0}.article .article-body a{color:#5177b8}.article .article-body blockquote{background-color:#f6f6f6;padding:12px;margin:44px 0;border-left:10px solid #5177b8}.article .article-body blockquote p{margin:0}.article .article-body table{margin:16px 0}.article .article-footer{border-top:1px solid #a3a6a8;margin-top:12px;padding-top:12px}.article .article-footer .article-tags{display:inline-block;padding:0;margin:0;list-style:none;color:#3f454b}.article .article-footer .article-tags li{display:inline-block;margin-right:12px}.article .article-footer .article-tags li .tag{border-radius:6px;font-size:11pt;padding:5px 10px;background-color:#f6f6f6;font-family:consolas,courier,sans-serif}.article .article-footer .article-tags li .tag:before{content:"#"}.article .article-footer .article-tags li:first-child{margin-left:0}.article-toc h2{font-size:21pt}.article-toc ol{font-size:13pt}.article-toc ol li{margin-bottom:12px}.article-toc ol li ol{margin-top:12px;list-style:upper-alpha}.article-toc ol li ol li{margin-bottom:6px}.article-toc ol li ol li ol{list-style:lower-roman}.article-toc ol li:last-child,.article-toc ol li ol li:last-child{margin-bottom:0}.article-toc ol a{box-shadow:none}.article-toc ol a :focus,.article-toc ol a:hover{box-shadow:0 2px 0 0 #5177b8}@media(min-width:972px){.article{max-width:812px}}.main{padding:0;min-height:60vh}.main .full-section{width:100%}.main .full-section .full-section-content,.main .main-section{width:90%;margin:0 auto}.main .main-section{padding:24px 0}.main .filled-section{padding:44px 0}.main .filled-section:not(.welcome-section){background-color:#f6f6f6}.main .filled-section:not(.welcome-section) p:not(.post-desc){text-align:center}.main .filled-section h2{text-align:center;text-transform:uppercase;letter-spacing:2px;padding:0;margin:0}.main .filled-section:last-child{margin-bottom:0}.main .filled-section.welcome-section p{max-width:812px;margin:0 auto}@media(min-width:972px){.main .full-section .full-section-content,.main .main-section{max-width:972px}}.sidebar-layout{display:flex;width:100%;flex-wrap:wrap}.sidebar-layout .sidebar-panel{position:static;padding-top:50px}.sidebar-layout .sidebar-panel .sidebar-content{background-color:#fff;margin:0 auto;padding:32px;border-radius:6px}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title{display:block;width:100%}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle{position:relative;margin:0;padding:0;font-size:18pt}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon{position:absolute;top:4px;margin-left:12px;transform:rotate(-45deg);transform-origin:center center;transition:all .3s ease-in-out}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon circle{fill:#f6f6f6}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon line{stroke:#5177b8}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon.rotated{transform:rotate(0)}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-caption{margin:0 0 12px;line-height:1.3;font-size:14pt}.sidebar-layout .sidebar-panel .sidebar-content .taglist{list-style:none;padding:0;margin:0 0 16px -6px}.sidebar-layout .sidebar-panel .sidebar-content .taglist .taglist-item{width:200px;padding:0 24px 0 0;margin-bottom:12px;cursor:pointer}.sidebar-layout .sidebar-panel .sidebar-content.expanded{position:absolute;width:1px;height:1px;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);overflow:hidden}.sidebar-layout .main-panel{padding-top:50px}.sidebar-layout .main-panel,.sidebar-layout .sidebar-panel{width:90%;margin:0 auto}@media(min-width:972px){.sidebar-layout .sidebar-panel{width:30%;max-width:500px;margin:0 auto;position:-webkit-sticky;position:sticky;top:62px;height:100%}.sidebar-layout .sidebar-panel .sidebar-content{width:70%;max-height:565px;overflow-y:auto}.sidebar-layout .main-panel{width:70%}}#menuBtn{display:flex;justify-content:center;align-items:center;background-color:transparent}#menuBtn .menu-icon{display:block;margin:0 auto;position:relative}#menuBtn .menu-icon .menu-bar{display:block;height:3px;width:30px;border-radius:6px;margin-bottom:6px;background-color:#5177b8;transition:all .2s ease-in-out}#menuBtn .menu-icon .menu-bar:first-child{margin-top:2px}#menuBtn.open .menu-bar:first-child{opacity:0}#menuBtn.open .menu-bar:nth-child(2){transform:rotate(-45deg);transform-origin:center .5px;background-color:#5177b8}#menuBtn.open .menu-bar:nth-child(3){transform:rotate(45deg);transform-origin:24.85px -2.5px;background-color:#5177b8}#menuBtn.open .menu-label{color:#5177b8}.article table,.datatable{width:100%;margin:12px auto;font-weight:400;border-spacing:0;text-align:left;font-size:13pt}.article table caption,.datatable caption{text-align:left;font-size:16pt;margin:12px 0;color:#2a2c32;font-weight:600}.article table thead tr th,.datatable thead tr th{font-weight:600;text-transform:uppercase;letter-spacing:2px;font-size:11pt;padding:4px 12px;border-bottom:2px solid #2a2c32;color:#2a2c32}.article table tbody tr td,.datatable tbody tr td{padding:8px 12px}.article table tbody tr td .hidden-colname,.datatable tbody tr td .hidden-colname{display:none}.article table tbody tr:nth-child(2n),.datatable tbody tr:nth-child(2n){background-color:#f6f6f6}@media(max-width:892px){.datatable thead{display:none}.datatable tbody tr{display:block;margin-bottom:16px;counter-increment:rowCounter}.datatable tbody tr:nth-child(2n){background-color:transparent}.datatable tbody tr td{display:block;padding:6px 0 6px 6px;color:#3f454b}.datatable tbody tr td:first-child{font-size:16pt;color:#2a2c32}.datatable tbody tr td:first-child:before{content:counter(rowCounter) ".";display:inline-block;margin-right:4px;font-size:15pt}.datatable tbody tr td:not(:first-child){border-bottom:1px solid #f6f6f6}.datatable tbody tr td .hidden-colname{display:inline-block;width:150px}.datatable tbody tr td .hidden-colname:after{content:":"}.datatable-container{display:block;width:100%;overflow-x:scroll}}.visually-hidden{position:absolute;width:1px;height:1px;clip:rect(0 0 0 0);clip:rect(0,0,0,0);overflow:hidden}#theme-toggle-icon path{fill:#5177b8}.tutorial-index{padding:0 0 66px;background-color:#f6f6f6}.tutorial-index .tutorial-index-posts{padding:32px 0}.tutorial-index .tutorial-index-posts h2{padding-left:32px;margin-bottom:32px}.tutorial{padding:0 0 50px}.about-page,.tutorial{background-color:#f6f6f6}.about-page #repos .column-4,.about-page #repos .column-5,.about-page #repos .column-6,.about-page #repos thead th:nth-child(n+4){text-align:left}.privacy-page{background-color:#f6f6f6}@media(min-width:972px){.related-projects .post.post-feature,.tutorial-latest .post.post-feature{max-width:40%}.related-projects .post.post-feature:nth-child(odd),.tutorial-latest .post.post-feature:nth-child(odd){margin-right:32px}.tutorial-index .tutorial-index-posts{padding-top:82px}.about-page #repos .column-4,.about-page #repos .column-5,.about-page #repos .column-6,.about-page #repos thead th:nth-child(n+4){text-align:right}.gallery-page .post .post-link{width:250px}}body[data-theme=dark],body[data-theme=dark] h1,body[data-theme=dark] h2,body[data-theme=dark] h3,body[data-theme=dark] h4{color:#f6f6f6}body[data-theme=dark] p{color:#d8d8d8}body[data-theme=dark] a{color:#d8d8d8;text-decoration:none;box-shadow:0 2px 0 #f6f6f6}body[data-theme=dark] a.btn{box-shadow:none}body[data-theme=dark] ol li,body[data-theme=dark] ul li{color:#d8d8d8}body[data-theme=dark] :not(pre)>code[class*=language-],body[data-theme=dark] pre[class*=language-]{background:#13141b}body[data-theme=dark] .hero-image #dashboard rect#background{fill:#3f454b}body[data-theme=dark] .menu .menu-item .menu-link:hover{border-bottom-color:#f6f6f6}body[data-theme=dark] .nav{background-color:#2a2c32}body[data-theme=dark] .nav .nav-item{background-color:#2a2c32;color:#f6f6f6}body[data-theme=dark] .nav .navigation .menu-item .menu-link{color:#f6f6f6}body[data-theme=dark] .nav .menu-btns #themeToggle path,body[data-theme=dark] .nav .navigation .menu-item .menu-link .menu-link-icon path{fill:#f6f6f6}body[data-theme=dark] .nav .menu-btns #menuBtn .menu-icon .menu-bar{background-color:#f6f6f6}body[data-theme=dark] .hero{background-color:#2a2c32}body[data-theme=dark] .hero.article-hero,body[data-theme=dark] .hero.hero-text{position:relative;background-color:#2a2c32;overflow:hidden}body[data-theme=dark] .hero.article-hero:before,body[data-theme=dark] .hero.hero-text:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(81,119,184,.1);z-index:1}body[data-theme=dark] .hero.article-hero .hero-content .article-readtime,body[data-theme=dark] .hero.article-hero .hero-content .profile-name,body[data-theme=dark] .hero.hero-text .hero-content .article-readtime,body[data-theme=dark] .hero.hero-text .hero-content .profile-name{color:#d8d8d8}body[data-theme=dark] .main,body[data-theme=dark] .main .filled-section,body[data-theme=dark] .main .full-section,body[data-theme=dark] .main .main-section{background-color:#2a2c32}body[data-theme=dark] .post{background-color:#3f454b}body[data-theme=dark] .post h3 a{color:#d8d8d8}body[data-theme=dark] .post .post-date{color:#f6f6f6}body[data-theme=dark] .post .post-tags .tag{color:#2a2c32;background-color:#d8d8d8}body[data-theme=dark] .post .post-status[data-value=New]{background-color:#2a2c32;color:#d8d8d8}body[data-theme=dark] .post .post-status[data-value=Popular]{background-color:#218573;color:#f6f6f6}body[data-theme=dark] .tutorial-index{background-color:#2a2c32}body[data-theme=dark] .tutorial-index #reset,body[data-theme=dark] .tutorial-index .post.post-plain .post-link{background-color:#5177b8;color:#f6f6f6}body[data-theme=dark] .sidebar-layout{background-color:#2a2c32}body[data-theme=dark] .form,body[data-theme=dark] .sidebar-layout .sidebar-panel .sidebar-content{background-color:#3f454b}body[data-theme=dark] .form label,body[data-theme=dark] .form p{color:#d8d8d8}body[data-theme=dark] #search{background-color:#d8d8d8}body[data-theme=dark] .btn-keyword{color:#f6f6f6}body[data-theme=dark] .btn-keyword.selected,body[data-theme=dark] .btn-keyword:hover{border-left-color:#f6f6f6}body[data-theme=dark] .tutorial .sidebar-layout .sidebar-panel .sidebar-content{background-color:rgba(81,119,184,.1)}body[data-theme=dark] .tutorial .sidebar-layout .sidebar-panel .sidebar-content a{box-shadow:none}body[data-theme=dark] .tutorial .sidebar-layout .sidebar-panel .sidebar-content a:hover{box-shadow:0 2px 0 #d8d8d8}body[data-theme=dark] .tutorial .article{background-color:#2a2c32}body[data-theme=dark] .tutorial .article .article-abstract p,body[data-theme=dark] .tutorial .article a{color:#d8d8d8}body[data-theme=dark] .tutorial .article blockquote{background-color:#3f454b}body[data-theme=dark] .tutorial .article blockquote p{color:#f6f6f6}body[data-theme=dark] .tutorial .article .article-tags li code{background-color:#3f454b}body[data-theme=dark] .tutorial .article table{background-color:rgba(81,119,184,.1);padding:6px}body[data-theme=dark] .tutorial .article table thead tr th{color:#f6f6f6;border-bottom-color:#f6f6f6}body[data-theme=dark] .tutorial .article table tbody tr{background-color:transparent}body[data-theme=dark] .tutorial .article table tbody tr td{border-bottom:1px solid #a3a6a8}body[data-theme=dark] .tutorial .article table tbody tr:nth-child(2n){background-color:transparent}body[data-theme=dark] .tutorial .article table tbody tr:last-child td{border-bottom:none}body[data-theme=dark] .datatable{background-color:rgba(81,119,184,.1);padding:6px}body[data-theme=dark] .datatable thead tr th{color:#f6f6f6;border-bottom-color:#f6f6f6}body[data-theme=dark] .datatable tbody tr{background-color:transparent}body[data-theme=dark] .datatable tbody tr td{border-bottom:1px solid #a3a6a8;color:#f6f6f6}body[data-theme=dark] .datatable tbody tr td:last-child{border-bottom:none}body[data-theme=dark] .datatable tbody tr:nth-child(2n){background-color:transparent}@media(min-width:972px){body[data-theme=dark] .datatable tbody tr td:last-child{border-bottom:1px solid #a3a6a8}body[data-theme=dark] .datatable tbody tr:last-child td{border-bottom:none}}</style><meta name="generator" content="Gatsby 2.30.2"/><link rel="icon" href="/shinytutorials/favicon-32x32.png?v=a47592f83f89521a651df94e324b1d95" type="image/png"/><link rel="manifest" href="/shinytutorials/manifest.webmanifest" crossorigin="use-credentials"/><link rel="apple-touch-icon" sizes="48x48" href="/shinytutorials/icons/icon-48x48.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="72x72" href="/shinytutorials/icons/icon-72x72.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="96x96" href="/shinytutorials/icons/icon-96x96.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="144x144" href="/shinytutorials/icons/icon-144x144.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="192x192" href="/shinytutorials/icons/icon-192x192.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="256x256" href="/shinytutorials/icons/icon-256x256.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="384x384" href="/shinytutorials/icons/icon-384x384.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="512x512" href="/shinytutorials/icons/icon-512x512.png?v=a47592f83f89521a651df94e324b1d95"/><title data-react-helmet="true">shinyTutorials | Drag and Drop Example</title><meta data-react-helmet="true" name="description" content="Drag and Drop Example Learn how to create movable elements in shiny apps."/><meta data-react-helmet="true" property="og:title" content="Drag and Drop Example"/><meta data-react-helmet="true" property="og:description" content="Drag and Drop Example Learn how to create movable elements in shiny apps."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="dcruvolo"/><meta data-react-helmet="true" name="twitter:title" content="Drag and Drop Example"/><meta data-react-helmet="true" name="twitter:description" content="Drag and Drop Example Learn how to create movable elements in shiny apps."/><meta data-react-helmet="true" name="keywords" content="interactivity, javascript"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="shinytutorials latest posts" href="/shinytutorials/rss.xml"/><link as="script" rel="preload" href="/shinytutorials/webpack-runtime-6cf865dbb83a04b17843.js"/><link as="script" rel="preload" href="/shinytutorials/framework-cd3e1e804d552fa282ef.js"/><link as="script" rel="preload" href="/shinytutorials/app-166b32bd8a410c2f241a.js"/><link as="script" rel="preload" href="/shinytutorials/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/shinytutorials/commons-032b27bcdead6ca1973e.js"/><link as="script" rel="preload" href="/shinytutorials/ec800322c0f71b5715d75b0073f476a066af1f45-77d55e0998aa0b15bf92.js"/><link as="script" rel="preload" href="/shinytutorials/component---src-components-tutorials-js-90853c9ee1cccce03af6.js"/><link as="fetch" rel="preload" href="/shinytutorials/page-data/tutorials/drag-and-drop/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/shinytutorials/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/shinytutorials/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="nav" role="navigation"><a class="nav-item brand-link" href="/shinytutorials/">shinyTutorials</a><ul class="menu nav-item navigation "></ul><ul class="nav-item menu menu-btns"><li class="menu-item menu-button visible"><button id="themeToggle" class="menu-button"><span class="visually-hidden">toggle theme</span><svg id="theme-toggle-icon" class="icon theme-icon" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>toggle theme</title><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="light-bulb" fill="#000000"><path d="M11,11.8999819 C13.2822403,11.4367116 15,9.41895791 15,7 C15,4.23857625 12.7614237,2 10,2 C7.23857625,2 5,4.23857625 5,7 C5,9.41895791 6.71775968,11.4367116 9,11.8999819 L9,14 L11,14 L11,11.8999819 Z M13,13.3263688 C15.3649473,12.2029049 17,9.79239596 17,7 C17,3.13400675 13.8659932,0 10,0 C6.13400675,0 3,3.13400675 3,7 C3,9.79239596 4.63505267,12.2029049 7,13.3263688 L7,16 L13,16 L13,13.3263688 Z M7,17 L13,17 L13,18.5 C13,19.3284271 12.3349702,20 11.501424,20 L8.49857602,20 C7.67093534,20 7,19.3342028 7,18.5 L7,17 Z" id="Combined-Shape"></path></g></g></svg></button></li><li class="menu-item menu-button"><button id="menuBtn" class="" aria-expanded="false"><span class="visually-hidden">open or close menu</span><span class="menu-icon" aria-hidden="true"><span class="menu-bar"></span><span class="menu-bar"></span><span class="menu-bar"></span></span></button></li></ul></nav><header class="hero hero-index article-hero"><div class="hero-content"><h1 class="hero-title"></h1><h2 class="hero-subtitle"></h2><h1>Drag and Drop Example</h1><h2>Learn how to create movable elements in shiny apps.</h2><p class="article-dates">Published: <time>2020-05-12</time></p><p class="article-readtime"><time>15</time> minute read</p><div class="article-profile"><img class="profile-img" src="/shinytutorials/static/dcruvolo-16a2e1e5e48ba95aed1c754fd7fd0d57.jpeg" alt="@dcruvolo"/><span class="profile-name">@dcruvolo</span></div></div></header><main id="main" class="main tutorial" aria-label="main content"><div class="sidebar-layout"><aside class="sidebar-panel article-toc"><section class="sidebar-content"><div><h2>Contents</h2>
<ol>
<li><a href="#about">Why would I need this?</a></li>
<li>
<p><a href="#work">How does this app work?</a></p>
<ol>
<li><a href="#work-component">Creating a draggable functional component</a></li>
<li><a href="#work-ui">Developing the UI and integrating the draggable component</a></li>
<li><a href="#work-CSS">Defining styles for drag events</a></li>
<li>
<p><a href="#work-events">Writing the drag and drop events</a></p>
<ol>
<li><a href="#work-events-vars">Defining variables and a helper function</a></li>
<li><a href="#work-events-dragstart">Event for dragstart</a></li>
<li><a href="#work-events-dragend">Event for dragend</a></li>
<li><a href="#work-events-dragover">Event for dragover</a></li>
<li><a href="#work-events-dragenter">Event for dragenter</a></li>
<li><a href="#work-events-dragleave">Event for dragleave</a></li>
<li><a href="#work-events-drop">Event for drop</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#know">What do I need to know before I integrate this into my app?</a></li>
<li><a href="#run">How do I run the demo?</a></li>
</ol>
</div></section></aside><div class="main-panel tutorial-body"><article class="article"><section class="article-abstract"><h2>Overview</h2><p>Drag and drop elements may be useful for advanced user interactivity. You can use draggable elements in many situations, such as allowing users to personalize the UI. In this tutorial, learn how to create a draggable element and the required javscript events.</p></section><section class="article-body">
<span id="about" />
<h2>Why would I need this?</h2>
<p>I am currently working on a shiny app that is an interactive to-do list. In the app, want to reorder items by dragging and dropping them. There are many packages (e.g., <a href="https://github.com/ayayron/shinydnd">shinyDND</a>, RStudio's <a href="https://github.com/rstudio/sortable">sortable</a>) and JavaScript libraries available, however I wanted to learn how to build my own. Since there is a browser ready <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API">drag and drop API</a>, it is fairly straightforward to create your own events. </p>
<p>In this tutorial, I will cover the basic elements for creating draggable elements in shiny. I will focus on creating a draggable element and the corresponding JavaScript events, as well as the CSS classes that are added when an element is dragged. I will try to keep the concepts simple and provide links for further reading where applicable. If you have any questions or if something is not clear, feel free to open a new issue.</p>
<p>For more information, please see the <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API">drag and drop API</a> documentation, as well as the section <a href="#know">What do I need to know before I integrate this into my app?</a> for implementation notes.</p>
<span id="work" />
<h2>How does this app work?</h2>
<p>We will build an app that allows users to reorder a series cards in any order.</p>
<p><img src="/shinytutorials/d579913c414afe30f76791d998b65bf0/drag_and_drop_demo.gif" alt="drag and drop demonstration"></p>
<p>In the GIF, users can reorder a series of cards. Each card a group assignment (i.e., letters A through E) and a random value (i.e., 1 through 50). Users can reorder the cards by name, by value or any method they choose. Cards can be moved by clicking and then dragging the card up or down the page. When the user drops the card, the card will be inserted into that space (either before or after).</p>
<p>In this tutorial, I will cover the following items.</p>
<ol>
<li>Creating a draggable functional component</li>
<li>Developing the UI and integrating the draggable component</li>
<li>Defining styles for drag events</li>
<li>Writing the drag and drop events</li>
</ol>
<p>I am using the <code>app.R</code> format and have created the JavaScript and CSS files. Your project directory should look like this. I also saved the draggable component in a separate file.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&gt; drag-and-drop/
    + app.R
    + draggable_card.R
    + www/
       - styles.CSS
       - index.js</code></pre></div>
<span id="work-component" />
<h3>Creating a draggable functional component</h3>
<p>The most important aspect to creating a draggable component is the attribute <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/draggable">draggable</a>. When this attribute is set to <code>true</code>, the element can be dragged. If you do not want it to be dragged, then use <code>draggable="false"</code> or remove the attribute altogether.</p>
<p>In HTML, the draggable attribute is added to an element like so.</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Hello, world!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div>
<p>In shiny, it would like this.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token comment"># ui.R</span>
tags<span class="token operator">$</span>div<span class="token punctuation">(</span>
    draggable <span class="token operator">=</span> <span class="token string">"true"</span><span class="token punctuation">,</span>
    tags<span class="token operator">$</span>p<span class="token punctuation">(</span><span class="token string">"Hello, world!"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<p>Before I begin developing the app, I will start off by developing a draggable functional component. This component will display a title, some text, and an icon that indicates that a card can be dragged. I will also add a logical argument that disables drag-ability for a card. I will call this component <code>draggable_card</code>.</p>
<p>The function runs in the following order.</p>
<ol>
<li>Validate input arguments (by default, all items are draggable)</li>
<li>Create the SVG icon: The icon is a plus sign with a filled circular background.</li>
<li>Create the card element with all elements (title, text, and icon)</li>
<li>If <code>!draggable</code>, then remove the SVG icon.</li>
<li>Return the element.</li>
</ol>
<p>Here is the whole function as it appears in the file <code>draggable_card.R</code>.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">draggable_card <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> title<span class="token punctuation">,</span> text<span class="token punctuation">,</span> draggable <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment"># validate args</span>
    stopifnot<span class="token punctuation">(</span><span class="token operator">!</span>is.null<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span>
    stopifnot<span class="token punctuation">(</span><span class="token operator">!</span>is.null<span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">)</span>
    stopifnot<span class="token punctuation">(</span><span class="token operator">!</span>is.null<span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span>
    stopifnot<span class="token punctuation">(</span>is.logical<span class="token punctuation">(</span>draggable<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># create &lt;svg> icon</span>
    fill_color <span class="token operator">&lt;-</span> <span class="token string">"#09BC8A"</span>
    line_color <span class="token operator">&lt;-</span> <span class="token string">"#ffffff"</span>
    svg <span class="token operator">&lt;-</span> tag<span class="token punctuation">(</span>
        <span class="token string">"svg"</span><span class="token punctuation">,</span>
        list<span class="token punctuation">(</span>
            <span class="token string">"width"</span> <span class="token operator">=</span> <span class="token string">"25"</span><span class="token punctuation">,</span>
            <span class="token string">"height"</span> <span class="token operator">=</span> <span class="token string">"25"</span><span class="token punctuation">,</span>
            <span class="token string">"viewBox"</span> <span class="token operator">=</span> <span class="token string">"0 0 25 25"</span><span class="token punctuation">,</span>
            <span class="token string">"class"</span> <span class="token operator">=</span> <span class="token string">"card-icon"</span><span class="token punctuation">,</span>
            <span class="token comment"># &lt;circle></span>
            tag<span class="token punctuation">(</span>
                <span class="token string">"circle"</span><span class="token punctuation">,</span>
                list<span class="token punctuation">(</span>
                    <span class="token string">"cx"</span> <span class="token operator">=</span> <span class="token string">"12.5"</span><span class="token punctuation">,</span>
                    <span class="token string">"cy"</span> <span class="token operator">=</span> <span class="token string">"12.5"</span><span class="token punctuation">,</span>
                    <span class="token string">"r"</span> <span class="token operator">=</span> <span class="token string">"12.5"</span><span class="token punctuation">,</span>
                    <span class="token string">"fill"</span> <span class="token operator">=</span> fill_color
                <span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment"># vertical: &lt;line></span>
            tag<span class="token punctuation">(</span>
                <span class="token string">"line"</span><span class="token punctuation">,</span>
                list<span class="token punctuation">(</span>
                    <span class="token string">"x1"</span> <span class="token operator">=</span> <span class="token string">"12.5"</span><span class="token punctuation">,</span>
                    <span class="token string">"y1"</span> <span class="token operator">=</span> <span class="token string">"5"</span><span class="token punctuation">,</span>
                    <span class="token string">"x2"</span> <span class="token operator">=</span> <span class="token string">"12.5"</span><span class="token punctuation">,</span>
                    <span class="token string">"y2"</span> <span class="token operator">=</span> <span class="token string">"20"</span><span class="token punctuation">,</span>
                    <span class="token string">"stroke"</span> <span class="token operator">=</span> line_color<span class="token punctuation">,</span>
                    <span class="token string">"stroke-width"</span> <span class="token operator">=</span> <span class="token string">"2.5"</span><span class="token punctuation">,</span>
                    <span class="token string">"stroke-linecap"</span> <span class="token operator">=</span> <span class="token string">"butt"</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment"># horizontal: &lt;line></span>
            tag<span class="token punctuation">(</span>
                <span class="token string">"line"</span><span class="token punctuation">,</span>
                list<span class="token punctuation">(</span>
                    <span class="token string">"x1"</span> <span class="token operator">=</span> <span class="token string">"5"</span><span class="token punctuation">,</span>
                    <span class="token string">"y1"</span> <span class="token operator">=</span> <span class="token string">"12.5"</span><span class="token punctuation">,</span>
                    <span class="token string">"x2"</span> <span class="token operator">=</span> <span class="token string">"20"</span><span class="token punctuation">,</span>
                    <span class="token string">"y2"</span> <span class="token operator">=</span> <span class="token string">"12.5"</span><span class="token punctuation">,</span>
                    <span class="token string">"stroke"</span> <span class="token operator">=</span> line_color<span class="token punctuation">,</span>
                    <span class="token string">"stroke-width"</span> <span class="token operator">=</span> <span class="token string">"2.5"</span><span class="token punctuation">,</span>
                    <span class="token string">"stroke-linecap"</span> <span class="token operator">=</span> <span class="token string">"butt"</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

    <span class="token comment"># build parent element: &lt;div class="card"></span>
    el <span class="token operator">&lt;-</span> tags<span class="token operator">$</span>div<span class="token punctuation">(</span>
        id <span class="token operator">=</span> paste0<span class="token punctuation">(</span><span class="token string">"card-"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">,</span>
        class <span class="token operator">=</span> <span class="token string">"card"</span><span class="token punctuation">,</span>
        draggable <span class="token operator">=</span> tolower<span class="token punctuation">(</span>draggable<span class="token punctuation">)</span><span class="token punctuation">,</span>
        `data<span class="token operator">-</span>value` <span class="token operator">=</span> title<span class="token punctuation">,</span>
        tags<span class="token operator">$</span>h2<span class="token punctuation">(</span>class <span class="token operator">=</span> <span class="token string">"card-title"</span><span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">,</span>
        svg<span class="token punctuation">,</span>
        tags<span class="token operator">$</span>p<span class="token punctuation">(</span>class <span class="token operator">=</span> <span class="token string">"card-message"</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

    <span class="token comment"># remove &lt;svg> element if draggable = FALSE</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>draggable<span class="token punctuation">)</span> el<span class="token operator">$</span>children<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token keyword">NULL</span>

    <span class="token comment"># return</span>
    return<span class="token punctuation">(</span>el<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The function returns the HTML markup for the draggable component which is rendered in browser. Here is a sample output.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">draggable_card<span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"example"</span><span class="token punctuation">,</span> title <span class="token operator">=</span> <span class="token string">"Test"</span><span class="token punctuation">,</span> text <span class="token operator">=</span> <span class="token string">"This is a test"</span><span class="token punctuation">)</span>            
<span class="token comment"># &lt;div id="card-example" class="card" draggable="true" data-value="Test"></span>
<span class="token comment">#  &lt;h2 class="card-title">Test&lt;/h2></span>
<span class="token comment">#  &lt;svg width="25" height="25" viewBox="0 0 25 25" class="card-icon"></span>
<span class="token comment">#    &lt;circle cx="12.5" cy="12.5" r="12.5" fill="#09BC8A">&lt;/circle></span>
<span class="token comment">#    &lt;line x1="12.5" y1="5" x2="12.5" y2="20" stroke="#ffffff" stroke-width="2.5" stroke-linecap="butt">&lt;/line></span>
<span class="token comment">#     &lt;line x1="5" y1="12.5" x2="20" y2="12.5" stroke="#ffffff" stroke-width="2.5" stroke-linecap="butt">&lt;/line></span>
<span class="token comment">#   &lt;/svg></span>
<span class="token comment">#   &lt;p class="card-message">This is a test&lt;/p></span>
<span class="token comment"># &lt;/div></span></code></pre></div>
<p>If the option <code>draggable</code> was set to false, the function would return the following markup.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">draggable_card<span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"example"</span><span class="token punctuation">,</span> title <span class="token operator">=</span> <span class="token string">"Test"</span><span class="token punctuation">,</span> text <span class="token operator">=</span> <span class="token string">"This is a test"</span><span class="token punctuation">,</span> draggable <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>            
<span class="token comment"># &lt;div id="card-example" class="card" data-value="Test"></span>
<span class="token comment">#  &lt;h2 class="card-title">Test&lt;/h2></span>
<span class="token comment">#   &lt;p class="card-message">This is a test&lt;/p></span>
<span class="token comment"># &lt;/div></span></code></pre></div>
<span id="work-ui" />
<h3>Developing the UI and integrating the draggable component</h3>
<p>Now that the component is working, it can be integrated into a shiny app. In the example app, I am using the tags approach for building the UI. Using the draggable card function, I will create a few cards using example data. I have wrapped the cards in a container and have included an extra drop area. The purpose of the extra drop area is that if an element is dropped into this area, then it will be placed last. I have also created a button is used to display the order of the cards.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">ui <span class="token operator">&lt;-</span> tagList<span class="token punctuation">(</span>

    <span class="token comment"># &lt;head>: link CSS</span>
    tags<span class="token operator">$</span>head<span class="token punctuation">(</span>
        tags<span class="token operator">$</span>link<span class="token punctuation">(</span>rel <span class="token operator">=</span> <span class="token string">"stylesheet"</span><span class="token punctuation">,</span> href <span class="token operator">=</span> <span class="token string">"styles.CSS"</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment"># &lt;main>: main content</span>
    tags<span class="token operator">$</span>main<span class="token punctuation">(</span>
        tags<span class="token operator">$</span>h2<span class="token punctuation">(</span><span class="token string">"Moveable Elements"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        tags<span class="token operator">$</span>p<span class="token punctuation">(</span>
            <span class="token string">"Order the cards by the number of cases or by group."</span><span class="token punctuation">,</span>
            <span class="token string">"Drag and drop a card into the drop zone or on top of"</span><span class="token punctuation">,</span>
            <span class="token string">"another card. Press 'done' when you are finished."</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>

        <span class="token comment"># container for dragged elements</span>
        tags<span class="token operator">$</span>div<span class="token punctuation">(</span>
            class <span class="token operator">=</span> <span class="token string">"dragarea"</span><span class="token punctuation">,</span>

            <span class="token comment"># primary elements</span>
            draggable_card<span class="token punctuation">(</span><span class="token string">"groupA"</span><span class="token punctuation">,</span> <span class="token string">"Group A"</span><span class="token punctuation">,</span> <span class="token string">"14 cases"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            draggable_card<span class="token punctuation">(</span><span class="token string">"groupB"</span><span class="token punctuation">,</span> <span class="token string">"Group B"</span><span class="token punctuation">,</span> <span class="token string">"3 cases"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            draggable_card<span class="token punctuation">(</span><span class="token string">"groupC"</span><span class="token punctuation">,</span> <span class="token string">"Group C"</span><span class="token punctuation">,</span> <span class="token string">"33 cases"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            draggable_card<span class="token punctuation">(</span><span class="token string">"groupD"</span><span class="token punctuation">,</span> <span class="token string">"Group D"</span><span class="token punctuation">,</span> <span class="token string">"7 cases"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            draggable_card<span class="token punctuation">(</span><span class="token string">"groupE"</span><span class="token punctuation">,</span> <span class="token string">"Group E"</span><span class="token punctuation">,</span> <span class="token string">"21 cases"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

            <span class="token comment"># extra drop zone</span>
            tags<span class="token operator">$</span>div<span class="token punctuation">(</span>
                class <span class="token operator">=</span> <span class="token string">"droparea"</span><span class="token punctuation">,</span>
                tags<span class="token operator">$</span>p<span class="token punctuation">(</span><span class="token string">"Drop here"</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>

        <span class="token comment"># submit button that shows results</span>
        tags<span class="token operator">$</span>button<span class="token punctuation">(</span>
            id <span class="token operator">=</span> <span class="token string">"submit"</span><span class="token punctuation">,</span>
            type <span class="token operator">=</span> <span class="token string">"submit"</span><span class="token punctuation">,</span>
            class <span class="token operator">=</span> <span class="token string">"shiny-bound-input action-button"</span><span class="token punctuation">,</span>
            <span class="token string">"Done"</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment"># link js file</span>
    tags<span class="token operator">$</span>script<span class="token punctuation">(</span>src <span class="token operator">=</span> <span class="token string">"index.js"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment"># server</span>
server <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> output<span class="token punctuation">,</span> session<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment"># app</span>
shinyApp<span class="token punctuation">(</span>ui<span class="token punctuation">,</span> server<span class="token punctuation">)</span></code></pre></div>
<span id="work-CSS" />
<h3>Defining styles for drag events</h3>
<p>There are a number of styles in the CSS file, but I would like focus on a few of them: highlighting, drag, and focus. The classes highlighting and focus are used for highlighting a potential drop area by adding a bright green border to the target element. Focus is only used for the blank drop zone. The class drag is used for adding a shadow to the element when it is dragged.</p>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token comment">/* for highlighting potential drop */</span>
<span class="token selector">.highlighting</span> <span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #09BC8A<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* add shadow to dragged element */</span>
<span class="token selector">.drag</span> <span class="token punctuation">{</span>
    <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 0 9px 3px <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 9px 3px <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* for highlighting dropzone element */</span>
<span class="token selector">.droparea.focus</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> White<span class="token punctuation">;</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #09BC8A<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>These classes will be added and removed in the following js events.</p>
<span id="work-events" />
<h3>Writing the drag and drop events</h3>
<p>There are a number of drag related events that you can choose from. At a minimum, you should use <code>dragstart</code> and <code>drop</code>. In this example, I will cover <code>dragstart</code>, <code>dragend</code>, <code>dragover</code>, <code>dragenter</code>, <code>dragleave</code>, and <code>drop</code>. The list below provides a summary of the events that I used in the example app and what each event does.</p>
<ol>
<li><code>dagstart</code>/<code>dragend</code>: When an element is dragged, I would like to add a CSS class that makes the dragged element visually noticeable. I also want to remove the class when dragging is stopped.</li>
<li><code>dragover</code>: When the element is hovered over a potential drop area, I would like to add a CSS class to the drop area.</li>
<li><code>dragenter</code>/<code>dragleave</code>: If the dragged element is hovered over the extra dropzone, I would like to add a CSS class that focuses the dropzone. I also want to remove this class if the dropzone is no longer focused.</li>
<li><code>drop</code>: I would also like add some logic that determines where the element should be added. If I drag an element down the page, I am assuming that I want the element to be further down the page. Therefore, I would like the element to be placed <strong>after</strong> the droparea. If I drag an element up the page, I am assuming that I want the element to appear higher on the page. Therefore, I would like the element to be placed <strong>before</strong> the droparea.</li>
</ol>
<span id="work-events-vars" />
<h4>Defining variables and a helper function</h4>
<p>First, I will create a few variables that will be used across all events. The element <code>dragged</code> will receive the HTML element that I dragged. The variable <code>startingY</code> saves the starting <code>y</code> position of the dragged element. This will be used to determine if the element is moved up or down the page. The last variable I have defined is used to select the blank drop element.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> dragged<span class="token punctuation">,</span> startingY<span class="token punctuation">,</span> dropzone <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".droparea"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>In some events that I will write, I will be adding the CSS class <code>.highlighting</code> a potential droparea. However, I will need a function that removes all this class when events are finished.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">remove_highlighting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".card"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">elem</span> <span class="token operator">=></span> elem<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"highlighting"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<span id="work-events-dragstart" />
<h4>Event for dragstart</h4>
<p>The first event is <code>dragstart</code>. This event runs as soon as an element is dragged. In this example, I initialized a few things.</p>
<ol>
<li><code>dataTransfer</code>: this property manages the type of drag (i.e., copy or move), the content that is being dragged (i.e., HTML, images, text, etc.), and other data that you want to use</li>
<li><code>classList.add</code>: Add the <code>.drag</code> CSS class to the element is, at the moment, being dragged</li>
<li>update variables: Update the <code>dragged</code> and <code>startingY</code> variables (defined in the previous section).</li>
</ol>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"dragstart"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// set event data transfer</span>
    event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>dropEffect <span class="token operator">=</span> <span class="token string">"move"</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">"text/HTML"</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// add class to dragged item</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"drag"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// update variables</span>
    dragged <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    startingY <span class="token operator">=</span> event<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span></code></pre></div>
<span id="work-events-dragend" />
<h4>Event for dragend</h4>
<p>The <code>dragend</code> event is used for running a function when dragging stops. In this example, when the user stops dragging an element, I want to remove the CSS class <code>drag</code>that was added in the <code>dragstart</code> eventfrom the dragged element.  </p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"dragend"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"drag"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span></code></pre></div>
<span id="work-events-dragover" />
<h4>Event for dragover</h4>
<p>The event <code>dragover</code> is run when an element is dragged over a potential drop area. In this example, this would be another card (i.e., <code>&#x3C;div class="card">...&#x3C;/div></code>) and the extra dropzone (which I will explain in next section). When the user drags an element over another draggable card, I want to add the <code>.highlighting</code> CSS class to the other card. The value of event target is tied to the location of the cursor, which would return other elements besides the card element. Therefore, we need to find the nearest draggable card (i.e., div with the CSS class <code>card</code>).</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"dragover"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// prevent any default actions (e.g., link clicks, etc.)</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// if the closet &lt;div> to the target has the class of "card",</span>
    <span class="token comment">// add highlighting to it</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">"card"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">"div.card"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"highlighting"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span></code></pre></div>
<p><strong>NOTE:</strong> If the code above is unclear, add a console log inside the event. Add <code>console.log(event.target)</code> anywhere in this event. Open the browser console and restart the app. Take note of the cursor position and the output element.</p>
<span id="work-events-dragenter" />
<h4>Event for dragenter</h4>
<p>The event <code>dragenter</code> is similar to <code>dragover</code> as they both can be used for highlighting potential drop areas. In this example, I am using <code>dragenter</code> for highlighting the extra dropzone. The variable <code>dropzone</code> was defined in the section <a href="#work-events-vars">Defining variables and a helper function</a>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"dragenter"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// if the target element is the "droparea"</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">"droparea"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dropzone<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span></code></pre></div>
<span id="work-events-dragleave" />
<h4>Event for dragleave</h4>
<p>The opposite event of <code>dragenter</code> is <code>dragleave</code>. In this example, if a card is dragged into the extra drop zone and then dragged elsewhere, I want to remove all highlighting classes. </p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"dragleave"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// if the target element is the "droparea"</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">"droparea"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dropzone<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// remove all highlighting</span>
    <span class="token function">remove_highlighting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span></code></pre></div>
<h4>Event for drop</h4>
<p>The last event is the drop event. This event will run when the dragged element is dropped into a new, valid position. In this example, I structured the drop event in two ways: 1) if the element is dropped in the blank dropzone and 2) if the element is dropped on top of another card. Both methods will remove the dragged element and insert it into a valid target location. Should the target location is not valid, then the dragged element will return to the starting position.</p>
<p>If the element is dropped on top of another card I want to add it before or after the element. Using the variable <code>startingY</code>, we can determine if the element is dragged up or down the page. I will use the event property <code>event.pageY</code> and compare it with <code>startingY</code>. If the value of <code>pageY</code>at the time of dropis less than <code>startingY</code>, then the element has been moved up the page. If the <code>pageY</code> value is greater than <code>startingY</code>, then the element has been moved down the page. </p>
<p>Depending on the comparison of these values, the dragged element will either be added before or after the target element (i.e., drop area). Using the function <code>insertAdjacentHTML</code>, you can specify the insert position (i.e., <code>beforebegin</code>, <code>afterbegin</code>, <code>beforeend</code>, <code>afterend</code>). In this example, I am using <code>beforebegin</code> and <code>afterend</code> as I want the dragged card to appear before or after another card.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"drop"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// remove any remaining highlighting</span>
    <span class="token function">remove_highlighting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dropzone<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// when dropped in droparea</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">"droparea"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// remove styles dragged element</span>
        dragged<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"drag"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// remove dragged element starting point and add before dropzone</span>
        <span class="token comment">// we want to keep the dropzone for future use.</span>
        dragged<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>dragged<span class="token punctuation">)</span><span class="token punctuation">;</span>
        event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">"beforebegin"</span><span class="token punctuation">,</span> dragged<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// when "replacing" card</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>className <span class="token operator">==</span> <span class="token string">"card"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// remove element from document and add to drop position</span>
        dragged<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"drag"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dragged<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>dragged<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// if item is moved up, insert the element before the target</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>pageY <span class="token operator">&lt;</span> startingY<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">"div.card"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">"beforebegin"</span><span class="token punctuation">,</span> dragged<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// if item is moved down, insert the element after the target</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>pageY <span class="token operator">>=</span> startingY<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">"div.card"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">"afterend"</span><span class="token punctuation">,</span> dragged<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span></code></pre></div>
<p>That is it! </p>
<p><strong>NOTE:</strong> In this <code>index.js</code> file, the final event runs when the button <em>done</em> is clicked. This event triggers an alert that displays the new order of the cards. </p>
<span id="know" />
<h2>What do I need to know before I integrate this into my app?</h2>
<p>To summarize this tutorial, here are the basic elements that you need.</p>
<ol>
<li>An element with the attribute <code>draggable="true"</code> (e.g., <code>&#x3C;div draggable="true">...&#x3C;/div></code>)</li>
<li>An event that initializes the data transfer when an element is dragged, as well as saves the HTML element for re-adding the dragged element into the document.</li>
</ol>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// "save" dragged element</span>
<span class="token keyword">let</span> dragged<span class="token punctuation">;</span> 

<span class="token comment">// listener</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"dragstart"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>dropEffect <span class="token operator">=</span> <span class="token string">"move"</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">"text/HTML"</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
    dragged <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<ol start="3">
<li>An event that removes and adds the dragged element when it is dropped.</li>
</ol>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"drop"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// remove dragged element</span>
    dragged<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>dragged<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// add the dragged element - or "afterend", "beforeend", etc.</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">"beforebegin"</span><span class="token punctuation">,</span> dragged<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>There are other drag events that may be useful for your app that I did not cover in this tutorial. See the <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API">drag and drop API</a> documentation for more information and examples.</p>
<p>In this example, I wanted to insert the dragged element before or after an element depending on if the element was dragged up or down the page. Therefore, I used the function <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML">insertAdjacentHTML</a>. You may want to use another HTML insert function depending on purpose of your app (e.g., <code>appendChild</code>, etc.).</p>
<p>More reading and testing is needed to ensure the draggable elements are web accessible. I will be investigating this and will update the tutorial. Stay tuned!</p>
<span id="run" />
<h2>How do I run the example?</h2>
<p>The simplest way to run the example is directly from the R console using the function <code>shiny::runGitHub</code>.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"shiny"</span><span class="token punctuation">)</span>
shiny<span class="token operator">::</span>runGitHub<span class="token punctuation">(</span>repo <span class="token operator">=</span> <span class="token string">"shinyAppTutorials"</span><span class="token punctuation">,</span> username <span class="token operator">=</span> <span class="token string">"davidruvolo51"</span><span class="token punctuation">,</span> subdir <span class="token operator">=</span> <span class="token string">"drag-and-drop"</span><span class="token punctuation">)</span></code></pre></div>
<p>Alternatively, you can clone the repository and run locally.</p></section><div class="article-footer"><p>Keywords</p><ul class="post-meta-tags article-tags" aria-label="post tags"><li><code class="tag tag-interactivity">interactivity</code></li><li><code class="tag tag-javascript">javascript</code></li></ul></div></article></div></div></main><footer class="footer"><h2>shinyTutorials</h2><ul class="menu footer-menu"><li class="menu-item"><a class="menu-link" href="/shinytutorials/privacy/">Privacy</a></li></ul><ul class="menu footer-menu"><li class="menu-item"><a class="menu-link" href="https://www.twitter.com/dcruvolo"><svg class="icon menu-link-icon" height="30" width="30" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg>@dcruvolo</a></li><li class="menu-item"><a class="menu-link" href="https://github.com/davidruvolo51/shinyAppTutorials"><svg class="icon menu-link-icon" height="30" width="30" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>shinyAppTutorials</a></li><li class="menu-item"><a class="menu-link" href="https://davidruvolo51.github.io/portfolio/"><svg class="icon" width="50" height="50" viewBox="0 0 50 40" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="user" transform="translate(11.280196, 6.000000)" stroke="currentColor" stroke-width="2" fill="currentColor"><path d="M27.1829506,38.463564 C27.1829506,31.1581236 23.1247009,23.3692614 18.2303544,21.0113097 C16.8720034,20.3568962 15.4135775,20 13.9041559,20 C12.4962651,20 11.1176019,20.3104979 9.81412773,20.8833092 C4.68481072,23.1373859 0.63453826,31.6314453 0.63453826,39.073266" id="body"></path><circle id="head" cx="13.7198041" cy="9" r="9"></circle></g></svg>My Portfolio</a></li></ul></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/,/^(?:\/do\-not\-track\/me\/too\/)$/];
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-76117337-11',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-76117337-11', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/tutorials/drag-and-drop/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-845f39e382901b6152de.js"],"app":["/app-166b32bd8a410c2f241a.js"],"component---src-components-tutorials-js":["/component---src-components-tutorials-js-90853c9ee1cccce03af6.js"],"component---src-pages-404-js":["/component---src-pages-404-js-9df7a9bf25837f16d4d4.js"],"component---src-pages-about-js":["/component---src-pages-about-js-ef596e463631ef9db5eb.js"],"component---src-pages-gallery-index-js":["/component---src-pages-gallery-index-js-2eab162a4451ae0c95b0.js"],"component---src-pages-index-js":["/component---src-pages-index-js-9d5e1315a5aadcf5e13a.js"],"component---src-pages-privacy-js":["/component---src-pages-privacy-js-77bb9917b07f56654c21.js"],"component---src-pages-tutorials-index-js":["/component---src-pages-tutorials-index-js-60be2dd2db92736bda8f.js"]};/*]]>*/</script><script src="/shinytutorials/polyfill-845f39e382901b6152de.js" nomodule=""></script><script src="/shinytutorials/component---src-components-tutorials-js-90853c9ee1cccce03af6.js" async=""></script><script src="/shinytutorials/ec800322c0f71b5715d75b0073f476a066af1f45-77d55e0998aa0b15bf92.js" async=""></script><script src="/shinytutorials/commons-032b27bcdead6ca1973e.js" async=""></script><script src="/shinytutorials/styles-407fe62976dc5310c43e.js" async=""></script><script src="/shinytutorials/app-166b32bd8a410c2f241a.js" async=""></script><script src="/shinytutorials/framework-cd3e1e804d552fa282ef.js" async=""></script><script src="/shinytutorials/webpack-runtime-6cf865dbb83a04b17843.js" async=""></script></body></html>