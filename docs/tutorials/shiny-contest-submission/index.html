<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/shinytutorials/styles.69afdcbeb83bb1ca8316.css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2b2b2b}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#d4d0ab}.token.punctuation{color:#fefefe}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#abe338}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.important,.token.regex{color:gold}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:700}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:400}}.menu{width:100%;margin:0 auto;list-style:none;padding:12px 0}.menu .menu-item{display:block;padding:0;margin:0 0 12px}.menu .menu-item .menu-link{position:relative;text-transform:uppercase;font-size:11pt;letter-spacing:2px;font-weight:600;color:#5177b8;padding-bottom:4px;border-bottom:2px solid transparent}.menu .menu-item .menu-link .menu-link-icon{position:relative;padding-right:6px;top:4px}.menu .menu-item .menu-link .menu-link-icon path{fill:#5177b8}.menu .menu-item .menu-link:hover{border-bottom-color:#5177b8}@media screen and (min-width:972px){.menu .menu-item{display:inline-block;margin:0 18px 0 0}}.nav{position:fixed;top:0;left:0;width:100%;display:-ms-grid;display:grid;grid-template-columns:65% 35%;grid-template-areas:"brandLink menuBtn";-webkit-column-gap:0;column-gap:0;row-gap:0;background-color:#fff;box-shadow:0 2px 6px rgba(0,0,0,.18);z-index:15}.nav .nav-item{display:flex;align-items:center}.nav .nav-item.brand-link{grid-area:brandLink;color:#5177b8;font-weight:600;font-size:14pt;letter-spacing:2px;padding:0 0 0 16px;box-shadow:none}.nav .nav-item.brand-link .brand-link-icon path{fill:#5177b8}.nav .navigation{display:block;position:absolute;top:48px;width:1px;height:1px;clip:rect(0 0 0 0);clip:rect(0,0,0,0);padding:32px 0;background-color:#fff;z-index:14}.nav .navigation .menu-item{display:block;text-align:center}.nav .navigation .menu-item .menu-link{font-size:16pt;box-shadow:none}.nav .navigation.expanded{width:100%;height:auto;clip:auto;box-shadow:0 6px 6px rgba(0,0,0,.18)}.nav .menu-btns{justify-content:flex-end;grid-area:menuBtn}.nav .menu-btns .menu-button{margin:0}.nav .menu-btns .menu-button #menuBtn{margin-right:16px}@media screen and (min-width:972px){.nav{display:grid;grid-template-areas:"brandLink navLinks";grid-template-columns:200px 80%}.nav .nav-item.brand-link{padding-bottom:0;grid-area:brandLink}.nav .nav-item.navigation{position:static;display:flex;width:100%;grid-area:navLinks;box-shadow:none}.nav .nav-item.navigation .menu-item{display:inline-block;width:auto;margin:0 24px 0 0}.nav .nav-item.navigation .menu-item .menu-link{font-size:11pt}.nav .nav-item.navigation .menu-item:last-child{margin-right:0}.nav .nav-item.menu-btns{display:none}}#menuBtn{display:flex;justify-content:center;align-items:center;background-color:transparent}#menuBtn .menu-icon{display:block;margin:0 auto;position:relative}#menuBtn .menu-icon .menu-bar{display:block;height:3px;width:30px;border-radius:6px;margin-bottom:6px;background-color:#5177b8;transition:all .2s ease-in-out}#menuBtn .menu-icon .menu-bar:first-child{margin-top:2px}#menuBtn .menu-label{display:inline-block;position:relative;margin-top:6px;margin-right:8px;color:#5177b8;text-transform:uppercase;letter-spacing:2px;font-weight:700;font-size:11pt;cursor:pointer}#menuBtn.open .menu-bar:first-child{opacity:0}#menuBtn.open .menu-bar:nth-child(2){transform:rotate(-45deg);transform-origin:center .5px;background-color:#5177b8}#menuBtn.open .menu-bar:nth-child(3){transform:rotate(45deg);transform-origin:24.85px -2.5px;background-color:#5177b8}#menuBtn.open .menu-label{color:#5177b8}.footer{margin:0;padding:62px 0;background-color:#2a2c32}.footer h2{display:block;width:85%;margin:0 auto;padding-top:12px;color:#d8d8d8;letter-spacing:2.5px}.footer .menu{list-style:none;width:85%;margin:12px auto;padding:0}.footer .menu .menu-item{margin-right:24px}.footer .menu .menu-item .menu-link{color:#d8d8d8;box-shadow:none}.footer .menu .menu-item .menu-link .menu-link-icon path{fill:#d8d8d8}.footer .menu .menu-item .menu-link:hover{border-bottom-color:#d8d8d8}body,html{padding:0;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;cursor:default;font-size:16pt}article,aside,footer,header,main,nav{padding:0;margin:0;display:block}h1,h2,h3,h4,h5,h6{display:block;color:#2a2c32;line-height:1.4;padding:0;margin:0 0 6px}p{line-height:1.8;padding:0;margin:0 0 12px}li,p{color:#3f454b}li{line-height:1.4}a{color:#5177b8;text-decoration:none;box-shadow:0 1px 0 #5177b8}blockquote{line-height:1.8}.form{display:block;padding:32px 0;background-color:#fff;border-bottom:1px solid #d8d8d8}.form .input-label{display:block;padding:0;margin:0;font-size:18pt;color:#3f454b;font-weight:600}.form .input-example{line-height:1.5;padding:0;font-size:12pt;color:#3f454b;margin:0 0 12px}input{width:90%;font-size:12pt;padding:8px 8px 8px 12px;border-radius:0;background-color:#f6f6f6;box-shadow:inset 0 2px 2px #d8d8d8}button,input{-webkit-appearance:none;-moz-appearance:none;appearance:none;display:block;border:none}button{cursor:pointer}.btn,.btn-link{padding:4px;margin:8px 0;font-size:14px;background-color:transparent;border-left:3px solid transparent;transition:all .2s ease-in-out}.btn-primary,.btn-secondary{text-transform:uppercase;letter-spacing:2px;font-weight:600;border-radius:3px;padding:6px 12px}.btn-primary{background-color:#5177b8;border:2px solid #5177b8;color:#fff;padding:8px 12px}.btn-primary:focus,.btn-primary:hover{background-color:transparent;border-color:#5177b8;color:#5177b8}.btn-secondary{background-color:transparent;border:2px solid #5177b8;color:#5177b8}.btn-secondary:focus,.btn-secondary:hover{background-color:#5177b8;color:#f6f6f6;border-color:#5177b8}.btn-keyword{font-size:12pt}.btn-keyword.selected,.btn-keyword:focus,.btn-keyword:hover{color:#5177b8;font-weight:600;border-left-color:#5177b8}.btn-link{display:block;width:125px;text-align:center}.btn-centered{margin:24px auto 0}img{display:block;width:100%}.icon{display:inline-block;width:20px;height:20px}.post-meta-tags{display:inline-block;padding:0;margin:0 0 0 18px;list-style:none;color:#3f454b}.post-meta-tags li{display:inline;margin-left:12px}.post-meta-tags li .tag{border-radius:6px;font-size:11pt;padding:5px 10px;background-color:#f6f6f6;font-family:consolas,courier,sans-serif}.post-meta-tags li .tag:before{content:"#"}.gatsby-highlight{font-size:12pt;overflow:auto}.gatsby-highlight pre{border-radius:4px}.gatsby-resp-image-link{box-shadow:none}:not(pre)>code{font-size:14pt}.flex{display:flex}.flex .flex-child{display:block;width:100%;height:auto}.flex.flex-30x70-layout,.flex.flex-33x3-layout,.flex.flex-50x2-layout{width:100%;flex-wrap:wrap}@media (min-width:812px){.flex.flex-30x70-layout .flex-child{display:inline-block}.flex.flex-30x70-layout .flex-child:nth-child(odd){width:30%}.flex.flex-30x70-layout .flex-child:nth-child(2n){width:70%}.flex.flex-33x3-layout .flex-child{display:inline-block;width:33%}.flex.flex-50x2-layout .flex-child{display:inline-block}.flex.flex-50x2-layout .flex-child:nth-child(2n),.flex.flex-50x2-layout .flex-child:nth-child(odd){width:50%}}.main{padding:0;min-height:60vh}.main .full-section{width:100%}.main .full-section .full-section-content,.main .main-section{width:90%;margin:0 auto}.main .main-section{padding:24px 0}.main .main-section.welcome-section{padding:0;margin:48px auto}.main .related-projects,.main .tutorial-latest{padding:44px 0}.main .related-projects h2,.main .tutorial-latest h2{text-align:center;text-transform:uppercase;letter-spacing:2px;padding:0;margin:0}.main .related-projects p:not(.post-desc),.main .tutorial-latest p:not(.post-desc){text-align:center}.main .related-projects .post.post-feature,.main .tutorial-latest .post.post-feature{width:100%}.main .tutorial-index,.main .tutorial-latest{background-color:#f6f6f6}.main .tutorial-index{padding:0 0 66px}.main .tutorial-index .tutorial-index-sidebar{position:static;padding-top:50px}.main .tutorial-index .tutorial-index-sidebar .sidebar-content{width:80%;margin:0 auto}.main .tutorial-index .tutorial-index-sidebar .sidebar-content .menu-caption{margin:0 0 12px;line-height:1.3}.main .tutorial-index .tutorial-index-sidebar .sidebar-content .taglist{list-style:none;padding:0;margin:0 0 16px -6px}.main .tutorial-index .tutorial-index-sidebar .sidebar-content .taglist .taglist-item{width:200px;padding:0 24px 0 0;margin-bottom:12px;cursor:pointer}.main .tutorial-index .tutorial-index-posts{padding:32px 0}.main .tutorial-index .tutorial-index-posts h2{padding-left:32px;margin-bottom:32px}.main .tutorial-index .tutorial-index-posts .post.post-plain{border-bottom:1px solid #f6f6f6;box-shadow:none}.main .tutorial-index .tutorial-index-posts .post.post-plain:last-child{border-bottom:none;box-shadow:none;border-radius:0}.main .tutorial-index .tutorial-index-posts form{padding-left:32px;padding-right:32px;box-shadow:none;border-radius:0}.main .tutorial-index .tutorial-index-posts form .input-label{color:#2a2c32;font-size:21pt;font-weight:600}.main.tutorial{padding:50px 0}.main.shinyapps-gallery,.main.tutorial{background-color:#f6f6f6}.main.shinyapps-gallery .main-section{width:100%}.main.shinyapps-gallery .main-section h2{padding-left:32px;margin-bottom:32px}.main.shinyapps-gallery .main-section .shinyapp-entry{border-radius:none;box-shadow:none;border-bottom:1px solid #d8d8d8}.main.about-page #repos .column-4,.main.about-page #repos .column-5,.main.about-page #repos .column-6,.main.about-page #repos thead th:nth-child(n+4){text-align:left}@media screen and (min-width:972px){.main .full-section .full-section-content,.main .main-section{max-width:972px}.main .related-projects .post.post-feature,.main .tutorial-latest .post.post-feature{max-width:40%}.main .related-projects .post.post-feature:nth-child(odd),.main .tutorial-latest .post.post-feature:nth-child(odd){margin-right:32px}.main .tutorial-index .tutorial-index-sidebar{padding-top:82px;position:-webkit-sticky;position:sticky;top:0;height:100%}.main .tutorial-index .tutorial-index-posts{padding-top:82px}.main .tutorial-index .tutorial-index-posts form{width:80%;box-shadow:-4px 0 2px rgba(0,0,0,.18),4px 0 2px rgba(0,0,0,.18),0 -4px 2px rgba(0,0,0,.18);border-radius:6px 6px 0 0}.main .tutorial-index .tutorial-index-posts .post.post-plain{width:80%;box-shadow:-4px 0 2px rgba(0,0,0,.18),4px 0 2px rgba(0,0,0,.18)}.main .tutorial-index .tutorial-index-posts .post.post-plain:last-child{box-shadow:-4px 0 2px rgba(0,0,0,.18),4px 0 2px rgba(0,0,0,.18),0 4px 2px rgba(0,0,0,.18);border-radius:0 0 6px 6px}.main.shinyapps-gallery .main-section .shinyapp-entry{margin-bottom:32px;border-bottom:none;box-shadow:0 0 6px 0 rgba(0,0,0,.18);border-radius:4px}.main.shinyapps-gallery .main-section .shinyapp-entry .post-desc{width:90%}.main.about-page #repos .column-4,.main.about-page #repos .column-5,.main.about-page #repos .column-6,.main.about-page #repos thead th:nth-child(n+4){text-align:right}}.article{width:100%;padding:32px 0;border-radius:6px;background-color:#fff;box-shadow:none}.article .article-body,.article .article-footer,.article .article-header{display:block;width:90%;margin:0 auto}.article .article-header{padding-top:32px;padding-bottom:12px;border-bottom:1px solid #3f454b}.article .article-header h1{text-transform:uppercase;letter-spacing:2px;font-size:12pt;color:#3f454b}.article .article-header h2{font-size:32pt;line-height:1.1;color:#2a2c32}.article .article-header p{color:#3f454b;margin:0 0 12px;line-height:1.5}.article .article-header .article-dates{margin:0;line-height:1.5;font-size:11pt;text-transform:uppercase;letter-spacing:2px;color:#3f454b}.article .article-header .article-dates time{margin-left:4px}.article .article-header .post-meta-tags{margin:0}.article .article-header .post-meta-tags li{margin-left:0;margin-right:8px}.article .article-header .post-meta-tags li code{background-color:#5177b8;color:#f6f6f6}.article .article-header .post-meta-tags li:last-child{margin-right:0}.article .article-body h2{padding:0;margin:32px 0 0}.article .article-body a{color:#5177b8}.article .article-body blockquote{background-color:#f6f6f6;padding:2px 12px;margin:44px 0;border-left:10px solid #5177b8}.article .article-body ol li{margin:0;padding:0;line-height:1.7}.article .article-body ol li p{padding:0;margin:0;line-height:1}.article .article-body ol li a{padding:0;margin:0;line-height:1.5}.article .article-body ol li ol{list-style-type:lower-alpha}@media screen and (min-width:972px){.article{max-width:912px;margin:55px auto 0;box-shadow:0 3px 4px #d8d8d8}}.hero{width:100%;padding:44px 0;display:flex;position:relative;justify-content:center;align-items:center;background-color:#fff;overflow:hidden}.hero.hero-index .hero-content{width:90%;margin:0 auto;padding:72px 0;z-index:2}.hero.hero-index .hero-content h1{font-size:21pt;letter-spacing:2.5px}.hero.hero-index .hero-content h2{font-weight:600;font-size:32pt;letter-spacing:2px;line-height:1.2}.hero.hero-index .hero-content time{font-size:16px;font-weight:600}.hero.hero-index .hero-content .hero-image{display:block;width:300px;margin:44px auto;box-shadow:0 12px 3px -6px rgba(0,0,0,.18)}.hero.hero-text .hero-content{width:90%;margin:0 auto;padding:82px 0 0}.hero.hero-text .hero-content p{margin:0}.hero.hero-style-1{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNDQwcHgiIGhlaWdodD0iNjcxcHgiIHZpZXdCb3g9IjAgMCAxNDQwIDY3MSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTkuMSAoODYxNDQpIC0gaHR0cHM6Ly9za2V0Y2guY29tLS0+PHRpdGxlPmhlcm8tYmstZ3JheTwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9IkJhY2tncm91bmRzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBpZD0iaGVyby1iay1ncmF5LWNvcHkiIGZpbGw9IiM1MTc3YjgiIGZpbGwtb3BhY2l0eT0iMC4zIj48cGF0aCBkPSJNLTEuMjk5NjU0ODNlLTE0LDAgTDE0NDAsMCBDMTQ0MCw5NS45MTQ2OTE5IDE0NDAsMTg1Ljk3MzIwOCAxNDQwLDI3MC4xNzU1NDcgQzE0NDAsMzU0LjM3Nzg4NyAxNDQwLDQ3OS4zMTkzNzEgMTQ0MCw2NDUgQzEyODYuMzEwNjIsNTg3Ljc4MzUyNiAxMTI0LjkxNjc3LDU1MS45MDgyNTQgOTU1LjgxODQ0NSw1MzcuMzc0MTgzIEM3MDIuMTcwOTU5LDUxNS41NzMwNzYgNDU2Ljc1MDAwNiw3NDYuNzg4NDcxIDIxNi4yNzE0MTEsNjQ1IEM3MS41NDI5NDAxLDU4My43NDAxMjEgMC45MjI0ODU1MDIsNTA2LjI2ODcxIDEuMDM5NTg1MDhlLTEzLDQxMS42MzcxNzIgQy0wLjA2NjI0ODYzNzQsNDA0Ljg0MTE3MyAtMC4wNjYyNDg2Mzc0LDM5NC4yOTU0NDkgLTEuNTgxMzczOTJlLTE0LDM4MCBMLTEuMjk5NjU0ODNlLTE0LDAgWiIgaWQ9Imhlcm8tYmstZ3JheSIvPjwvZz48L2c+PC9zdmc+);background-size:cover;background-position:50% 50%;background-repeat:no-repeat}@media screen and (min-width:972px){.hero.hero-index .hero-content,.hero.hero-text .hero-content{width:100%;max-width:912px}.hero.hero-index .hero-content .hero-image,.hero.hero-text .hero-content .hero-image{transform:scale(1.25)}}.article table,.datatable{width:100%;margin:8px auto 6px;font-weight:400;border-spacing:0;text-align:left;font-size:13pt}.article table caption,.datatable caption{text-align:left;font-size:16pt;margin:12px 0;color:#2a2c32;font-weight:600}.article table thead tr th,.datatable thead tr th{font-weight:600;padding:4px 12px;border-bottom:1px solid #2a2c32;color:#2a2c32}.article table tbody tr td,.datatable tbody tr td{padding:24px 12px}.article table tbody tr td .hidden-colname,.datatable tbody tr td .hidden-colname{display:none}.article table tbody tr:nth-child(2n),.datatable tbody tr:nth-child(2n){background-color:#f6f6f6}@media (max-width:892px){.datatable thead{display:none}.datatable tbody tr{display:block;margin-bottom:16px;counter-increment:rowCounter}.datatable tbody tr:nth-child(2n){background-color:transparent}.datatable tbody tr td{display:block;padding:6px 0 6px 6px;color:#3f454b}.datatable tbody tr td:first-child{font-size:16pt;color:#2a2c32}.datatable tbody tr td:first-child:before{content:counter(rowCounter) ".";display:inline-block;margin-right:4px;font-size:15pt}.datatable tbody tr td:not(:first-child){border-bottom:1px solid #f6f6f6}.datatable tbody tr td .hidden-colname{display:inline-block;width:150px}.datatable tbody tr td .hidden-colname:after{content:":"}}.post{padding:32px}.post .post-image{background-position:50%;background-size:cover;margin-bottom:12px}.post .post-title{margin:0;padding:0}.post .post-title-link a{color:#2a2c32;box-shadow:0 1px 0 #3f454b}.post .post-desc{padding:0;margin:0;width:100%}.post .post-date{display:inline-block;color:#3f454b;font-size:14px;font-family:consolas,courier,sans-serif}.post .post-link,.post .post-meta{display:block}.post .post-meta{width:100%;list-style:none;padding:0;margin:0}.post .post-meta .post-meta-item{display:inline-block}.post .post-link{width:90%;box-shadow:none;margin-top:12px;color:#5177b8;text-align:right;text-transform:uppercase;letter-spacing:2px;font-size:14pt;text-decoration:underline;font-weight:600}.post.post-feature{margin:16px auto;box-shadow:0 0 4px 2px rgba(0,0,0,.18);border-radius:4px}.post.post-feature,.post.post-plain{background-color:#fff}@media screen and (min-width:972px){.post .post-link,.post .post-meta{display:inline-flex}.post .post-meta{width:65%}.post .post-desc{width:82%}.post .post-link{width:35%;justify-content:flex-end;margin:0;text-decoration:underline}.post.post-feature{max-width:912px;box-shadow:0 0 4px 2px rgba(0,0,0,.18)}.post.post-feature .post-desc{width:100%}}</style><meta name="generator" content="Gatsby 2.19.37"/><title data-react-helmet="true">shinyTutorials | shinyTravel</title><meta data-react-helmet="true" name="description" content="For the 2020 shiny apps contest, I developed an app that provides travel recommendations based on your preferences for coffee, breweries, and museums. This app demonstrates how to create a custom shiny framework and integrate non-R/non-shiny tools into the development process."/><meta data-react-helmet="true" property="og:title" content="shinyTravel"/><meta data-react-helmet="true" property="og:description" content="For the 2020 shiny apps contest, I developed an app that provides travel recommendations based on your preferences for coffee, breweries, and museums. This app demonstrates how to create a custom shiny framework and integrate non-R/non-shiny tools into the development process."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="dcruvolo"/><meta data-react-helmet="true" name="twitter:title" content="shinyTravel"/><meta data-react-helmet="true" name="twitter:description" content="For the 2020 shiny apps contest, I developed an app that provides travel recommendations based on your preferences for coffee, breweries, and museums. This app demonstrates how to create a custom shiny framework and integrate non-R/non-shiny tools into the development process."/><meta data-react-helmet="true" name="keywords" content="contest"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="shinytutorials latest posts" href="/shinytutorials/rss.xml"/><link as="script" rel="preload" href="/shinytutorials/webpack-runtime-33091d2270196d99f570.js"/><link as="script" rel="preload" href="/shinytutorials/app-d6b499f79d1d2afcd9d2.js"/><link as="script" rel="preload" href="/shinytutorials/styles-5b362900369830f2df37.js"/><link as="script" rel="preload" href="/shinytutorials/commons-58bcf0ded8b1dce23236.js"/><link as="script" rel="preload" href="/shinytutorials/component---src-components-tutorials-js-4b86f7d7552ab3be180e.js"/><link as="fetch" rel="preload" href="/shinytutorials/page-data/tutorials/shiny-contest-submission/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/shinytutorials/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="nav" role="navigation"><a class="nav-item brand-link" href="/shinytutorials/">shinyTutorials</a><ul class="menu nav-item navigation" aria-label="site navigation"><li class="menu-item home-item"><a class="menu-link" data-live-page="home" href="/shinytutorials/"><svg class="icon menu-link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M570.24 247.41L512 199.52V104a8 8 0 0 0-8-8h-32a8 8 0 0 0-7.95 7.88v56.22L323.87 45a56.06 56.06 0 0 0-71.74 0L5.76 247.41a16 16 0 0 0-2 22.54L14 282.25a16 16 0 0 0 22.53 2L64 261.69V448a32.09 32.09 0 0 0 32 32h128a32.09 32.09 0 0 0 32-32V344h64v104a32.09 32.09 0 0 0 32 32h128a32.07 32.07 0 0 0 32-31.76V261.67l27.53 22.62a16 16 0 0 0 22.53-2L572.29 270a16 16 0 0 0-2.05-22.59zM463.85 432H368V328a32.09 32.09 0 0 0-32-32h-96a32.09 32.09 0 0 0-32 32v104h-96V222.27L288 77.65l176 144.56z"></path></svg>Home</a></li><li class="menu-item tutorials-item"><a class="menu-link" data-live-page="tutorials" href="/shinytutorials/tutorials">Tutorials</a></li><li class="menu-item gallery-item"><a class="menu-link" data-live-page="gallery" href="/shinytutorials/gallery">Gallery</a></li><li class="menu-item about-item"><a class="menu-link" data-live-page="about" href="/shinytutorials/about">About</a></li></ul><ul class="nav-item menu menu-btns" aria-label="site settings"><li class="menu-item menu-button"><button id="menuBtn" aria-label="open and close menu" aria-expanded="false"><span class="menu-icon" aria-hidden="true"><span class="menu-bar"></span><span class="menu-bar"></span><span class="menu-bar"></span></span></button></li></ul></nav><main id="main" class="main tutorial" aria-label="main content"><article class="article flex-child"><header class="article-header"><h1>shinyTravel</h1><h2>My submission for the 2020 Shiny Contest</h2><p></p><p class="article-dates">Published:<time>2020-03-11</time></p><ul class="post-meta-tags" aria-label="post tags"><li><code class="tag tag-contest">contest</code></li></ul></header><section class="article-body"><h2>Contents</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li>
<p><a href="#methodology">Methodology</a></p>
<ul>
<li><a href="#methodology-data">Data</a></li>
<li><a href="#methodology-userprefs">User Preferences</a></li>
<li><a href="#methodology-application-development">Application Development</a></li>
</ul>
</li>
<li><a href="#limitations">Limitations</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
<span id="introduction" />
<h2>Introduction</h2>
<p>I am originally from the USA but have lived abroad the last few years. I am currently living in Europe and have been fortunate to travel frequently. Before I visit a new city, I like to make a list of museums, specialty coffee roasters and cafes, and breweries. This allows me to make detailed travel itineraries so I can make the most out of my trip. However, this can be very time-consuming. I wanted an app where I could look at all potential destinations at once and view them on a map. I searched for other apps and projects but didn't find anything that suited my needs. So, like any other data scientist or web developer would do, I decided to create my own app: <code>shinyTravel</code>.</p>
<p>The <code>shinyTravel</code> app is a data-driven shiny app that provides European travel recommendations based on users' preference for visting breweries, museums, and cafes with specialty coffee. Users rate how important it is to visit these locations while traveling using a scale of <em>Not at all important</em> to <em>Essential</em>. Based on how the user rates each location type, they will receive a list of three recommended European cities. Users can limit the search to specific countries and can exclude the larger cities from the results. They can also explore all locations using an interactive map and view summarized data tables.</p>
<p>The <code>shinyTravel</code> app demonstrates how to design and develop a shiny application from scratch (i.e., shiny beyond bootstrap). This app also acts as an example of how to integrate frontend development tools into shiny to optimize apps for browsers and devices.</p>
<span id="methodology" />
<h2>Methodology</h2>
<p>In this section, I will talk about the steps I took to source and clean the data, as well as how I developed the user preferences function. I will also provide information on the tools used to develop the app. More information on running and developing the app can be found in the app's <a href="https://github.com/davidruvolo51/travel-app">readme</a>.</p>
<span id="methodology-data" />
<h3>Data</h3>
<p>I developed this app based on places that I like to visit when traveling: cafes with specialty coffee, breweries, and museums. </p>
<p>I use the <a href="https://europeancoffeetrip.com">European Coffee Trip</a> website to make sure I get great coffee when I visit a new city, so their <a href="https://europeancoffeetrip.com/city-guides/">city guides</a> served as the starting point for building the coffee dataset. I took a <a href="https://github.com/davidruvolo51/travel-app-data/blob/master/scripts/data_1a_source_coffee.R">top-down approach</a> to create the dataset. First, I extracted a list of cities by country and then extracted a list of cafes for each city. Once I had all the cafes, I was able to source cafe-level information (i.e., address, name, coordinates, etc.) from their respective page on the website. Additional <a href="https://github.com/davidruvolo51/travel-app-data/blob/master/scripts/data_1b_geocode_cafes.R">queries</a> were sent to Google Places API to fill in missing data where possible. The coffee dataset was sourced using the <code>rvest</code>, <code>magrittr</code>, <code>stringr</code> packages. The <code>googleway</code> package was used to send requests to the Google Places API.</p>
<p>In order to source data for breweries and museums, I created a dataset of <a href="https://github.com/davidruvolo51/travel-app-data/blob/master/scripts/data_1c_build_cities.R">unique cities</a>. However, I needed to find the center point of each city (i.e., centroid). Initially, I calculated the centroid using the coordinates for all cafes. However, this wasn't an accurate measurement as not all cafes are located close to the city center. As a result, the center point was not always in the center of the city. For example, cities near the coast often had a center point located in the sea. To address this issue, I generated a bounding box for each city using the <code>getbb</code> function from the <code>osmdata</code> package. Centroids of each city were calculated using the mean of min/max latitude and longitude values. The following function was used to calculate the centroid coordinates:</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">bb_centroid <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    d <span class="token operator">&lt;-</span> as.data.frame<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    return<span class="token punctuation">(</span>
        data.frame<span class="token punctuation">(</span>
            lng <span class="token operator">=</span> <span class="token punctuation">(</span>d<span class="token operator">$</span>min<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> d<span class="token operator">$</span>max<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
            lat <span class="token operator">=</span> <span class="token punctuation">(</span>d<span class="token operator">$</span>min<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> d<span class="token operator">$</span>max<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
            stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>Reference</strong>: this function can be found in the following <a href="https://github.com/davidruvolo51/travel-app-data/blob/master/scripts/utils/utils_1_brewery.R#L26">script</a>.</p>
<p>Using the list of unique cities, I used the coordinates to write <a href="http://overpass-api.de">Overpass API</a> queries to source breweries and museums in those cities. OSM tags were selected using <a href="http://tagfinder.herokuapp.com">tagfinder.herokuapp.com</a> and queries were wrapped into a function that could be used in a loop. <a href="http://overpass-turbo.eu">Overpass Turbo</a> was used to test and debug queries. Queries for breweries and museums were rewritten into functions that could be used in a batch querying script. All queries were structured to return nodes, ways, and relations. A 35000-meter search radius was used to limit the results around each city. These functions are listed below.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token comment"># overpass api query for finding breweries</span>
brew<span class="token operator">$</span>overpass<span class="token operator">$</span>new_query <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>radius <span class="token operator">=</span> <span class="token number">35000</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> lng<span class="token punctuation">,</span> timeout <span class="token operator">=</span> <span class="token number">750</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    paste0<span class="token punctuation">(</span>
        <span class="token string">"[out:json][timeout:"</span><span class="token punctuation">,</span> timeout<span class="token punctuation">,</span> <span class="token string">"];"</span><span class="token punctuation">,</span>
        <span class="token string">"("</span><span class="token punctuation">,</span>
        <span class="token string">"nwr"</span><span class="token punctuation">,</span>
        <span class="token string">"['craft'='brewery']"</span><span class="token punctuation">,</span>
        <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr"</span><span class="token punctuation">,</span>
        <span class="token string">"['amenity'='restaurant']"</span><span class="token punctuation">,</span>
        <span class="token string">"['microbrewery'='yes']"</span><span class="token punctuation">,</span>
        <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr"</span><span class="token punctuation">,</span>
        <span class="token string">"['amenity'='pub']"</span><span class="token punctuation">,</span>
        <span class="token string">"['microbrewery'='yes']"</span><span class="token punctuation">,</span>
        <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr"</span><span class="token punctuation">,</span>
        <span class="token string">"['amenity'='bar']"</span><span class="token punctuation">,</span>
        <span class="token string">"['microbrewery'='yes']"</span><span class="token punctuation">,</span>
        <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr"</span><span class="token punctuation">,</span>
        <span class="token string">"['building'='brewery']"</span><span class="token punctuation">,</span>
        <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"out;"</span><span class="token punctuation">,</span>
        <span class="token string">">;"</span><span class="token punctuation">,</span>
        <span class="token string">"out skel qt;"</span><span class="token punctuation">,</span>
        sep <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># overpass api query for finding museums</span>
museums<span class="token operator">$</span>new_query <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>radius <span class="token operator">=</span> <span class="token number">35000</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> lng<span class="token punctuation">,</span> timeout <span class="token operator">=</span> <span class="token number">750</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    paste0<span class="token punctuation">(</span>
       <span class="token string">"[out:json][timeout:"</span><span class="token punctuation">,</span> timeout<span class="token punctuation">,</span> <span class="token string">"];"</span><span class="token punctuation">,</span>
        <span class="token string">"("</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['tourism'='museum']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='history']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='art']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='railway']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='local']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='open_air']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='technology']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='nature']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='military']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='archaeological']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='local']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='transport']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='living_history']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"nwr['museum'='children']"</span><span class="token punctuation">,</span> <span class="token string">"(around:"</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lat<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> lng<span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">");"</span><span class="token punctuation">,</span>
        <span class="token string">"out;"</span><span class="token punctuation">,</span>
        <span class="token string">">;"</span><span class="token punctuation">,</span>
        <span class="token string">"out skel qt;"</span><span class="token punctuation">,</span>
        sep <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The scripts for running queries to find <a href="https://github.com/davidruvolo51/travel-app-data/blob/master/scripts/data_2a_source_breweries.R">breweries</a> and <a href="https://github.com/davidruvolo51/travel-app-data/blob/master/scripts/data_3a_source_museums.R">museums</a> in each city were run in RStudio cloud. API requests were sent using the <code>httr</code> package. Each script took several hours to run. All results were saved to json format. Data was extracted from json files using the <code>jsonlite</code> package. Not all queries returned the same data structure. Using the results for London, variables of interest were defined and used to evaluate missing variables in all data files. <code>NA</code> values were used for missing variables. The breweries and museums datasets were saved into separate files for additional geocoding.</p>
<p><a href="https://nominatim.org/release-docs/latest/api/Overview/">Nominatim API</a> queries were run to fill in missing information and geocoordinates. Using the OSM ID and type (e.g., way, node, relation), requests were sent to the <code>lookup</code> API using the <code>httr</code> package. The function used to build queries is listed below.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">tools<span class="token operator">$</span>new_request <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">"N"</span><span class="token punctuation">,</span> format <span class="token operator">=</span> <span class="token string">"json"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    prefix <span class="token operator">&lt;-</span> <span class="token string">"https://nominatim.openstreetmap.org/lookup?"</span>
    output <span class="token operator">&lt;-</span> paste0<span class="token punctuation">(</span><span class="token string">"&amp;format="</span><span class="token punctuation">,</span> format<span class="token punctuation">)</span>
    return<span class="token punctuation">(</span>paste0<span class="token punctuation">(</span>prefix<span class="token punctuation">,</span> <span class="token string">"osm_ids="</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> id<span class="token punctuation">,</span> output<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Each script took several hours to run. All column names were standardized to make it easier to merge the data later on. All scripts and data were pushed to the <code>travel-app-data</code> repo, and then pulled into the <code>travel-app</code> repo.</p>
<p>To prepare the data for use in the app, all duplicated rows were removed and locations without names were excluded. Locations with missing coordinates were also removed. All locations were plotted on a map. For locations that mistakenly appeared in countries outside Europe, those incorrect coordinates were fixed. The datasets were reduced to columns of interest (id, country, city, coords, name, place type) and then merged into a master dataset: <code>all_european_places.RDS</code>.</p>
<p>The master dataset was used to generate a series of summary objects, including the number of places by city. The <code>places_by_city</code> object is the primary data source for the app as it contains the number of places per type by city. This data is used to create travel recommendations, generate input elements and filters, and render the summary tables. </p>
<p>In total, eight datasets were created. Three of them are used in the final application and located in the <code>data/</code> directory. The filenames and descriptions can be found in the following table. See the file <code>data/data_1_prep.R</code> to see how these files were generated.</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="center">Used in Production</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>all_european_breweries.RDS</code></td>
<td align="center">no</td>
<td align="left">the cleaned dataset containing the breweries by city</td>
</tr>
<tr>
<td align="left"><code>all_european_coffee.RDS</code></td>
<td align="center">no</td>
<td align="left">the cleaned dataset containing the cafes with specialty coffee by city</td>
</tr>
<tr>
<td align="left"><code>all_european_museums.RDS</code></td>
<td align="center">no</td>
<td align="left">the cleaned dataset containing the museums by city</td>
</tr>
<tr>
<td align="left"><code>all_european_places.RDS</code></td>
<td align="center">no</td>
<td align="left">a master list of the breweries, cafes, and museums (used to create summary objects)</td>
</tr>
<tr>
<td align="left"><code>travel_all_cities_geocoded.RDS</code></td>
<td align="center">no</td>
<td align="left">gecoded cities used to source breweries and museums</td>
</tr>
<tr>
<td align="left"><code>travel_summary_userprefs.RDS</code></td>
<td align="center">yes</td>
<td align="left">a summary of locations by city for use in the user preferences function</td>
</tr>
<tr>
<td align="left"><code>travel_summary_general.RDS</code></td>
<td align="center">yes</td>
<td align="left">a summary of locations for use in the visualizations</td>
</tr>
<tr>
<td align="left"><code>travel.geojson</code></td>
<td align="center">yes</td>
<td align="left">a list of places by city in geojson format for use in the Mapbox map</td>
</tr>
</tbody>
</table>
<span id="methodology-userprefs" />
<h3>User Preferences</h3>
<p>The <code>travel_preferences</code> function was written to generate city recommendations based on how important it is to visit cafes, breweries, and museums. In the app, users are instructed to rate each location type on a scale of importance (e.g, <code>Not At All</code>, <code>Essential</code> , etc.). All the rating scales are custom-styled radio input groups where each radio input (i.e., choice) has a specific weight assigned to it. The least important choices are negatively weighted whereas more important choices are positively weighted. The <code>No Preference</code> choice is weighted as <code>0.1</code>. (Otherwise, the function would return cities in alphabetical order.) The choices and weights are listed in the following table.</p>
<table>
<thead>
<tr>
<th align="left">Scale</th>
<th align="center">Weight</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Not At All</td>
<td align="center">-5</td>
</tr>
<tr>
<td align="left">Tend to avoid</td>
<td align="center">-2</td>
</tr>
<tr>
<td align="left">No Preference</td>
<td align="center">0.1</td>
</tr>
<tr>
<td align="left">Tend to visit</td>
<td align="center">2</td>
</tr>
<tr>
<td align="left">Essential</td>
<td align="center">5</td>
</tr>
</tbody>
</table>
<p>The <a href="https://github.com/davidruvolo51/travel-app/blob/master/server/utils/travel_finder.R">function</a> has two input arguments: <code>weights</code> and <code>data</code>. The <code>weights</code> argument is a numeric array containing the user's preference for breweries, cafes, and museums (<code>-5</code>, <code>0.1</code>, <code>2</code>, etc.). The <code>data</code> input receives the post-filtered user preferences data. If the user has not applied the filters, then the complete user preferences dataset is passed into the function.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">travel_preferences <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>weights<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">#' Define a function that builds a blank user preferences object</span>
    new_prefs <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        data.frame<span class="token punctuation">(</span>
            id <span class="token operator">=</span> data<span class="token operator">$</span>id<span class="token punctuation">,</span>
            city <span class="token operator">=</span> data<span class="token operator">$</span>city<span class="token punctuation">,</span>
            country <span class="token operator">=</span> data<span class="token operator">$</span>country<span class="token punctuation">,</span>
            lat <span class="token operator">=</span> data<span class="token operator">$</span>lat<span class="token punctuation">,</span>
            lng <span class="token operator">=</span> data<span class="token operator">$</span>lng<span class="token punctuation">,</span>
            data<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">"brewery"</span><span class="token punctuation">,</span> <span class="token string">"cafe"</span><span class="token punctuation">,</span> <span class="token string">"museum"</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">0</span><span class="token punctuation">,</span>
            score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
            stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">#' Create Required Objects (weights, references, and preferences)</span>
    user_weights <span class="token operator">&lt;-</span> as.numeric<span class="token punctuation">(</span>weights<span class="token punctuation">)</span>
    refs <span class="token operator">&lt;-</span> as.matrix<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">"brewery"</span><span class="token punctuation">,</span> <span class="token string">"cafe"</span><span class="token punctuation">,</span> <span class="token string">"museum"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    prefs <span class="token operator">&lt;-</span> new_prefs<span class="token punctuation">(</span>data <span class="token operator">=</span> data<span class="token punctuation">)</span>

    <span class="token comment">#' Build a new score per city (weighted mean). I'm using my own</span>
    <span class="token comment">#' weighted means formula in case I want to use the subscores in</span>
    <span class="token comment">#' the app</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>d <span class="token keyword">in</span> seq_len<span class="token punctuation">(</span>NROW<span class="token punctuation">(</span>refs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        scores <span class="token operator">&lt;-</span> <span class="token punctuation">(</span>refs<span class="token punctuation">[</span>d<span class="token punctuation">,</span> <span class="token punctuation">]</span> <span class="token operator">*</span> user_weights<span class="token punctuation">)</span>
        prefs<span class="token punctuation">[</span>d<span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">"brewery"</span><span class="token punctuation">,</span> <span class="token string">"cafe"</span><span class="token punctuation">,</span> <span class="token string">"museum"</span><span class="token punctuation">,</span> <span class="token string">"score"</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> cbind<span class="token punctuation">(</span>
            rbind<span class="token punctuation">(</span>scores<span class="token punctuation">)</span><span class="token punctuation">,</span>
            score <span class="token operator">=</span> sum<span class="token punctuation">(</span>scores<span class="token punctuation">)</span> <span class="token operator">/</span> sum<span class="token punctuation">(</span>user_weights<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">#' Return</span>
    return<span class="token punctuation">(</span>prefs<span class="token punctuation">[</span>order<span class="token punctuation">(</span>prefs<span class="token operator">$</span>score<span class="token punctuation">,</span> decreasing <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<span id="methodology-application-development" />
<h3>Application Development</h3>
<p>This app demonstrates how to create a custom shiny app by incorporating non-R/non-shiny tools into the development process.  I wanted to show how to optimize apps for all browsers and devices, as well as design a custom UI that follows recommended web accessibility practices. To build this app, I incorporated a few of my favorite frontend development tools, JavaScript libraries, and some command line tools. These are listed below.</p>
<table>
<thead>
<tr>
<th align="left">Category</th>
<th align="left">Name</th>
<th align="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">ide</td>
<td align="left"><a href="https://code.visualstudio.com">vscode</a></td>
<td align="left">primary IDE for R, CSS, JavaScript; for R, I used <a href="https://github.com/randy3k/radian">radian</a> with the RLanguageServer and R LSP Client extensions</td>
</tr>
<tr>
<td align="left">cli</td>
<td align="left"><a href="https://www.npmjs.com">npm</a></td>
<td align="left">JavaScript package manager</td>
</tr>
<tr>
<td align="left">cli</td>
<td align="left"><a href="https://yarnpkg.com">yarn</a></td>
<td align="left">Javascript package manager; starting and building assets</td>
</tr>
<tr>
<td align="left">cli</td>
<td align="left"><a href="https://github.com/tmux/tmux">tmux</a></td>
<td align="left">a terminal mutiplexer for running multiple windows in a single view</td>
</tr>
<tr>
<td align="left">dev</td>
<td align="left"><a href="https://parceljs.org">parcel</a></td>
<td align="left">application bundler for integrating frontend tools in shiny application development process</td>
</tr>
<tr>
<td align="left">dev</td>
<td align="left"><a href="http://sass-lang.com">sass</a></td>
<td align="left">post-css module for writing css using variables, mixins, and more; output file is <code>www/css/styles.css</code></td>
</tr>
<tr>
<td align="left">dev</td>
<td align="left"><a href="https://github.com/postcss/autoprefixer">autoprefixer</a></td>
<td align="left">a plugin for adding vendor prefixes to css</td>
</tr>
<tr>
<td align="left">dev</td>
<td align="left"><a href="https://cssnano.co">cssnano</a></td>
<td align="left">a plugin for optimizing and minifying css files</td>
</tr>
<tr>
<td align="left">dev</td>
<td align="left"><a href="https://babeljs.io">babel.js</a></td>
<td align="left">a dev tool for optimizing and minifying javascript code; output file is <code>www/js/index.min.js</code></td>
</tr>
<tr>
<td align="left">viz</td>
<td align="left"><a href="https://d3js.org">d3</a></td>
<td align="left">javascript modules for creating web-based visualizations (used <code>d3v5</code>)</td>
</tr>
<tr>
<td align="left">viz</td>
<td align="left"><a href="https://github.com/topojson/topojson">topojson</a></td>
<td align="left">javascript modules for processing geodata for d3-based maps</td>
</tr>
<tr>
<td align="left">viz</td>
<td align="left"><a href="https://gist.githubusercontent.com/milafrerichs/69035da4707ea51886eb/raw/4cb1783c2904f52cbb8a258ee96031f9054d155b/eu.topojson">eu.topojson</a></td>
<td align="left">a topjson dataset containing all EU country boundaries</td>
</tr>
<tr>
<td align="left">viz</td>
<td align="left"><a href="http://mapbox.com">mapbox</a></td>
<td align="left">a WebGL API for developing vectorized maps in JavaScript</td>
</tr>
</tbody>
</table>
<p>See the <a href="https://github.com/davidruvolo51/travel-app/blob/master/README.md">README</a> for how to install these tools and run the development servers.</p>
<span id="limitations" />
<h3>Limitations</h3>
<p>There are a few limitations to the design and use of the app. </p>
<p>This data is based on cities that have specialty coffee cafes recommended by the <a href="https://europeancoffeetrip.com">European Coffee Trip</a>. This is in no way a comprehensive dataset of all European destinations. Over time, I may add more cities. I would also like to add restaurants and bakeries.</p>
<p>The most difficult aspect of this project was finding a comprehensive API for geocoding. I originally wrote the data sourcing scripts to use Google Places API. However, there were changes to their pricing tiers last year. After clicking the free trial ad to find out more, my daily limit was reduced to one request, and I could not continue until I submitted a valid form of payment. As a result, I was unable to use the Google Places API for building the brewery and museum datasets. Instead, I decided to use Open Street Maps. </p>
<p>Even though OSM is free, it comes with its own issues. Results were inconsistent since some places were categorized as ways instead of nodes, which made it more difficult to extract precise coordinates and information. Some locations did not have the right tags, and the combination of tags I used sometimes resulted in the exclusion of well-known places from the dataset. I often encountered issues where valid coordinates were returned with no other identifying information (e.g., names, address, location, etc.). It was not feasible to verify ~90k places manually, so I removed all places where I could not find a name or coordinates.</p>
<span id="conclusion" />
<h2>Conclusion</h2>
<p>I had a lot of fun—and consumed a lot of coffee—while developing this application. Custom shiny applications aren't impossible, but they do take some time to develop. However, the more you develop custom applications, the faster they are to build. </p>
<p>I enjoy having the flexibility and freedom that comes from not using a UI framework. Creating a layout like this using a typical UI layout system could be done, but it would involve overwritting a lot of pre-defined styles and behaviors in the UI framework. This may be more hassle in the long run, so it's a lot easier to start from scratch.</p>
<p>I hope this is useful as a shinyapp example—and maybe even helpful for planning your next holiday.</p></section></article></main><footer class="footer"><h2>shinyTutorials</h2><ul class="menu footer-menu" aria-label="site navigation"><li class="menu-item home-item"><a class="menu-link" data-live-page="home" href="/shinytutorials/"><svg class="icon menu-link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M570.24 247.41L512 199.52V104a8 8 0 0 0-8-8h-32a8 8 0 0 0-7.95 7.88v56.22L323.87 45a56.06 56.06 0 0 0-71.74 0L5.76 247.41a16 16 0 0 0-2 22.54L14 282.25a16 16 0 0 0 22.53 2L64 261.69V448a32.09 32.09 0 0 0 32 32h128a32.09 32.09 0 0 0 32-32V344h64v104a32.09 32.09 0 0 0 32 32h128a32.07 32.07 0 0 0 32-31.76V261.67l27.53 22.62a16 16 0 0 0 22.53-2L572.29 270a16 16 0 0 0-2.05-22.59zM463.85 432H368V328a32.09 32.09 0 0 0-32-32h-96a32.09 32.09 0 0 0-32 32v104h-96V222.27L288 77.65l176 144.56z"></path></svg>Home</a></li><li class="menu-item tutorials-item"><a class="menu-link" data-live-page="tutorials" href="/shinytutorials/tutorials">Tutorials</a></li><li class="menu-item gallery-item"><a class="menu-link" data-live-page="gallery" href="/shinytutorials/gallery">Gallery</a></li><li class="menu-item about-item"><a class="menu-link" data-live-page="about" href="/shinytutorials/about">About</a></li></ul><ul class="menu footer-menu"><li class="menu-item"><a class="menu-link" href="https://www.twitter.com/dcruvolo"><svg class="icon menu-link-icon" height="30" width="30" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg>@dcruvolo</a></li><li class="menu-item"><a class="menu-link" href="https://github.com/davidruvolo51/shinyAppTutorials"><svg class="icon menu-link-icon" height="30" width="30" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>shinyAppTutorials</a></li><li class="menu-item"><a class="menu-link" href="https://davidruvolo51.github.io/portfolio/"><svg class="icon" width="50" height="50" viewBox="0 0 50 40" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="user" transform="translate(11.280196, 6.000000)" stroke="currentColor" stroke-width="2" fill="currentColor"><path d="M27.1829506,38.463564 C27.1829506,31.1581236 23.1247009,23.3692614 18.2303544,21.0113097 C16.8720034,20.3568962 15.4135775,20 13.9041559,20 C12.4962651,20 11.1176019,20.3104979 9.81412773,20.8833092 C4.68481072,23.1373859 0.63453826,31.6314453 0.63453826,39.073266" id="body"></path><circle id="head" cx="13.7198041" cy="9" r="9"></circle></g></svg>My Portfolio</a></li></ul></footer></div></div><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/,/^(?:\/do\-not\-track\/me\/too\/)$/];
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-76117337-11',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-76117337-11', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/tutorials/shiny-contest-submission/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d6b499f79d1d2afcd9d2.js"],"component---src-components-tutorials-js":["/component---src-components-tutorials-js-4b86f7d7552ab3be180e.js"],"component---src-pages-404-js":["/component---src-pages-404-js-824884944ea898aa27b8.js"],"component---src-pages-about-js":["/component---src-pages-about-js-a5d49a5be766e11c187e.js"],"component---src-pages-gallery-index-js":["/component---src-pages-gallery-index-js-35c7997fd1a2498fdc61.js"],"component---src-pages-index-js":["/component---src-pages-index-js-9168983a5474f49d704a.js"],"component---src-pages-tutorials-index-js":["/component---src-pages-tutorials-index-js-da1d7a640252cbdc0b53.js"]};/*]]>*/</script><script src="/shinytutorials/component---src-components-tutorials-js-4b86f7d7552ab3be180e.js" async=""></script><script src="/shinytutorials/commons-58bcf0ded8b1dce23236.js" async=""></script><script src="/shinytutorials/styles-5b362900369830f2df37.js" async=""></script><script src="/shinytutorials/app-d6b499f79d1d2afcd9d2.js" async=""></script><script src="/shinytutorials/webpack-runtime-33091d2270196d99f570.js" async=""></script></body></html>