<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/shinytutorials/styles.778e8e112ec70b07731b.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2b2b2b}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#d4d0ab}.token.punctuation{color:#fefefe}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#abe338}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.important,.token.regex{color:gold}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:700}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:400}}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:url(/shinytutorials/static/open-sans-v17-latin-regular-5f4d4bc11d64b6cb605b7030c1997270.eot);src:local("Open Sans Regular"),local("OpenSans-Regular"),url(/shinytutorials/static/open-sans-v17-latin-regular-5f4d4bc11d64b6cb605b7030c1997270.eot?#iefix) format("embedded-opentype"),url(/shinytutorials/static/open-sans-v17-latin-regular-33543c5cc5d88f5695dd08c87d280dfd.woff2) format("woff2"),url(/shinytutorials/static/open-sans-v17-latin-regular-de0869e324680c99efa1250515b4b41c.woff) format("woff"),url(/shinytutorials/static/open-sans-v17-latin-regular-049a929c5d81988b3ae6d2f985ca7aa5.ttf) format("truetype"),url(/shinytutorials/static/open-sans-v17-latin-regular-7aab4c13671282c90669eb6a10357e41.svg#OpenSans) format("svg")}@font-face{font-family:Open Sans;font-style:normal;font-weight:600;src:url(/shinytutorials/static/open-sans-v17-latin-600-ddacaf4a9db58cda27c76ce88c408546.eot);src:local("Open Sans SemiBold"),local("OpenSans-SemiBold"),url(/shinytutorials/static/open-sans-v17-latin-600-ddacaf4a9db58cda27c76ce88c408546.eot?#iefix) format("embedded-opentype"),url(/shinytutorials/static/open-sans-v17-latin-600-819af3d3abdc9f135d49b80a91e2ff4c.woff2) format("woff2"),url(/shinytutorials/static/open-sans-v17-latin-600-449d681cd6006390e1bee3c3a660430b.woff) format("woff"),url(/shinytutorials/static/open-sans-v17-latin-600-8f7128145a3c2b83923552a328df7cdc.ttf) format("truetype"),url(/shinytutorials/static/open-sans-v17-latin-600-e16f375be3c2a73b58255a02f6d3a9ce.svg#OpenSans) format("svg")}body,html{padding:0;margin:0;font-family:Open Sans,Helvetica,sans-serif;cursor:default;font-size:15pt}article,aside,footer,header,main,nav{padding:0;margin:0;display:block}h1,h2,h3,h4,h5,h6{display:block;color:#2a2c32;line-height:1.3;padding:0;margin:0 0 6px}p{color:#3f454b;line-height:1.6;padding:0;margin:0 0 12px}ol li,ul li{margin:0;padding:0;line-height:1.7}ol li p,ul li p{padding:0;margin:0;line-height:1}ol li a,ul li a{padding:0;margin:0;line-height:1.5}li{color:#3f454b;line-height:1.3}a{color:#5177b8;text-decoration:none;box-shadow:0 2px 0 #5177b8}blockquote{line-height:1.3}input{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:90%;font-size:12pt;padding:8px 8px 8px 12px;border-radius:0;border:none;background-color:#f6f6f6;box-shadow:inset 0 2px 2px #d8d8d8}img,input{display:block}img{width:100%}:not(pre)>code{font-size:14pt}.icon{display:inline-block;width:20px;height:20px}.gatsby-highlight{margin:24px 0;font-size:12pt;overflow:auto}.gatsby-highlight pre{border-radius:6px}.gatsby-resp-image-link{box-shadow:none}button{display:block;border:none;background:none;cursor:pointer}.btn,.btn-link{display:block;padding:4px;margin:8px 0;font-size:14px;background-color:transparent;border-left:3px solid transparent;text-align:center}.btn-primary,.btn-secondary{text-transform:uppercase;letter-spacing:2px;font-weight:600;border-radius:3px;padding:6px 12px}.btn-primary{background-color:#5177b8;border:2px solid #5177b8;color:#fff;padding:8px 12px}.btn-primary:focus,.btn-primary:hover{background-color:transparent;border-color:#5177b8;color:#5177b8}.btn-secondary{background-color:transparent;border:2px solid #5177b8;color:#5177b8}.btn-secondary:focus,.btn-secondary:hover{background-color:#5177b8;color:#f6f6f6;border-color:#5177b8}.btn-keyword{font-size:12pt;padding:4px 6px;border-radius:6px}.btn-keyword:focus,.btn-keyword:hover{color:#5177b8;font-weight:600;text-decoration:underline}.btn-keyword.selected{background-color:#5177b8;color:#f6f6f6}.btn-centered{width:100px;margin:24px auto 0}.nav{position:fixed;top:0;left:0;width:100%;padding:6px 0;display:-ms-grid;display:grid;grid-template-columns:65% 35%;grid-template-areas:"brandLink menuBtn";column-gap:0;row-gap:0;background-color:#fff;box-shadow:0 2px 6px rgba(0,0,0,.18);z-index:15}.nav .nav-item{display:flex;align-items:center}.nav .brand-link{grid-area:brandLink;color:#5177b8;font-weight:600;font-size:14pt;letter-spacing:2px;padding:0 0 0 16px;box-shadow:none}.nav .brand-link .brand-link-icon path{fill:#5177b8}.nav .navigation{display:block;position:absolute;top:48px;width:1px;height:1px;clip:rect(0 0 0 0);clip:rect(0,0,0,0);padding:32px 0;background-color:#fff;z-index:14}.nav .navigation .menu-item{display:block;text-align:center}.nav .navigation .menu-item .menu-link{font-size:16pt;box-shadow:none}.nav .navigation.expanded{width:100%;height:auto;clip:auto;box-shadow:0 6px 6px rgba(0,0,0,.18)}.nav .menu-btns{justify-content:flex-end;grid-area:menuBtn}.nav .menu-btns .menu-button{margin:0}.nav .menu-btns .menu-button #menuBtn{margin-right:16px}@media (min-width:742px){.nav{grid-template-areas:"brandLink navLinks menuBtns";grid-template-columns:.75fr 3fr 1fr}.nav .brand-link{padding-bottom:0;grid-area:brandLink}.nav .navigation{position:static;display:flex;width:100%;grid-area:navLinks;box-shadow:none;margin-left:12px}.nav .navigation .menu-item{display:inline-block;width:auto;margin:0 24px 0 0}.nav .navigation .menu-item .menu-link{font-size:11pt}.nav .navigation .menu-item:last-child{margin-right:0}.nav .menu-btns{justify-content:flex-end;grid-area:menuBtns}.nav .menu-btns .menu-button{margin:0}.nav .menu-btns .menu-button#themeToggle{margin-right:24px}.nav .menu-btns .menu-item:not(.visible){display:none}}.menu{width:100%;margin:0 auto;list-style:none;padding:6px 0}.menu .menu-item{display:block;padding:0;margin:0 0 12px}.menu .menu-item .menu-link{position:relative;text-transform:uppercase;font-size:11pt;letter-spacing:2px;font-weight:600;color:#5177b8;padding-bottom:4px;border-bottom:2px solid transparent}.menu .menu-item .menu-link .menu-link-icon{position:relative;padding-right:6px;top:4px}.menu .menu-item .menu-link .menu-link-icon path{fill:#5177b8}.menu .menu-item .menu-link:hover{border-bottom-color:#5177b8}@media screen and (min-width:972px){.menu .menu-item{display:inline-block;margin:0 18px 0 0}}.footer{margin:0;padding:62px 0;background-color:#2a2c32}.footer h2{display:block;width:85%;margin:0 auto;padding-top:12px;color:#d8d8d8;letter-spacing:2.5px}.footer .menu{list-style:none;width:85%;margin:12px auto;padding:0}.footer .menu .menu-item{margin-right:24px}.footer .menu .menu-item .menu-link{color:#d8d8d8;box-shadow:none}.footer .menu .menu-item .menu-link .menu-link-icon path{fill:#d8d8d8}.footer .menu .menu-item .menu-link:hover{border-bottom-color:#d8d8d8}.post{padding:32px;border-radius:6px}.post .post-image{background-position:50%;background-size:cover;margin-bottom:12px}.post .post-title,.post .post-title-link{position:relative}.post .post-title{margin:0;padding:0}.post .post-title-link a{color:#2a2c32;box-shadow:0 1px 0 #3f454b}.post .post-status{position:relative;left:24px;top:-2px;font-size:11pt;text-transform:uppercase;font-weight:600;letter-spacing:2px;padding:3px 6px;border-radius:6px;background-color:#f6f6f6}.post .post-status[data-value=New]{background-color:rgba(81,119,184,.1);color:#5177b8}.post .post-status[data-value=Favorite],.post .post-status[data-value=Popular]{background-color:rgba(34,135,116,.1);color:#218573}.post .post-desc{padding:0;margin:0 0 6px;width:100%}.post .post-date{display:inline-block;color:#3f454b;font-size:11pt;font-family:consolas,courier,sans-serif;margin-right:12px}.post .post-tags{display:block;padding:0;margin:0 0 16px;list-style:none;color:#3f454b}.post .post-tags li{display:inline-block;margin-right:12px}.post .post-tags li .tag{border-radius:6px;font-size:11pt;padding:5px 10px;background-color:#f6f6f6;font-family:consolas,courier,sans-serif}.post .post-tags li .tag:before{content:"#"}.post .post-tags li:first-child{margin-left:0}.post .post-link{display:block;text-align:center;text-transform:uppercase;font-size:12pt;letter-spacing:2px;text-decoration:none;border-radius:4px;padding:6px 0;font-weight:600;box-shadow:none}.post .post-link:hover{text-decoration:underline}.post.post-feature{margin:16px auto;background-color:#fff}.post.post-feature .post-link{margin:0 auto;border:1px solid #5177b8;background-color:#5177b8;color:#fff}.post.post-plain{background-color:#fff;margin-bottom:16px}.post.post-plain .post-link{border:1px solid #5177b8}.post.post-plain .post-link:hover{background-color:#5177b8;color:#fff}.post.no-results-post{text-align:center}.post-form{padding:32px;border-radius:0 0 6px 6px;background-color:#fff;border-top:4px solid #5177b8;margin-bottom:16px}.post-form .input-label{display:block;padding:0;margin:0;font-size:18pt;color:#3f454b;font-weight:600}.post-form .input-example{line-height:1.5;padding:0;font-size:12pt;color:#3f454b;margin:0 0 12px}@media screen and (min-width:972px){.post{max-width:872px}.post.post-plain .post-link,.post.post-plain .post-tags{display:inline-flex;justify-content:center;align-items:center}.post.post-plain .post-link{width:125px;float:right}.post-form{max-width:872px}}.hero{width:100%;padding:44px 0;display:flex;position:relative;justify-content:center;align-items:center;background-color:#fff;overflow:hidden}.hero.hero-index .hero-content{width:90%;margin:0 auto;padding:72px 0;z-index:2}.hero.hero-index .hero-content .hero-title{font-size:21pt;letter-spacing:2.5px}.hero.hero-index .hero-content .hero-subtitle{font-weight:600;font-size:32pt;letter-spacing:2px;line-height:1.2}.hero.hero-index .hero-content .hero-image{display:block;width:300px;margin:44px auto;box-shadow:0 12px 3px -6px rgba(0,0,0,.18)}.hero.hero-text .hero-content{width:90%;margin:0 auto;padding:82px 0 0}.hero.hero-text .hero-content p{margin:0}.hero.hero-style-1{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNDQwcHgiIGhlaWdodD0iNjcxcHgiIHZpZXdCb3g9IjAgMCAxNDQwIDY3MSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTkuMSAoODYxNDQpIC0gaHR0cHM6Ly9za2V0Y2guY29tLS0+PHRpdGxlPmhlcm8tYmstZ3JheTwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9IkJhY2tncm91bmRzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBpZD0iaGVyby1iay1ncmF5LWNvcHkiIGZpbGw9IiM1MTc3YjgiIGZpbGwtb3BhY2l0eT0iMC4zIj48cGF0aCBkPSJNLTEuMjk5NjU0ODNlLTE0LDAgTDE0NDAsMCBDMTQ0MCw5NS45MTQ2OTE5IDE0NDAsMTg1Ljk3MzIwOCAxNDQwLDI3MC4xNzU1NDcgQzE0NDAsMzU0LjM3Nzg4NyAxNDQwLDQ3OS4zMTkzNzEgMTQ0MCw2NDUgQzEyODYuMzEwNjIsNTg3Ljc4MzUyNiAxMTI0LjkxNjc3LDU1MS45MDgyNTQgOTU1LjgxODQ0NSw1MzcuMzc0MTgzIEM3MDIuMTcwOTU5LDUxNS41NzMwNzYgNDU2Ljc1MDAwNiw3NDYuNzg4NDcxIDIxNi4yNzE0MTEsNjQ1IEM3MS41NDI5NDAxLDU4My43NDAxMjEgMC45MjI0ODU1MDIsNTA2LjI2ODcxIDEuMDM5NTg1MDhlLTEzLDQxMS42MzcxNzIgQy0wLjA2NjI0ODYzNzQsNDA0Ljg0MTE3MyAtMC4wNjYyNDg2Mzc0LDM5NC4yOTU0NDkgLTEuNTgxMzczOTJlLTE0LDM4MCBMLTEuMjk5NjU0ODNlLTE0LDAgWiIgaWQ9Imhlcm8tYmstZ3JheSIvPjwvZz48L2c+PC9zdmc+);background-size:cover;background-position:50% 100%;background-repeat:no-repeat}@media (min-width:972px){.hero.hero-index .hero-content,.hero.hero-text .hero-content{width:100%;max-width:972px}.hero.hero-index .hero-content .hero-image,.hero.hero-text .hero-content .hero-image{transform:scale(1.25)}}.flex{display:flex}.flex .flex-child{display:block;width:100%;height:auto}.flex.flex-30x70-layout,.flex.flex-33x3-layout,.flex.flex-50x2-layout{width:100%;flex-wrap:wrap}@media (min-width:812px){.flex.flex-30x70-layout .flex-child{display:inline-block}.flex.flex-30x70-layout .flex-child:nth-child(odd){width:30%}.flex.flex-30x70-layout .flex-child:nth-child(2n){width:70%}.flex.flex-33x3-layout .flex-child{display:inline-block;width:33%}.flex.flex-50x2-layout .flex-child{display:inline-block}.flex.flex-50x2-layout .flex-child:nth-child(2n),.flex.flex-50x2-layout .flex-child:nth-child(odd){width:50%}}.article-profile{display:inline-flex;justify-content:center;align-items:center;margin-top:12px}.article-profile .profile-img{width:40px;border-radius:50%}.article-profile .profile-name{font-size:12pt;margin-left:6px;color:#3f454b}.article-hero{padding-bottom:0}.article-hero h1{font-size:13pt;text-transform:uppercase;letter-spacing:2px}.article-hero h2{font-size:28pt}.article-hero .article-dates,.article-hero .article-readtime{margin:0;line-height:1.5;font-size:11pt;text-transform:uppercase;letter-spacing:2px;padding:0}.article-hero .article-dates time,.article-hero .article-readtime time{font-weight:400}.article-hero .article-readtime{color:#5177b8}.article{width:100%;padding:32px 0;border-radius:6px;background-color:#fff}.article .article-abstract,.article .article-body,.article .article-footer,.article .article-title{display:block;width:90%;margin:0 auto}.article .article-title{text-align:center}.article .article-abstract{color:#3f454b;line-height:1.6}.article .article-abstract :not(h2){color:#3f454b}.article .article-body h2{padding:0;margin:24px 0 0}.article .article-body a{color:#5177b8}.article .article-body blockquote{background-color:#f6f6f6;padding:12px;margin:44px 0;border-left:10px solid #5177b8}.article .article-body blockquote p{margin:0}.article .article-body table{margin:16px 0}.article .article-footer{border-top:1px solid #a3a6a8;margin-top:12px;padding-top:12px}.article .article-footer .article-tags{display:inline-block;padding:0;margin:0;list-style:none;color:#3f454b}.article .article-footer .article-tags li{display:inline-block;margin-right:12px}.article .article-footer .article-tags li .tag{border-radius:6px;font-size:11pt;padding:5px 10px;background-color:#f6f6f6;font-family:consolas,courier,sans-serif}.article .article-footer .article-tags li .tag:before{content:"#"}.article .article-footer .article-tags li:first-child{margin-left:0}.article-toc h2{font-size:21pt}.article-toc ol{font-size:13pt}.article-toc ol li{margin-bottom:12px}.article-toc ol li ol{margin-top:12px;list-style:upper-alpha}.article-toc ol li ol li{margin-bottom:6px}.article-toc ol li ol li ol{list-style:lower-roman}.article-toc ol li:last-child,.article-toc ol li ol li:last-child{margin-bottom:0}.article-toc ol a{box-shadow:none}.article-toc ol a :focus,.article-toc ol a:hover{box-shadow:0 2px 0 0 #5177b8}@media (min-width:972px){.article{max-width:812px}}.main{padding:0;min-height:60vh}.main .full-section{width:100%}.main .full-section .full-section-content,.main .main-section{width:90%;margin:0 auto}.main .main-section{padding:24px 0}.main .filled-section{padding:44px 0}.main .filled-section:not(.welcome-section){background-color:#f6f6f6}.main .filled-section:not(.welcome-section) p:not(.post-desc){text-align:center}.main .filled-section h2{text-align:center;text-transform:uppercase;letter-spacing:2px;padding:0;margin:0}.main .filled-section:last-child{margin-bottom:0}.main .filled-section.welcome-section p{max-width:812px;margin:0 auto}@media (min-width:972px){.main .full-section .full-section-content,.main .main-section{max-width:972px}}.sidebar-layout{display:flex;width:100%;flex-wrap:wrap}.sidebar-layout .sidebar-panel{position:static;padding-top:50px}.sidebar-layout .sidebar-panel .sidebar-content{background-color:#fff;margin:0 auto;padding:32px;border-radius:6px}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title{display:block;width:100%}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle{position:relative;margin:0;padding:0;font-size:18pt}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon{position:absolute;top:4px;margin-left:12px;transform:rotate(-45deg);transform-origin:center center;transition:all .3s ease-in-out}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon circle{fill:#f6f6f6}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon line{stroke:#5177b8}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon.rotated{transform:rotate(0)}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-caption{margin:0 0 12px;line-height:1.3;font-size:14pt}.sidebar-layout .sidebar-panel .sidebar-content .taglist{list-style:none;padding:0;margin:0 0 16px -6px}.sidebar-layout .sidebar-panel .sidebar-content .taglist .taglist-item{width:200px;padding:0 24px 0 0;margin-bottom:12px;cursor:pointer}.sidebar-layout .sidebar-panel .sidebar-content.expanded{position:absolute;width:1px;height:1px;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);overflow:hidden}.sidebar-layout .main-panel{padding-top:50px}.sidebar-layout .main-panel,.sidebar-layout .sidebar-panel{width:90%;margin:0 auto}@media (min-width:972px){.sidebar-layout .sidebar-panel{width:30%;max-width:500px;margin:0 auto;position:-webkit-sticky;position:sticky;top:62px;height:100%}.sidebar-layout .sidebar-panel .sidebar-content{width:70%;max-height:565px}.sidebar-layout .sidebar-panel .sidebar-content .scroll-container{box-sizing:content-box;padding:.7em 1em;margin:1em 0;max-height:430px;overflow-y:auto;box-shadow:inset 0 0 4px 1px rgba(0,0,0,.18)}.sidebar-layout .main-panel{width:70%}}#menuBtn{display:flex;justify-content:center;align-items:center;background-color:transparent}#menuBtn .menu-icon{display:block;margin:0 auto;position:relative}#menuBtn .menu-icon .menu-bar{display:block;height:3px;width:30px;border-radius:6px;margin-bottom:6px;background-color:#5177b8;transition:all .2s ease-in-out}#menuBtn .menu-icon .menu-bar:first-child{margin-top:2px}#menuBtn.open .menu-bar:first-child{opacity:0}#menuBtn.open .menu-bar:nth-child(2){transform:rotate(-45deg);transform-origin:center .5px;background-color:#5177b8}#menuBtn.open .menu-bar:nth-child(3){transform:rotate(45deg);transform-origin:24.85px -2.5px;background-color:#5177b8}#menuBtn.open .menu-label{color:#5177b8}.article table,.datatable{width:100%;margin:12px auto;font-weight:400;border-spacing:0;text-align:left;font-size:13pt}.article table caption,.datatable caption{text-align:left;font-size:16pt;margin:12px 0;color:#2a2c32;font-weight:600}.article table thead tr th,.datatable thead tr th{font-weight:600;text-transform:uppercase;letter-spacing:2px;font-size:11pt;padding:4px 12px;border-bottom:2px solid #2a2c32;color:#2a2c32}.article table tbody tr td,.datatable tbody tr td{padding:8px 12px}.article table tbody tr td .hidden-colname,.datatable tbody tr td .hidden-colname{display:none}.article table tbody tr:nth-child(2n),.datatable tbody tr:nth-child(2n){background-color:#f6f6f6}@media (max-width:892px){.datatable thead{display:none}.datatable tbody tr{display:block;margin-bottom:16px;counter-increment:rowCounter}.datatable tbody tr:nth-child(2n){background-color:transparent}.datatable tbody tr td{display:block;padding:6px 0 6px 6px;color:#3f454b}.datatable tbody tr td:first-child{font-size:16pt;color:#2a2c32}.datatable tbody tr td:first-child:before{content:counter(rowCounter) ".";display:inline-block;margin-right:4px;font-size:15pt}.datatable tbody tr td:not(:first-child){border-bottom:1px solid #f6f6f6}.datatable tbody tr td .hidden-colname{display:inline-block;width:150px}.datatable tbody tr td .hidden-colname:after{content:":"}.datatable-container{display:block;width:100%;overflow-x:scroll}}.visually-hidden{position:absolute;width:1px;height:1px;clip:rect(0 0 0 0);clip:rect(0,0,0,0);overflow:hidden}#theme-toggle-icon path{fill:#5177b8}.tutorial-index{padding:0 0 66px;background-color:#f6f6f6}.tutorial-index .tutorial-index-posts{padding:32px 0}.tutorial-index .tutorial-index-posts h2{padding-left:32px;margin-bottom:32px}.tutorial{padding:0 0 50px}.about-page,.tutorial{background-color:#f6f6f6}.about-page #repos .column-4,.about-page #repos .column-5,.about-page #repos .column-6,.about-page #repos thead th:nth-child(n+4){text-align:left}.privacy-page{background-color:#f6f6f6}@media (min-width:972px){.related-projects .post.post-feature,.tutorial-latest .post.post-feature{max-width:40%}.related-projects .post.post-feature:nth-child(odd),.tutorial-latest .post.post-feature:nth-child(odd){margin-right:32px}.tutorial-index .tutorial-index-posts{padding-top:82px}.about-page #repos .column-4,.about-page #repos .column-5,.about-page #repos .column-6,.about-page #repos thead th:nth-child(n+4){text-align:right}.gallery-page .post .post-link{width:250px}}body[data-theme=dark],body[data-theme=dark] h1,body[data-theme=dark] h2,body[data-theme=dark] h3,body[data-theme=dark] h4{color:#f6f6f6}body[data-theme=dark] p{color:#d8d8d8}body[data-theme=dark] a{color:#d8d8d8;text-decoration:none;box-shadow:0 2px 0 #f6f6f6}body[data-theme=dark] a.btn{box-shadow:none}body[data-theme=dark] ol li,body[data-theme=dark] ul li{color:#d8d8d8}body[data-theme=dark] :not(pre)>code[class*=language-],body[data-theme=dark] pre[class*=language-]{background:#13141b}body[data-theme=dark] .hero-image #dashboard rect#background{fill:#3f454b}body[data-theme=dark] .menu .menu-item .menu-link:hover{border-bottom-color:#f6f6f6}body[data-theme=dark] .nav{background-color:#2a2c32}body[data-theme=dark] .nav .nav-item{background-color:#2a2c32;color:#f6f6f6}body[data-theme=dark] .nav .navigation .menu-item .menu-link{color:#f6f6f6}body[data-theme=dark] .nav .menu-btns #themeToggle path,body[data-theme=dark] .nav .navigation .menu-item .menu-link .menu-link-icon path{fill:#f6f6f6}body[data-theme=dark] .nav .menu-btns #menuBtn .menu-icon .menu-bar{background-color:#f6f6f6}body[data-theme=dark] .hero{background-color:#2a2c32}body[data-theme=dark] .hero.article-hero,body[data-theme=dark] .hero.hero-text{position:relative;background-color:#2a2c32;overflow:hidden}body[data-theme=dark] .hero.article-hero:before,body[data-theme=dark] .hero.hero-text:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(81,119,184,.1);z-index:1}body[data-theme=dark] .hero.article-hero .hero-content .article-readtime,body[data-theme=dark] .hero.article-hero .hero-content .profile-name,body[data-theme=dark] .hero.hero-text .hero-content .article-readtime,body[data-theme=dark] .hero.hero-text .hero-content .profile-name{color:#d8d8d8}body[data-theme=dark] .main,body[data-theme=dark] .main .filled-section,body[data-theme=dark] .main .full-section,body[data-theme=dark] .main .main-section{background-color:#2a2c32}body[data-theme=dark] .post{background-color:#3f454b}body[data-theme=dark] .post h3 a{color:#d8d8d8}body[data-theme=dark] .post .post-date{color:#f6f6f6}body[data-theme=dark] .post .post-tags .tag{color:#2a2c32;background-color:#d8d8d8}body[data-theme=dark] .post .post-status[data-value=New]{background-color:#2a2c32;color:#d8d8d8}body[data-theme=dark] .post .post-status[data-value=Favorite],body[data-theme=dark] .post .post-status[data-value=Popular]{background-color:#218573;color:#f6f6f6}body[data-theme=dark] .tutorial-index{background-color:#2a2c32}body[data-theme=dark] .tutorial-index #reset,body[data-theme=dark] .tutorial-index .post.post-plain .post-link{background-color:#5177b8;color:#f6f6f6}body[data-theme=dark] .sidebar-layout{background-color:#2a2c32}body[data-theme=dark] .form,body[data-theme=dark] .sidebar-layout .sidebar-panel .sidebar-content{background-color:#3f454b}body[data-theme=dark] .form label,body[data-theme=dark] .form p{color:#d8d8d8}body[data-theme=dark] #search{background-color:#d8d8d8}body[data-theme=dark] .btn-keyword{color:#f6f6f6}body[data-theme=dark] .btn-keyword.selected,body[data-theme=dark] .btn-keyword:hover{border-left-color:#f6f6f6}body[data-theme=dark] .tutorial .sidebar-layout .sidebar-panel .sidebar-content{background-color:rgba(81,119,184,.1)}body[data-theme=dark] .tutorial .sidebar-layout .sidebar-panel .sidebar-content a{box-shadow:none}body[data-theme=dark] .tutorial .sidebar-layout .sidebar-panel .sidebar-content a:hover{box-shadow:0 2px 0 #d8d8d8}body[data-theme=dark] .tutorial .article{background-color:#2a2c32}body[data-theme=dark] .tutorial .article .article-abstract p,body[data-theme=dark] .tutorial .article a{color:#d8d8d8}body[data-theme=dark] .tutorial .article blockquote{background-color:#3f454b}body[data-theme=dark] .tutorial .article blockquote p{color:#f6f6f6}body[data-theme=dark] .tutorial .article .article-tags li code{background-color:#3f454b}body[data-theme=dark] .tutorial .article table{background-color:rgba(81,119,184,.1);padding:6px}body[data-theme=dark] .tutorial .article table thead tr th{color:#f6f6f6;border-bottom-color:#f6f6f6}body[data-theme=dark] .tutorial .article table tbody tr{background-color:transparent}body[data-theme=dark] .tutorial .article table tbody tr td{border-bottom:1px solid #a3a6a8}body[data-theme=dark] .tutorial .article table tbody tr:nth-child(2n){background-color:transparent}body[data-theme=dark] .tutorial .article table tbody tr:last-child td{border-bottom:none}body[data-theme=dark] .datatable{background-color:rgba(81,119,184,.1);padding:6px}body[data-theme=dark] .datatable thead tr th{color:#f6f6f6;border-bottom-color:#f6f6f6}body[data-theme=dark] .datatable tbody tr{background-color:transparent}body[data-theme=dark] .datatable tbody tr td{border-bottom:1px solid #a3a6a8;color:#f6f6f6}body[data-theme=dark] .datatable tbody tr td:last-child{border-bottom:none}body[data-theme=dark] .datatable tbody tr:nth-child(2n){background-color:transparent}@media (min-width:972px){body[data-theme=dark] .datatable tbody tr td:last-child{border-bottom:1px solid #a3a6a8}body[data-theme=dark] .datatable tbody tr:last-child td{border-bottom:none}}</style><meta name="generator" content="Gatsby 2.32.3"/><link rel="icon" href="/shinytutorials/favicon-32x32.png?v=a47592f83f89521a651df94e324b1d95" type="image/png"/><link rel="manifest" href="/shinytutorials/manifest.webmanifest" crossorigin="use-credentials"/><link rel="apple-touch-icon" sizes="48x48" href="/shinytutorials/icons/icon-48x48.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="72x72" href="/shinytutorials/icons/icon-72x72.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="96x96" href="/shinytutorials/icons/icon-96x96.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="144x144" href="/shinytutorials/icons/icon-144x144.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="192x192" href="/shinytutorials/icons/icon-192x192.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="256x256" href="/shinytutorials/icons/icon-256x256.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="384x384" href="/shinytutorials/icons/icon-384x384.png?v=a47592f83f89521a651df94e324b1d95"/><link rel="apple-touch-icon" sizes="512x512" href="/shinytutorials/icons/icon-512x512.png?v=a47592f83f89521a651df94e324b1d95"/><title data-react-helmet="true">shinyTutorials | Login Screen</title><meta data-react-helmet="true" name="description" content="Login Screen Building a Simple Password Protected Shiny App"/><meta data-react-helmet="true" property="og:title" content="Login Screen"/><meta data-react-helmet="true" property="og:description" content="Login Screen Building a Simple Password Protected Shiny App"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="dcruvolo"/><meta data-react-helmet="true" name="twitter:title" content="Login Screen"/><meta data-react-helmet="true" name="twitter:description" content="Login Screen Building a Simple Password Protected Shiny App"/><meta data-react-helmet="true" name="keywords" content="access-control"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="shinytutorials latest posts" href="/shinytutorials/rss.xml"/><link as="script" rel="preload" href="/shinytutorials/webpack-runtime-aa775fcdbf62117df72d.js"/><link as="script" rel="preload" href="/shinytutorials/app-af082cdb16f53309bbdd.js"/><link as="script" rel="preload" href="/shinytutorials/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/shinytutorials/commons-e415ca64c704e109fced.js"/><link as="script" rel="preload" href="/shinytutorials/ec800322c0f71b5715d75b0073f476a066af1f45-b3608908e1193b5aeda5.js"/><link as="script" rel="preload" href="/shinytutorials/component---src-components-tutorials-js-0547688c067af1285829.js"/><link as="fetch" rel="preload" href="/shinytutorials/page-data/tutorials/login-screen/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/shinytutorials/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/shinytutorials/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="nav" role="navigation"><a class="nav-item brand-link" href="/shinytutorials/">shinyTutorials</a><ul class="menu nav-item navigation "></ul><ul class="nav-item menu menu-btns"><li class="menu-item menu-button visible"><button id="themeToggle" class="menu-button"><span class="visually-hidden">toggle theme</span><svg id="theme-toggle-icon" class="icon theme-icon" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>toggle theme</title><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="light-bulb" fill="#000000"><path d="M11,11.8999819 C13.2822403,11.4367116 15,9.41895791 15,7 C15,4.23857625 12.7614237,2 10,2 C7.23857625,2 5,4.23857625 5,7 C5,9.41895791 6.71775968,11.4367116 9,11.8999819 L9,14 L11,14 L11,11.8999819 Z M13,13.3263688 C15.3649473,12.2029049 17,9.79239596 17,7 C17,3.13400675 13.8659932,0 10,0 C6.13400675,0 3,3.13400675 3,7 C3,9.79239596 4.63505267,12.2029049 7,13.3263688 L7,16 L13,16 L13,13.3263688 Z M7,17 L13,17 L13,18.5 C13,19.3284271 12.3349702,20 11.501424,20 L8.49857602,20 C7.67093534,20 7,19.3342028 7,18.5 L7,17 Z" id="Combined-Shape"></path></g></g></svg></button></li><li class="menu-item menu-button"><button id="menuBtn" class="" aria-expanded="false"><span class="visually-hidden">open or close menu</span><span class="menu-icon" aria-hidden="true"><span class="menu-bar"></span><span class="menu-bar"></span><span class="menu-bar"></span></span></button></li></ul></nav><header class="hero hero-index article-hero"><div class="hero-content"><h1 class="hero-title"></h1><h2 class="hero-subtitle"></h2><h1>Login Screen</h1><h2>Building a Simple Password Protected Shiny App</h2><p class="article-dates">Published: <time>2018-03-01</time></p><p class="article-dates">Updated: <time>2019-11-07</time></p><p class="article-readtime"><time>15</time> minute read</p><div class="article-profile"><img class="profile-img" src="/shinytutorials/static/dcruvolo-16a2e1e5e48ba95aed1c754fd7fd0d57.jpeg" alt="@dcruvolo"/><span class="profile-name">@dcruvolo</span></div></div></header><main id="main" class="main tutorial" aria-label="main content"><div class="sidebar-layout"><aside class="sidebar-panel article-toc"><section class="sidebar-content"><h2 class="sidebar-title">Contents</h2><div class="scroll-container">
<ol>
<li><a href="#about">Why would I need a login screen?</a></li>
<li>
<p><a href="#work">How does the login screen work?</a></p>
<ol>
<li>
<p><a href="#work-ui">Creating the UI Components</a></p>
<ol>
<li><a href="#work-ui-container">App Container</a></li>
<li><a href="#work-ui-signin">Sign-in page</a></li>
<li><a href="#work-ui-main">Main Page</a></li>
</ol>
</li>
<li><a href="#work-users">Building the user accounts dataset</a></li>
<li><a href="#work-server">Writing Server Logic</a></li>
<li><a href="#work-render">Render the UI based on sign-in status</a></li>
<li><a href="#work-signout">Sign out function</a></li>
</ol>
</li>
<li><a href="#further-thoughts">Further Thoughts</a></li>
<li><a href="#run">How do I run the app?</a></li>
</ol>
</div></section></aside><div class="main-panel tutorial-body"><article class="article"><section class="article-abstract"><h2>Overview</h2><p>In my app, I want to set up some sort of user authentication where certain groups can see some pages and some groups can see all pages. Can I do this in shiny? Yes! Here's how to do it.</p></section><section class="article-body">
<span id="about" />
<h2>Why would I need this?</h2>
<p>This shiny app was developed to figure out if there was a way to provide some sort of user access control for shiny applications. There are plenty of other methods and packages available (the <a href="https://github.com/PaulC91/shinyauthr">shinyauthr</a> package comes to mind); however, most projects that I work on require a specific design and brand. Rather editing existing approaches that may cause things to break, it's easier to build our own.</p>
<blockquote>
<p>I would use caution before implementing this method into any production app as there may be some unforeseen security issues (I'm not a security expert). If you have sensitive data, then you should follow guidelines and advice of your organization before developing any application.   </p>
</blockquote>
<span id="work" />
<h2>How does the app work?</h2>
<p>In this application we will focus on a few aspects. </p>
<ol>
<li>Creating the UI components</li>
<li>Building our user accounts dataset</li>
<li>Writing logic to process user inputs</li>
<li>Rendering the UI based on signin status (i.e., logged or not)</li>
<li>Signing users out.</li>
</ol>
<p>There's a lot to cover so let's get started!</p>
<span id="work-ui" />
<h3>Creating the UI components</h3>
<p>To create the ui, let's think about what we want to do.</p>
<ol>
<li><strong>Sign in page</strong>: We want a sign in page where users enter their account details. It might also be nice to provide some sort of user feedback (i.e., incorrect username, wrong password, invalid password, etc.).</li>
<li><strong>Main Page</strong>: If a user has successfully logged in, we want the app to display a message. Something like "Hello" and "Welcome, {username}" would be nice to display.</li>
<li><strong>App Container</strong>: Since we are rendering content based on whether or not a user is logged in, we will render our ui server-side. We will need to send it somewhere so we will create a generic output container.</li>
</ol>
<p>If you want more pages, you will need to create them and then load them accordingly (server side). For larger applications, I would recommend creating a separate R file for the sign in page and all other page as it's easier to manage as smaller components.</p>
<span id="work-ui-container" />
<h4>App Container</h4>
<p>The purpose of the app container is to receive ui that is rendered from the shiny server. In this example, it is based on whether or not the user is signed in. We will also use this opportunity to load in other files that our app will use i.e., any css and js files.</p>
<p>We will use the <code>tagList</code> function to create our UI. Feel free to use <code>fluidPage</code> or any other layout that you like as long as it is wrapped in the <code>tagList</code> function. The css file will be loaded into the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head">head</a> of our app <code>tags$head</code> using the <code>tags$link</code>. We will load the javascript file last before the closing <code>)</code> in <code>tagList</code> (if you are using js).</p>
<p>Here's what our app container looks like.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">ui <span class="token operator">&lt;-</span> tagList<span class="token punctuation">(</span>

    <span class="token comment"># &lt;head> &amp; &lt;link> css file</span>
    tags<span class="token operator">$</span>head<span class="token punctuation">(</span>
        tags<span class="token operator">$</span>link<span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">"text/css"</span><span class="token punctuation">,</span> rel<span class="token operator">=</span><span class="token string">"stylesheet"</span><span class="token punctuation">,</span> href<span class="token operator">=</span><span class="token string">"css/styles.css"</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment"># ui output</span>
    uiOutput<span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span>

    <span class="token comment"># load js</span>
    tags<span class="token operator">$</span>script<span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token punctuation">,</span> src<span class="token operator">=</span><span class="token string">"js/index.js"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<span id="work-ui-signin" />
<h4>Sign in page</h4>
<p>What do we want for the sign in page?</p>
<ul>
<li>Most importantly, we will need inputs for username and password. We will also need some labels to describe what each input is for. </li>
<li>Let's also add an action button as we want to run the sign in code only when the button is clicked. </li>
<li>It would be nice to add some form validation too so we will need some where to output messages (i.e., wrong username, fields are blank, incorrect details, etc.). </li>
</ul>
<p>This is list if pretty good, but how do we know what elements to use? Let's go through each item on our want list.</p>
<blockquote>
<p>Most importantly, we will need inputs for username and password. We will also need some labels to describe what each input is for. </p>
</blockquote>
<p>We will use the element <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input">input</a> for username and password. In shiny, this can be made using <code>tags$input</code>. There are different input types that we can use. In this example, we will use <code>type="text"</code> for the username and <code>type="password"</code> for the password input. To use the input in our shiny server, we will need to set an input id (e.g., <code>username</code> and <code>password</code>).</p>
<p>Using the label element must be included for each input. This provides an explanation for each input. This is important for individuals who use screen readers or other web assistive devices. </p>
<blockquote>
<p>Let's also add an action button as we want to run the sign in code only when the button is clicked. </p>
</blockquote>
<p>This is a simple one. We will create our own button using <code>tags$button</code>. Alternatively, you can <code>actionButton</code>. I think submit button would be more appropriate in this case as this follows good semantic html practices.</p>
<blockquote>
<p>It would be nice to add some form validation too so we will need some where to output messages (i.e., wrong username, fields are blank, incorrect details, etc.). </p>
</blockquote>
<p>In the frontend, this is fairly straightforward. After each input, we will create an element to send error messages from the server side. We will use the element <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/output">output</a> for this. When we start writing the logic for processing the user inputs, we will add an extra line at each step to send a message to the ui.</p>
<p>A couple of other notes. Since we are creating a sign in form, we will wrap everything in the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form">form</a> element. For following semantic html and for positioning our form, we will wrap the form in the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/main">main</a> element.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">signin <span class="token operator">&lt;-</span> tagList<span class="token punctuation">(</span>
    tags<span class="token operator">$</span>main<span class="token punctuation">(</span>class<span class="token operator">=</span><span class="token string">"main signin-screen"</span><span class="token punctuation">,</span>

        <span class="token comment"># create a form</span>
        tags<span class="token operator">$</span>form<span class="token punctuation">(</span>class<span class="token operator">=</span><span class="token string">"signin-form"</span><span class="token punctuation">,</span>

            <span class="token comment"># create a title for the form - </span>
            tags<span class="token operator">$</span>legend<span class="token punctuation">(</span><span class="token string">"Sign in to your account"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            tags<span class="token operator">$</span>output<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form_status"</span><span class="token punctuation">,</span> class<span class="token operator">=</span><span class="token string">"error-message"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

            <span class="token comment"># username input: &lt;label>, &lt;input>, &lt;output></span>
            tags<span class="token operator">$</span>label<span class="token punctuation">(</span>`<span class="token keyword">for</span>`<span class="token operator">=</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">"Enter your username"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            tags<span class="token operator">$</span>input<span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">"text"</span><span class="token punctuation">,</span> id<span class="token operator">=</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            tags<span class="token operator">$</span>output<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"user_status"</span><span class="token punctuation">,</span> class<span class="token operator">=</span><span class="token string">"error-message"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            
            <span class="token comment"># password input: &lt;label>, &lt;input></span>
            tags<span class="token operator">$</span>label<span class="token punctuation">(</span>`<span class="token keyword">for</span>`<span class="token operator">=</span><span class="token string">"password"</span><span class="token punctuation">,</span> <span class="token string">"Enter your password"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            tags<span class="token operator">$</span>input<span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">"password"</span><span class="token punctuation">,</span> id<span class="token operator">=</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

            <span class="token comment"># submit button</span>
            tags<span class="token operator">$</span>button<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"submit"</span><span class="token punctuation">,</span> type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token punctuation">,</span> <span class="token string">"Submit"</span><span class="token punctuation">,</span> class<span class="token operator">=</span><span class="token string">"action-button shiny-bound-input"</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<p>A few notes about the sign-in ui.</p>
<ol>
<li>For forms, <code>tags$legend</code> is required as is describes what the form is for. This is important for making shiny apps accessible.</li>
<li>I created my own input button, you can use <code>actionButtion(inputId="submit")</code> if you like. If you create your own button, you will need the following classes <code>action-button shiny-bound-input</code>.</li>
<li>All labels must be linked to the corresponding input. This can be done by using the <code>for</code> attribute and entering the id of the input the label describes.</li>
</ol>
<span id="work-ui-main" />
<h4>Main page</h4>
<p>For this example, I will create a simple ui component that greets the user and displays their name. I'll also add a button that will handle the sign out trigger the sign out function (more on that later). I won't spend as much time describing this ui as this is demonstration purposes only.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">main <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">{</span>
    tagList<span class="token punctuation">(</span>
        tags<span class="token operator">$</span>main<span class="token punctuation">(</span>class<span class="token operator">=</span><span class="token string">"main"</span><span class="token punctuation">,</span>
            tags<span class="token operator">$</span>header<span class="token punctuation">(</span>class<span class="token operator">=</span><span class="token string">"header"</span><span class="token punctuation">,</span>
                tags<span class="token operator">$</span>h1<span class="token punctuation">(</span><span class="token string">"Welcome,"</span><span class="token punctuation">,</span> tags<span class="token operator">$</span>span<span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"!"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                tags<span class="token operator">$</span>p<span class="token punctuation">(</span><span class="token string">"You are now signed in."</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                actionButton<span class="token punctuation">(</span>inputId<span class="token operator">=</span><span class="token string">"signout"</span><span class="token punctuation">,</span> <span class="token string">"Sign out"</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<span id="work-users" />
<h3>Building our user accounts dataset</h3>
<p>To build a user database, we will make a data.frame and populate it with a <code>username</code> column and a <code>password</code> column. We will assign it to the object <code>users</code> (you can use any name that you like). Each row will have one account. This example will use two example accounts: a standard user account and an admin account.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">users <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>
    <span class="token string">"username"</span> <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"password"</span> <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"user1234"</span><span class="token punctuation">,</span> <span class="token string">"admin1234"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span>
<span class="token punctuation">)</span></code></pre></div>
<p>Using the <a href="https://cran.r-project.org/web/packages/sodium/index.html">sodium</a> package, we can encrypt our passwords. We will use the functions <code>password_store</code> and <code>password_verify</code> for handling all password data. To encrypt user passwords using <code>password_store</code>, we must pass a single string at a time. We can use the function <code>sapply</code> to iterate over our passwords.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">users<span class="token operator">$</span>password <span class="token operator">&lt;-</span> sapply<span class="token punctuation">(</span>users<span class="token operator">$</span>password<span class="token punctuation">,</span> password_store<span class="token punctuation">)</span></code></pre></div>
<p>Save the data (with encrypted passwords) in an external file (<code>.rds</code> or <code>feather</code>). In the server, we will read this data in. In this example, I've kept the users object in the server code for ease of demonstration.</p>
<span id="work-server" />
<h3>Writing logic to process user inputs</h3>
<p>Perfect! We have our users database working. Now let's write our sign-in logic.</p>
<p>We will set two global reactive values: <code>username</code> and <code>logged</code>. The object <code>username</code>  will receive the username when the user successfully logged in. <code>logged</code> is a logical flag that determines if the user is signed in.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">server <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> output<span class="token punctuation">,</span> session<span class="token punctuation">)</span><span class="token punctuation">{</span>
    
    <span class="token comment"># source handlers</span>
    source<span class="token punctuation">(</span><span class="token string">"utils/server_01_handlers.R"</span><span class="token punctuation">,</span> local<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span>

    <span class="token comment"># define reactive values</span>
    username <span class="token operator">&lt;-</span> reactiveVal<span class="token punctuation">(</span><span class="token keyword">NA</span><span class="token punctuation">)</span>
    logged <span class="token operator">&lt;-</span> reactiveVal<span class="token punctuation">(</span><span class="token boolean">FALSE</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span></code></pre></div>
<p><strong>NOTE:</strong> I'm using a custom handlers here to send data to the ui (<code>innerHTML</code>). You do not need to use this method. This functions the same way as <code>shinyjs::html</code> but uses vanilla js as opposed to jQuery. See <code>index.js</code> for the corresponding javascript function and <code>utils/server_01_handlers.R</code> for more information. I won't cover them here. Checkout the <a href="../js-handlers">Creating Custom JavaScript Handlers tutorial</a> for more information.</p>
<p>In our sign-in logic, when the user input for username and password match, we will update the <code>logged</code> value to <code>TRUE</code> and send update the <code>username</code>. Let's focus on the logic.</p>
<p>Since we want our code to run with the form is submitted, we will wrap all of the logic in an <code>observeEvent</code>. For form validation, we want to return a few error messages. The messages will inform the user that there is an error with one or more of the input fields. We will send a message when -</p>
<ul>
<li>One or more fields are empty</li>
<li>When the username is incorrect (i.e., does not exist)</li>
<li>When the password is incorrect (i.e., does not match with the username)</li>
<li>When the username and password combination is incorrect</li>
</ul>
<p>Let's build the code step by step. </p>
<p>The first step in our code is to reset the form (i.e., remove error messages and error stylings).</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>submit<span class="token punctuation">,</span> <span class="token punctuation">{</span>

        <span class="token comment"># reset all form statuses</span>
        innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form_status"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
        innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"user_status"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
        innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"password_status"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
        removeCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-all"</span><span class="token punctuation">)</span>
        removeCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-usr"</span><span class="token punctuation">)</span>
        removeCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-pwd"</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p><strong>NOTE:</strong> Again, these are custom js handlers, see file <code>utils/server_01_handlers.js</code> for more information.</p>
<p>Next, we will create an object that we will reuse across the logic. This variable will return the row.index if the input for username exists. </p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>submit<span class="token punctuation">,</span> <span class="token punctuation">{</span>

        <span class="token comment"># reset all form statuses</span>
        innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form_status"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
        innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"user_status"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
        innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"password_status"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
        removeCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-all"</span><span class="token punctuation">)</span>
        removeCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-usr"</span><span class="token punctuation">)</span>
        removeCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-pwd"</span><span class="token punctuation">)</span>

        <span class="token comment"># search users for match this returns row.index</span>
        <span class="token comment"># use it to verify password via sodium's password_verify function</span>
        usr <span class="token operator">&lt;-</span> which<span class="token punctuation">(</span>users<span class="token operator">$</span>username <span class="token operator">==</span> input<span class="token operator">$</span>username<span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Using the <code>length</code> of <code>usr</code>, we can determine if the input is correct. We can use this logic to evaluate if the credentials are correct. We will write three primary conditions: one for if the inputs are blank, one for if the length of usr is true (i.e., username exists), and one for if the length of the usr is false (i.e., username doesn't exist). Let's start writing this out. The final <code>else</code> condition will return an error.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>submit<span class="token punctuation">,</span> <span class="token punctuation">{</span>

        <span class="token ellipsis">...</span>

        <span class="token comment"># search users for match this returns row.index</span>
        <span class="token comment"># use it to verify password via sodium's password_verify function</span>
        usr <span class="token operator">&lt;-</span> which<span class="token punctuation">(</span>users<span class="token operator">$</span>username <span class="token operator">==</span> input<span class="token operator">$</span>username<span class="token punctuation">)</span>

        <span class="token comment"># logic for form validation</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> input<span class="token operator">$</span>username <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">||</span> input<span class="token operator">$</span>password <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            
            <span class="token comment"># validate inputs and send error messasges</span>

        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> length<span class="token punctuation">(</span>usr<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment"># validate password</span>

        <span class="token punctuation">}</span>  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>length<span class="token punctuation">(</span>usr<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            
            <span class="token comment"># send error messagse</span>

        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            
            <span class="token comment"># fall back - send general error message and add css classes</span>
            innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form_status"</span><span class="token punctuation">,</span> <span class="token string">"The username or password is incorrect"</span><span class="token punctuation">)</span>
            addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-all"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Let's work through each condition.</p>
<p>In the first condition, we want to check which input field is missing and provide some feedback. The conditions that we can provide feedback are: when both inputs are missing, when only the username field is blank, and when the password field is blank.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token keyword">if</span><span class="token punctuation">(</span>input<span class="token operator">$</span>username <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">&amp;&amp;</span> input<span class="token operator">$</span>password <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token comment"># both inputs are blank</span>
    innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form_status"</span><span class="token punctuation">,</span><span class="token string">"Username and password is missing."</span><span class="token punctuation">)</span>
    addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-all"</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token operator">$</span>username <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>input<span class="token operator">$</span>password <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token comment"># username is blank</span>
    innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"user_status"</span><span class="token punctuation">,</span> <span class="token string">"Username is missing"</span><span class="token punctuation">)</span>
    addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-usr"</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>input<span class="token operator">$</span>username <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> input<span class="token operator">$</span>password <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment"># password is blank</span>
    innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"password_status"</span><span class="token punctuation">,</span><span class="token string">"No password was entered."</span><span class="token punctuation">)</span>
    addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-pwd"</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

    <span class="token comment"># fallback - something went wrong </span>
    innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form_status"</span><span class="token punctuation">,</span> <span class="token string">"Something went wrong. Please enter your details again."</span><span class="token punctuation">)</span>
    addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-all"</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span></code></pre></div>
<p>The functions <code>innerHTML</code> and <code>addCSS</code> are custom js handlers. The function <code>innerHTML</code> allows us to write text to the UI and the function <code>addCSS</code> adds a specifc css class to an element of our choice. In the css file <code>www/css/styles.css</code>, there are several corresponding class that add a red border around the input that has an error (i.e., <code>invalid-all</code>, <code>invalid-usr</code>, <code>invalid-pwd</code>).</p>
<p>If the inputs aren't empty, then we can validate the username. In the condtion <code>length(usr)</code>, we will validate the value from the password input. We will use the function <code>password_verify</code> from the <code>sodium</code> package to verify the value from the input <code>password</code>. This will return a logical value. If the value is true, that means the username and password are correct, and then we can update the reactive values (i.e., username and logged). If the value is <code>false</code>, then we will return an error message.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token comment"># validate password</span>
pwd <span class="token operator">&lt;-</span> password_verify<span class="token punctuation">(</span>users<span class="token operator">$</span>password<span class="token punctuation">[</span>usr<span class="token punctuation">]</span><span class="token punctuation">,</span> input<span class="token operator">$</span>password<span class="token punctuation">)</span>

<span class="token comment"># password logic</span>
<span class="token keyword">if</span><span class="token punctuation">(</span> pwd <span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token comment"># update reactive values</span>
    username<span class="token punctuation">(</span>input<span class="token operator">$</span>username<span class="token punctuation">)</span>
    logged<span class="token punctuation">(</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

    <span class="token comment"># display error message</span>
    innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"password_status"</span><span class="token punctuation">,</span> string<span class="token operator">=</span><span class="token string">"The password is incorrect."</span><span class="token punctuation">)</span>
    addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-pwd"</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span></code></pre></div>
<p>For the last condition <code>!length(usr)</code>, we will return an error messasge saying the username is incorrect. Let's put this all together.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>submit<span class="token punctuation">,</span> <span class="token punctuation">{</span>

    <span class="token comment"># reset all form statuses</span>
    innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form_status"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
    innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"user_status"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
    innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"password_status"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
    removeCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-all"</span><span class="token punctuation">)</span>
    removeCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-usr"</span><span class="token punctuation">)</span>
    removeCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-pwd"</span><span class="token punctuation">)</span>

    <span class="token comment"># search users for match this returns row.index</span>
    <span class="token comment"># use it to verify password via sodium's password_verify function</span>
    usr <span class="token operator">&lt;-</span> which<span class="token punctuation">(</span>users<span class="token operator">$</span>username <span class="token operator">==</span> input<span class="token operator">$</span>username<span class="token punctuation">)</span>
        
    <span class="token comment"># logic for form validation</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> input<span class="token operator">$</span>username <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">||</span> input<span class="token operator">$</span>password <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment"># further validate blank inputs</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>input<span class="token operator">$</span>username <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">&amp;&amp;</span> input<span class="token operator">$</span>password <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form_status"</span><span class="token punctuation">,</span><span class="token string">"Username and password is missing."</span><span class="token punctuation">)</span>
            addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-all"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token operator">$</span>username <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>input<span class="token operator">$</span>password <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"user_status"</span><span class="token punctuation">,</span> <span class="token string">"Username is missing"</span><span class="token punctuation">)</span>
            addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-usr"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>input<span class="token operator">$</span>username <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> input<span class="token operator">$</span>password <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"password_status"</span><span class="token punctuation">,</span><span class="token string">"No password was entered."</span><span class="token punctuation">)</span>
            addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-pwd"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form_status"</span><span class="token punctuation">,</span> <span class="token string">"Something went wrong. Please enter your details again."</span><span class="token punctuation">)</span>
            addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-all"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> length<span class="token punctuation">(</span>usr<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment"># validate password</span>
        pwd <span class="token operator">&lt;-</span> password_verify<span class="token punctuation">(</span>users<span class="token operator">$</span>password<span class="token punctuation">[</span>usr<span class="token punctuation">]</span><span class="token punctuation">,</span> input<span class="token operator">$</span>password<span class="token punctuation">)</span>

        <span class="token comment"># password logic</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> pwd <span class="token punctuation">)</span><span class="token punctuation">{</span>
            username<span class="token punctuation">(</span>input<span class="token operator">$</span>username<span class="token punctuation">)</span>
            logged<span class="token punctuation">(</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"password_status"</span><span class="token punctuation">,</span> string<span class="token operator">=</span><span class="token string">"The password is incorrect."</span><span class="token punctuation">)</span>
            addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-pwd"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>length<span class="token punctuation">(</span>usr<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"user_status"</span><span class="token punctuation">,</span> <span class="token string">"The username is incorrect"</span><span class="token punctuation">)</span>
        addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-usr"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        innerHTML<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form_status"</span><span class="token punctuation">,</span> <span class="token string">"The username or password is incorrect"</span><span class="token punctuation">)</span>
        addCSS<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"form"</span><span class="token punctuation">,</span> css<span class="token operator">=</span><span class="token string">"invalid-all"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>That's it, fairly straightforward. Now that we have the logic, let's render the content accordingly.</p>
<span id="work-render" />
<h3>Rendering the UI based on signin status</h3>
<p>Using the reactive object <code>logged</code>, we can render the main ui accordingly. By default, <code>logged</code> is set to <code>false</code>. When it's <code>false</code>, we want to display the sign-in page (ui component <code>signin</code>). When the user has signed in (i.e., <code>logged = true</code>), then we want to display the main page (the ui component <code>main</code>). We will define another observer that evaluates <code>logged</code>.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">observe<span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>logged<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        output<span class="token operator">$</span>app <span class="token operator">&lt;-</span> renderUI<span class="token punctuation">(</span>signin<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        output<span class="token operator">$</span>app <span class="token operator">&lt;-</span> renderUI<span class="token punctuation">(</span><span class="token punctuation">{</span>
            main<span class="token punctuation">(</span>username<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<span id="work-signout" />
<h3>Signing users out</h3>
<p>Lastly, we handle the event for when the user signs out. This is pretty easy as it's updating the value of <code>logged</code> to <code>false</code>.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>signout<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    logged<span class="token punctuation">(</span><span class="token boolean">FALSE</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>That's it! Run the app and try signing in with one of the accounts that we defined earlier. Try entering a random username and passwords to understand the form validation.</p>
<table>
<thead>
<tr>
<th align="left">username</th>
<th align="left">password</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">user</td>
<td align="left">user1234</td>
</tr>
<tr>
<td align="left">admin</td>
<td align="left">admin1234</td>
</tr>
</tbody>
</table>
<span id="further-thoughts">
<h2>Further Thoughts</h2>
<p>I didn't cover the css here as there would be a lot to cover and I wanted to focus more on the R code.</p>
<p>This method offers some sort of "protection" for your app. I've used this method to create a project management tool to manage daily activities and tasks. It was hosted on department servers and I added this login screen only those with an account could view it. If you have sensitive data, you should follow your organization's guidelines for best practices and security guidelines.  </p>
<p>More work is needed to improve the accessibility of our form and the error messages; sepecially, how to focus on error messages for those using screen readers. I'm still researching best practices. Check back for updates.</p>
<span id="run" />
<h2>How can I run this app?</h2>
<p>The source code is available on <a href="https://github.com/davidruvolo51/shinyAppTutorials/tree/master/Login-Screen">github</a>. Alternatively, you can run the demo in R using the following code. Use
one of the following accounts to login.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token comment"># Run in R/Rstudio</span>
install.packages<span class="token punctuation">(</span><span class="token string">"shiny"</span><span class="token punctuation">)</span>
shiny<span class="token operator">::</span>runGitHub<span class="token punctuation">(</span>repo<span class="token operator">=</span><span class="token string">"shinyAppTutorials"</span><span class="token punctuation">,</span> username<span class="token operator">=</span><span class="token string">"davidruvolo51"</span><span class="token punctuation">,</span> subdir<span class="token operator">=</span><span class="token string">"Login-Screen"</span><span class="token punctuation">)</span>

<span class="token comment"># sample accounts</span>
<span class="token operator">|</span> username <span class="token operator">|</span> password  <span class="token operator">|</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token operator">|</span> user     <span class="token operator">|</span> user1234  <span class="token operator">|</span>
<span class="token operator">|</span> admin    <span class="token operator">|</span> admin1234 <span class="token operator">|</span></code></pre></div></section><div class="article-footer"><p>Keywords</p><ul class="post-meta-tags article-tags" aria-label="post tags"><li><code class="tag tag-access-control">access-control</code></li></ul></div></article></div></div></main><footer class="footer"><h2>shinyTutorials</h2><ul class="menu footer-menu"><li class="menu-item"><a class="menu-link" href="/shinytutorials/privacy/">Privacy</a></li></ul><ul class="menu footer-menu"><li class="menu-item"><a class="menu-link" href="https://www.twitter.com/dcruvolo"><svg class="icon menu-link-icon" height="30" width="30" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg>@dcruvolo</a></li><li class="menu-item"><a class="menu-link" href="https://github.com/davidruvolo51/shinyAppTutorials"><svg class="icon menu-link-icon" height="30" width="30" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>shinyAppTutorials</a></li><li class="menu-item"><a class="menu-link" href="https://davidruvolo51.github.io/portfolio/"><svg class="icon" width="50" height="50" viewBox="0 0 50 40" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="user" transform="translate(11.280196, 6.000000)" stroke="currentColor" stroke-width="2" fill="currentColor"><path d="M27.1829506,38.463564 C27.1829506,31.1581236 23.1247009,23.3692614 18.2303544,21.0113097 C16.8720034,20.3568962 15.4135775,20 13.9041559,20 C12.4962651,20 11.1176019,20.3104979 9.81412773,20.8833092 C4.68481072,23.1373859 0.63453826,31.6314453 0.63453826,39.073266" id="body"></path><circle id="head" cx="13.7198041" cy="9" r="9"></circle></g></svg>My Portfolio</a></li></ul></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/,/^(?:\/do\-not\-track\/me\/too\/)$/];
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-76117337-11',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-76117337-11', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/tutorials/login-screen/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-262a2394611464d0ed6a.js"],"app":["/app-af082cdb16f53309bbdd.js"],"component---src-components-tutorials-js":["/component---src-components-tutorials-js-0547688c067af1285829.js"],"component---src-pages-404-js":["/component---src-pages-404-js-e90dfb9d534e7a568cc0.js"],"component---src-pages-about-js":["/component---src-pages-about-js-ea7f4459c93bb4b7df73.js"],"component---src-pages-gallery-index-js":["/component---src-pages-gallery-index-js-9381b15c4797798d57f6.js"],"component---src-pages-index-js":["/component---src-pages-index-js-068dd64f5761140d392c.js"],"component---src-pages-privacy-js":["/component---src-pages-privacy-js-a7161cb28316b522bae8.js"],"component---src-pages-tutorials-index-js":["/component---src-pages-tutorials-index-js-cff00fc3ab70cb445794.js"]};/*]]>*/</script><script src="/shinytutorials/polyfill-262a2394611464d0ed6a.js" nomodule=""></script><script src="/shinytutorials/component---src-components-tutorials-js-0547688c067af1285829.js" async=""></script><script src="/shinytutorials/ec800322c0f71b5715d75b0073f476a066af1f45-b3608908e1193b5aeda5.js" async=""></script><script src="/shinytutorials/commons-e415ca64c704e109fced.js" async=""></script><script src="/shinytutorials/styles-407fe62976dc5310c43e.js" async=""></script><script src="/shinytutorials/app-af082cdb16f53309bbdd.js" async=""></script><script src="/shinytutorials/webpack-runtime-aa775fcdbf62117df72d.js" async=""></script></body></html>