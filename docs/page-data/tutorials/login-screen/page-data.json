{"componentChunkName":"component---src-components-tutorials-js","path":"/tutorials/login-screen/","result":{"data":{"markdownRemark":{"html":"<h2>Contents</h2>\n<ol>\n<li><a href=\"#about\">Why would I need a login screen?</a></li>\n<li>\n<p><a href=\"#work\">How does the login screen work?</a></p>\n<ol>\n<li>\n<p><a href=\"#work-ui\">Creating the UI Components</a></p>\n<ol>\n<li><a href=\"#work-ui-container\">App Container</a></li>\n<li><a href=\"#work-ui-signin\">Sign-in page</a></li>\n<li><a href=\"#work-ui-main\">Main Page</a></li>\n</ol>\n</li>\n<li><a href=\"#work-users\">Building the user accounts dataset</a></li>\n<li><a href=\"#work-server\">Writing Server Logic</a></li>\n<li><a href=\"#work-render\">Render the UI based on sign-in status</a></li>\n<li><a href=\"#work-signout\">Sign out function</a></li>\n</ol>\n</li>\n<li><a href=\"#further-thoughts\">Further Thoughts</a></li>\n<li><a href=\"#run\">How do I run the app?</a></li>\n</ol>\n<!-- endexcerpt -->\n<span id=\"about\" />\n<h2>Why would I need this?</h2>\n<p>This shiny app was developed to figure out if there was a way to provide some sort of user access control for shiny applications. There are plenty of other methods and packages available (the <a href=\"https://github.com/PaulC91/shinyauthr\">shinyauthr</a> package comes to mind); however, most projects that I work on require a specific design and brand. Rather editing existing approaches that may cause things to break, it's easier to build our own.</p>\n<blockquote>\n<p>I would use caution before implementing this method into any production app as there may be some unforeseen security issues (I'm not a security expert). If you have sensitive data, then you should follow guidelines and advice of your organization before developing any application.   </p>\n</blockquote>\n<span id=\"work\" />\n<h2>How does the app work?</h2>\n<p>In this application we will focus on a few aspects. </p>\n<ol>\n<li>Creating the UI components</li>\n<li>Building our user accounts dataset</li>\n<li>Writing logic to process user inputs</li>\n<li>Rendering the UI based on signin status (i.e., logged or not)</li>\n<li>Signing users out.</li>\n</ol>\n<p>There's a lot to cover so let's get started!</p>\n<span id=\"work-ui\" />\n<h3>Creating the UI components</h3>\n<p>To create the ui, let's think about what we want to do.</p>\n<ol>\n<li><strong>Sign in page</strong>: We want a sign in page where users enter their account details. It might also be nice to provide some sort of user feedback (i.e., incorrect username, wrong password, invalid password, etc.).</li>\n<li><strong>Main Page</strong>: If a user has successfully logged in, we want the app to display a message. Something like \"Hello\" and \"Welcome, {username}\" would be nice to display.</li>\n<li><strong>App Container</strong>: Since we are rendering content based on whether or not a user is logged in, we will render our ui server-side. We will need to send it somewhere so we will create a generic output container.</li>\n</ol>\n<p>If you want more pages, you will need to create them and then load them accordingly (server side). For larger applications, I would recommend creating a separate R file for the sign in page and all other page as it's easier to manage as smaller components.</p>\n<span id=\"work-ui-container\" />\n<h4>App Container</h4>\n<p>The purpose of the app container is to receive ui that is rendered from the shiny server. In this example, it is based on whether or not the user is signed in. We will also use this opportunity to load in other files that our app will use i.e., any css and js files.</p>\n<p>We will use the <code>tagList</code> function to create our UI. Feel free to use <code>fluidPage</code> or any other layout that you like as long as it is wrapped in the <code>tagList</code> function. The css file will be loaded into the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head\">head</a> of our app <code>tags$head</code> using the <code>tags$link</code>. We will load the javascript file last before the closing <code>)</code> in <code>tagList</code> (if you are using js).</p>\n<p>Here's what our app container looks like.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">ui <span class=\"token operator\">&lt;-</span> tagList<span class=\"token punctuation\">(</span>\n\n    <span class=\"token comment\"># &lt;head> &amp; &lt;link> css file</span>\n    tags<span class=\"token operator\">$</span>head<span class=\"token punctuation\">(</span>\n        tags<span class=\"token operator\">$</span>link<span class=\"token punctuation\">(</span>type<span class=\"token operator\">=</span><span class=\"token string\">\"text/css\"</span><span class=\"token punctuation\">,</span> rel<span class=\"token operator\">=</span><span class=\"token string\">\"stylesheet\"</span><span class=\"token punctuation\">,</span> href<span class=\"token operator\">=</span><span class=\"token string\">\"css/styles.css\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\"># ui output</span>\n    uiOutput<span class=\"token punctuation\">(</span><span class=\"token string\">\"app\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># load js</span>\n    tags<span class=\"token operator\">$</span>script<span class=\"token punctuation\">(</span>type<span class=\"token operator\">=</span><span class=\"token string\">\"text/javascript\"</span><span class=\"token punctuation\">,</span> src<span class=\"token operator\">=</span><span class=\"token string\">\"js/index.js\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<span id=\"work-ui-signin\" />\n<h4>Sign in page</h4>\n<p>What do we want for the sign in page?</p>\n<ul>\n<li>Most importantly, we will need inputs for username and password. We will also need some labels to describe what each input is for. </li>\n<li>Let's also add an action button as we want to run the sign in code only when the button is clicked. </li>\n<li>It would be nice to add some form validation too so we will need some where to output messages (i.e., wrong username, fields are blank, incorrect details, etc.). </li>\n</ul>\n<p>This is list if pretty good, but how do we know what elements to use? Let's go through each item on our want list.</p>\n<blockquote>\n<p>Most importantly, we will need inputs for username and password. We will also need some labels to describe what each input is for. </p>\n</blockquote>\n<p>We will use the element <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input\">input</a> for username and password. In shiny, this can be made using <code>tags$input</code>. There are different input types that we can use. In this example, we will use <code>type=\"text\"</code> for the username and <code>type=\"password\"</code> for the password input. To use the input in our shiny server, we will need to set an input id (e.g., <code>username</code> and <code>password</code>).</p>\n<p>Using the label element must be included for each input. This provides an explanation for each input. This is important for individuals who use screen readers or other web assistive devices. </p>\n<blockquote>\n<p>Let's also add an action button as we want to run the sign in code only when the button is clicked. </p>\n</blockquote>\n<p>This is a simple one. We will create our own button using <code>tags$button</code>. Alternatively, you can <code>actionButton</code>. I think submit button would be more appropriate in this case as this follows good semantic html practices.</p>\n<blockquote>\n<p>It would be nice to add some form validation too so we will need some where to output messages (i.e., wrong username, fields are blank, incorrect details, etc.). </p>\n</blockquote>\n<p>In the frontend, this is fairly straightforward. After each input, we will create an element to send error messages from the server side. We will use the element <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/output\">output</a> for this. When we start writing the logic for processing the user inputs, we will add an extra line at each step to send a message to the ui.</p>\n<p>A couple of other notes. Since we are creating a sign in form, we will wrap everything in the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form\">form</a> element. For following semantic html and for positioning our form, we will wrap the form in the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/main\">main</a> element.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">signin <span class=\"token operator\">&lt;-</span> tagList<span class=\"token punctuation\">(</span>\n    tags<span class=\"token operator\">$</span>main<span class=\"token punctuation\">(</span>class<span class=\"token operator\">=</span><span class=\"token string\">\"main signin-screen\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\"># create a form</span>\n        tags<span class=\"token operator\">$</span>form<span class=\"token punctuation\">(</span>class<span class=\"token operator\">=</span><span class=\"token string\">\"signin-form\"</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token comment\"># create a title for the form - </span>\n            tags<span class=\"token operator\">$</span>legend<span class=\"token punctuation\">(</span><span class=\"token string\">\"Sign in to your account\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            tags<span class=\"token operator\">$</span>output<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form_status\"</span><span class=\"token punctuation\">,</span> class<span class=\"token operator\">=</span><span class=\"token string\">\"error-message\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token comment\"># username input: &lt;label>, &lt;input>, &lt;output></span>\n            tags<span class=\"token operator\">$</span>label<span class=\"token punctuation\">(</span>`<span class=\"token keyword\">for</span>`<span class=\"token operator\">=</span><span class=\"token string\">\"username\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Enter your username\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            tags<span class=\"token operator\">$</span>input<span class=\"token punctuation\">(</span>type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span> id<span class=\"token operator\">=</span><span class=\"token string\">\"username\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            tags<span class=\"token operator\">$</span>output<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"user_status\"</span><span class=\"token punctuation\">,</span> class<span class=\"token operator\">=</span><span class=\"token string\">\"error-message\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            \n            <span class=\"token comment\"># password input: &lt;label>, &lt;input></span>\n            tags<span class=\"token operator\">$</span>label<span class=\"token punctuation\">(</span>`<span class=\"token keyword\">for</span>`<span class=\"token operator\">=</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Enter your password\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            tags<span class=\"token operator\">$</span>input<span class=\"token punctuation\">(</span>type<span class=\"token operator\">=</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span> id<span class=\"token operator\">=</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token comment\"># submit button</span>\n            tags<span class=\"token operator\">$</span>button<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token punctuation\">,</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Submit\"</span><span class=\"token punctuation\">,</span> class<span class=\"token operator\">=</span><span class=\"token string\">\"action-button shiny-bound-input\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>A few notes about the sign-in ui.</p>\n<ol>\n<li>For forms, <code>tags$legend</code> is required as is describes what the form is for. This is important for making shiny apps accessible.</li>\n<li>I created my own input button, you can use <code>actionButtion(inputId=\"submit\")</code> if you like. If you create your own button, you will need the following classes <code>action-button shiny-bound-input</code>.</li>\n<li>All labels must be linked to the corresponding input. This can be done by using the <code>for</code> attribute and entering the id of the input the label describes.</li>\n</ol>\n<span id=\"work-ui-main\" />\n<h4>Main page</h4>\n<p>For this example, I will create a simple ui component that greets the user and displays their name. I'll also add a button that will handle the sign out trigger the sign out function (more on that later). I won't spend as much time describing this ui as this is demonstration purposes only.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">main <span class=\"token operator\">&lt;-</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    tagList<span class=\"token punctuation\">(</span>\n        tags<span class=\"token operator\">$</span>main<span class=\"token punctuation\">(</span>class<span class=\"token operator\">=</span><span class=\"token string\">\"main\"</span><span class=\"token punctuation\">,</span>\n            tags<span class=\"token operator\">$</span>header<span class=\"token punctuation\">(</span>class<span class=\"token operator\">=</span><span class=\"token string\">\"header\"</span><span class=\"token punctuation\">,</span>\n                tags<span class=\"token operator\">$</span>h1<span class=\"token punctuation\">(</span><span class=\"token string\">\"Welcome,\"</span><span class=\"token punctuation\">,</span> tags<span class=\"token operator\">$</span>span<span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                tags<span class=\"token operator\">$</span>p<span class=\"token punctuation\">(</span><span class=\"token string\">\"You are now signed in.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                actionButton<span class=\"token punctuation\">(</span>inputId<span class=\"token operator\">=</span><span class=\"token string\">\"signout\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Sign out\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<span id=\"work-users\" />\n<h3>Building our user accounts dataset</h3>\n<p>To build a user database, we will make a data.frame and populate it with a <code>username</code> column and a <code>password</code> column. We will assign it to the object <code>users</code> (you can use any name that you like). Each row will have one account. This example will use two example accounts: a standard user account and an admin account.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">users <span class=\"token operator\">&lt;-</span> data.frame<span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"username\"</span> <span class=\"token operator\">=</span> c<span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"admin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"password\"</span> <span class=\"token operator\">=</span> c<span class=\"token punctuation\">(</span><span class=\"token string\">\"user1234\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"admin1234\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    stringsAsFactors <span class=\"token operator\">=</span> <span class=\"token boolean\">FALSE</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Using the <a href=\"https://cran.r-project.org/web/packages/sodium/index.html\">sodium</a> package, we can encrypt our passwords. We will use the functions <code>password_store</code> and <code>password_verify</code> for handling all password data. To encrypt user passwords using <code>password_store</code>, we must pass a single string at a time. We can use the function <code>sapply</code> to iterate over our passwords.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">users<span class=\"token operator\">$</span>password <span class=\"token operator\">&lt;-</span> sapply<span class=\"token punctuation\">(</span>users<span class=\"token operator\">$</span>password<span class=\"token punctuation\">,</span> password_store<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Save the data (with encrypted passwords) in an external file (<code>.rds</code> or <code>feather</code>). In the server, we will read this data in. In this example, I've kept the users object in the server code for ease of demonstration.</p>\n<span id=\"work-server\" />\n<h3>Writing logic to process user inputs</h3>\n<p>Perfect! We have our users database working. Now let's write our sign-in logic.</p>\n<p>We will set two global reactive values: <code>username</code> and <code>logged</code>. The object <code>username</code>  will receive the username when the user successfully logged in. <code>logged</code> is a logical flag that determines if the user is signed in.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">server <span class=\"token operator\">&lt;-</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">,</span> output<span class=\"token punctuation\">,</span> session<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    \n    <span class=\"token comment\"># source handlers</span>\n    source<span class=\"token punctuation\">(</span><span class=\"token string\">\"utils/server_01_handlers.R\"</span><span class=\"token punctuation\">,</span> local<span class=\"token operator\">=</span><span class=\"token boolean\">TRUE</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># define reactive values</span>\n    username <span class=\"token operator\">&lt;-</span> reactiveVal<span class=\"token punctuation\">(</span><span class=\"token keyword\">NA</span><span class=\"token punctuation\">)</span>\n    logged <span class=\"token operator\">&lt;-</span> reactiveVal<span class=\"token punctuation\">(</span><span class=\"token boolean\">FALSE</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>NOTE:</strong> I'm using a custom handlers here to send data to the ui (<code>innerHTML</code>). You do not need to use this method. This functions the same way as <code>shinyjs::html</code> but uses vanilla js as opposed to jQuery. See <code>index.js</code> for the corresponding javascript function and <code>utils/server_01_handlers.R</code> for more information. I won't cover them here. Checkout the <a href=\"../js-handlers\">Creating Custom JavaScript Handlers tutorial</a> for more information.</p>\n<p>In our sign-in logic, when the user input for username and password match, we will update the <code>logged</code> value to <code>TRUE</code> and send update the <code>username</code>. Let's focus on the logic.</p>\n<p>Since we want our code to run with the form is submitted, we will wrap all of the logic in an <code>observeEvent</code>. For form validation, we want to return a few error messages. The messages will inform the user that there is an error with one or more of the input fields. We will send a message when -</p>\n<ul>\n<li>One or more fields are empty</li>\n<li>When the username is incorrect (i.e., does not exist)</li>\n<li>When the password is incorrect (i.e., does not match with the username)</li>\n<li>When the username and password combination is incorrect</li>\n</ul>\n<p>Let's build the code step by step. </p>\n<p>The first step in our code is to reset the form (i.e., remove error messages and error stylings).</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">observeEvent<span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>submit<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\"># reset all form statuses</span>\n        innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n        innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"user_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n        innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"password_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n        removeCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-all\"</span><span class=\"token punctuation\">)</span>\n        removeCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-usr\"</span><span class=\"token punctuation\">)</span>\n        removeCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-pwd\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>NOTE:</strong> Again, these are custom js handlers, see file <code>utils/server_01_handlers.js</code> for more information.</p>\n<p>Next, we will create an object that we will reuse across the logic. This variable will return the row.index if the input for username exists. </p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">observeEvent<span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>submit<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\"># reset all form statuses</span>\n        innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n        innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"user_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n        innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"password_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n        removeCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-all\"</span><span class=\"token punctuation\">)</span>\n        removeCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-usr\"</span><span class=\"token punctuation\">)</span>\n        removeCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-pwd\"</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># search users for match this returns row.index</span>\n        <span class=\"token comment\"># use it to verify password via sodium's password_verify function</span>\n        usr <span class=\"token operator\">&lt;-</span> which<span class=\"token punctuation\">(</span>users<span class=\"token operator\">$</span>username <span class=\"token operator\">==</span> input<span class=\"token operator\">$</span>username<span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Using the <code>length</code> of <code>usr</code>, we can determine if the input is correct. We can use this logic to evaluate if the credentials are correct. We will write three primary conditions: one for if the inputs are blank, one for if the length of usr is true (i.e., username exists), and one for if the length of the usr is false (i.e., username doesn't exist). Let's start writing this out. The final <code>else</code> condition will return an error.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">observeEvent<span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>submit<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token ellipsis\">...</span>\n\n        <span class=\"token comment\"># search users for match this returns row.index</span>\n        <span class=\"token comment\"># use it to verify password via sodium's password_verify function</span>\n        usr <span class=\"token operator\">&lt;-</span> which<span class=\"token punctuation\">(</span>users<span class=\"token operator\">$</span>username <span class=\"token operator\">==</span> input<span class=\"token operator\">$</span>username<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># logic for form validation</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> input<span class=\"token operator\">$</span>username <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">||</span> input<span class=\"token operator\">$</span>password <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            \n            <span class=\"token comment\"># validate inputs and send error messasges</span>\n\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> length<span class=\"token punctuation\">(</span>usr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n            <span class=\"token comment\"># validate password</span>\n\n        <span class=\"token punctuation\">}</span>  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">!</span>length<span class=\"token punctuation\">(</span>usr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            \n            <span class=\"token comment\"># send error messagse</span>\n\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            \n            <span class=\"token comment\"># fall back - send general error message and add css classes</span>\n            innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"The username or password is incorrect\"</span><span class=\"token punctuation\">)</span>\n            addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-all\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Let's work through each condition.</p>\n<p>In the first condition, we want to check which input field is missing and provide some feedback. The conditions that we can provide feedback are: when both inputs are missing, when only the username field is blank, and when the password field is blank.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>username <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">&amp;&amp;</span> input<span class=\"token operator\">$</span>password <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\"># both inputs are blank</span>\n    innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form_status\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"Username and password is missing.\"</span><span class=\"token punctuation\">)</span>\n    addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-all\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>username <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>password <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\"># username is blank</span>\n    innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"user_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Username is missing\"</span><span class=\"token punctuation\">)</span>\n    addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-usr\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>username <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> input<span class=\"token operator\">$</span>password <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\"># password is blank</span>\n    innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"password_status\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"No password was entered.\"</span><span class=\"token punctuation\">)</span>\n    addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-pwd\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\"># fallback - something went wrong </span>\n    innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Something went wrong. Please enter your details again.\"</span><span class=\"token punctuation\">)</span>\n    addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-all\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The functions <code>innerHTML</code> and <code>addCSS</code> are custom js handlers. The function <code>innerHTML</code> allows us to write text to the UI and the function <code>addCSS</code> adds a specifc css class to an element of our choice. In the css file <code>www/css/styles.css</code>, there are several corresponding class that add a red border around the input that has an error (i.e., <code>invalid-all</code>, <code>invalid-usr</code>, <code>invalid-pwd</code>).</p>\n<p>If the inputs aren't empty, then we can validate the username. In the condtion <code>length(usr)</code>, we will validate the value from the password input. We will use the function <code>password_verify</code> from the <code>sodium</code> package to verify the value from the input <code>password</code>. This will return a logical value. If the value is true, that means the username and password are correct, and then we can update the reactive values (i.e., username and logged). If the value is <code>false</code>, then we will return an error message.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># validate password</span>\npwd <span class=\"token operator\">&lt;-</span> password_verify<span class=\"token punctuation\">(</span>users<span class=\"token operator\">$</span>password<span class=\"token punctuation\">[</span>usr<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> input<span class=\"token operator\">$</span>password<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># password logic</span>\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> pwd <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\"># update reactive values</span>\n    username<span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>username<span class=\"token punctuation\">)</span>\n    logged<span class=\"token punctuation\">(</span><span class=\"token boolean\">TRUE</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\"># display error message</span>\n    innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"password_status\"</span><span class=\"token punctuation\">,</span> string<span class=\"token operator\">=</span><span class=\"token string\">\"The password is incorrect.\"</span><span class=\"token punctuation\">)</span>\n    addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-pwd\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>For the last condition <code>!length(usr)</code>, we will return an error messasge saying the username is incorrect. Let's put this all together.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">observeEvent<span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>submit<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\"># reset all form statuses</span>\n    innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n    innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"user_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n    innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"password_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n    removeCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-all\"</span><span class=\"token punctuation\">)</span>\n    removeCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-usr\"</span><span class=\"token punctuation\">)</span>\n    removeCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-pwd\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># search users for match this returns row.index</span>\n    <span class=\"token comment\"># use it to verify password via sodium's password_verify function</span>\n    usr <span class=\"token operator\">&lt;-</span> which<span class=\"token punctuation\">(</span>users<span class=\"token operator\">$</span>username <span class=\"token operator\">==</span> input<span class=\"token operator\">$</span>username<span class=\"token punctuation\">)</span>\n        \n    <span class=\"token comment\"># logic for form validation</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> input<span class=\"token operator\">$</span>username <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">||</span> input<span class=\"token operator\">$</span>password <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\"># further validate blank inputs</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>username <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">&amp;&amp;</span> input<span class=\"token operator\">$</span>password <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form_status\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"Username and password is missing.\"</span><span class=\"token punctuation\">)</span>\n            addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-all\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>username <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>password <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"user_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Username is missing\"</span><span class=\"token punctuation\">)</span>\n            addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-usr\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>username <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> input<span class=\"token operator\">$</span>password <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"password_status\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"No password was entered.\"</span><span class=\"token punctuation\">)</span>\n            addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-pwd\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Something went wrong. Please enter your details again.\"</span><span class=\"token punctuation\">)</span>\n            addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-all\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> length<span class=\"token punctuation\">(</span>usr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\"># validate password</span>\n        pwd <span class=\"token operator\">&lt;-</span> password_verify<span class=\"token punctuation\">(</span>users<span class=\"token operator\">$</span>password<span class=\"token punctuation\">[</span>usr<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> input<span class=\"token operator\">$</span>password<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># password logic</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> pwd <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            username<span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>username<span class=\"token punctuation\">)</span>\n            logged<span class=\"token punctuation\">(</span><span class=\"token boolean\">TRUE</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"password_status\"</span><span class=\"token punctuation\">,</span> string<span class=\"token operator\">=</span><span class=\"token string\">\"The password is incorrect.\"</span><span class=\"token punctuation\">)</span>\n            addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-pwd\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">!</span>length<span class=\"token punctuation\">(</span>usr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"user_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"The username is incorrect\"</span><span class=\"token punctuation\">)</span>\n        addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-usr\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        innerHTML<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form_status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"The username or password is incorrect\"</span><span class=\"token punctuation\">)</span>\n        addCSS<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">,</span> css<span class=\"token operator\">=</span><span class=\"token string\">\"invalid-all\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>That's it, fairly straightforward. Now that we have the logic, let's render the content accordingly.</p>\n<span id=\"work-render\" />\n<h3>Rendering the UI based on signin status</h3>\n<p>Using the reactive object <code>logged</code>, we can render the main ui accordingly. By default, <code>logged</code> is set to <code>false</code>. When it's <code>false</code>, we want to display the sign-in page (ui component <code>signin</code>). When the user has signed in (i.e., <code>logged = true</code>), then we want to display the main page (the ui component <code>main</code>). We will define another observer that evaluates <code>logged</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">observe<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">!</span>logged<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        output<span class=\"token operator\">$</span>app <span class=\"token operator\">&lt;-</span> renderUI<span class=\"token punctuation\">(</span>signin<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        output<span class=\"token operator\">$</span>app <span class=\"token operator\">&lt;-</span> renderUI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            main<span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<span id=\"work-signout\" />\n<h3>Signing users out</h3>\n<p>Lastly, we handle the event for when the user signs out. This is pretty easy as it's updating the value of <code>logged</code> to <code>false</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">observeEvent<span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>signout<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    logged<span class=\"token punctuation\">(</span><span class=\"token boolean\">FALSE</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>That's it! Run the app and try signing in with one of the accounts that we defined earlier. Try entering a random username and passwords to understand the form validation.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">username</th>\n<th align=\"left\">password</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">user</td>\n<td align=\"left\">user1234</td>\n</tr>\n<tr>\n<td align=\"left\">admin</td>\n<td align=\"left\">admin1234</td>\n</tr>\n</tbody>\n</table>\n<span id=\"further-thoughts\">\n<h2>Further Thoughts</h2>\n<p>I didn't cover the css here as there would be a lot to cover and I wanted to focus more on the R code.</p>\n<p>This method offers some sort of \"protection\" for your app. I've used this method to create a project management tool to manage daily activities and tasks. It was hosted on department servers and I added this login screen only those with an account could view it. If you have sensitive data, you should follow your organization's guidelines for best practices and security guidelines.  </p>\n<p>More work is needed to improve the accessibility of our form and the error messages; sepecially, how to focus on error messages for those using screen readers. I'm still researching best practices. Check back for updates.</p>\n<span id=\"run\" />\n<h2>How can I run this app?</h2>\n<p>The source code is available on <a href=\"https://github.com/davidruvolo51/shinyAppTutorials/tree/master/Login-Screen\">github</a>. Alternatively, you can run the demo in R using the following code. Use\none of the following accounts to login.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Run in R/Rstudio</span>\ninstall.packages<span class=\"token punctuation\">(</span><span class=\"token string\">\"shiny\"</span><span class=\"token punctuation\">)</span>\nshiny<span class=\"token operator\">::</span>runGitHub<span class=\"token punctuation\">(</span>repo<span class=\"token operator\">=</span><span class=\"token string\">\"shinyAppTutorials\"</span><span class=\"token punctuation\">,</span> username<span class=\"token operator\">=</span><span class=\"token string\">\"davidruvolo51\"</span><span class=\"token punctuation\">,</span> subdir<span class=\"token operator\">=</span><span class=\"token string\">\"Login-Screen\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># sample accounts</span>\n<span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span>\n<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>\n<span class=\"token operator\">|</span> user     <span class=\"token operator\">|</span> user1234  <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> admin1234 <span class=\"token operator\">|</span></code></pre></div>","frontmatter":{"title":"Login Screen","subtitle":"Building a Simple Password Protected Shiny App","abstract":"In my app, I want to set up some sort of user authentication where certain groups can see some pages and some groups can see all pages. Can I do this in shiny? Yes! Here's how to do it.","date":"2018-03-01","updated":"2019-11-07","keywords":["access-control"]},"fields":{"readingTime":{"minutes":14.41}}}},"pageContext":{"slug":"/tutorials/login-screen/"}}}