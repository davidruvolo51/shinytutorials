{"componentChunkName":"component---src-components-tutorials-js","path":"/tutorials/rmarkdown-shiny/","result":{"data":{"markdownRemark":{"html":"<h2>Contents</h2>\n<ol>\n<li><a href=\"#about\">Why would I need this?</a></li>\n<li>\n<p><a href=\"#work\">How do I get this working?</a></p>\n<ol>\n<li><a href=\"#work-ui\">Preparing the UI</a></li>\n<li><a href=\"#work-template\">Drafting your Rmarkdown template as a parameterized report</a></li>\n<li><a href=\"#work-render\">Rending the template server-side</a></li>\n</ol>\n</li>\n<li><a href=\"#further-thoughts\">Further Thoughts</a></li>\n<li><a href=\"#run\">How do I run the example?</a></li>\n</ol>\n<!-- endexcerpt -->\n<p><span id=\"about\"></span></p>\n<h2>Why would I need this?</h2>\n<p>Rmarkdown is useful tool for generating data-driven documents in the R environment. Given that markdown documents can be rendered to several formats (html, docx, etc.), you can use <code>.Rmd</code> files as a substitute for shiny UIs. In other words, you can write in Rmarkdown and let the shiny server render your file(s) into HTML documents. This can be a good approach if you want to turn a report into a shiny app or if you want to speed up the development phase of your shiny apps. Alternatively, you may want to use flexdashboards.</p>\n<p>The <a href=\"https://github.com/fivethirtyeight/data/tree/master/librarians\">data</a> used in this app comes from 538's article titled, <a href=\"https://fivethirtyeight.com/features/where-are-americas-librarians/\">Where are America's Librarians</a>. I have a local copy of the data which can be updated by running the script <code>scripts/data_0_source.R</code>. On a side note, I prefer to work with a local copy of a dataset or other dependency. This limits the number of external requests that are made at the begining of the app which may result in slow startup times. </p>\n<p>The purpose of this app is to create a shiny app that allows users to make a selection, transform data based on that selection, and then render and display a report using the transformed data. The dataset is grouped by state (variable: <code>prim_state</code>). In this example, we will create a select input element that will allow us to filter the data by state, and then render a report using the state level data. Here's the application we will create.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bc175fa9e6d2f24b6fe048d5ed38306a/10ab7/rmarkdown_preview.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAB4klEQVQoz5WSy27TUBCGT1gUqSwq9sACIULF41BVgBAPYMFDYInsKS9QGprQJFaksspFQiQSr9BuQuKoRbHjW3zHjv0z5+QiKqoAI/0aeez/85mZw3Z2bu9ubd18y1hB5treviU/LD6Si8Vd+c7de3KhcIPq7G96QyqRHrN3B++fNxQF5fJHHB2V0WgoUJQm6vWGULX6CZVKFScnNdRq9bUU8vDa4eEHHB9XxLelUuklcxz7CRbxkyvLsiQIwiQMw2QVcRwn9G6TYg5wXXefDQaDPf4wn88z8ubqeIyzs3MMhyPouo7p1IBpmrAsS2Rdn1JtIQIgTdOclHEGsZ6y0Wi0tzwhL+aTyQTfh0Nh1DQNE00XRt/3/1AQBMgpll6oqnoVyF/yj4IwRJbNYZgWvnz9BnV8gSiK4HneGuZ5Pmgsm4EUOW9Fo1MZhinams1m2BT/ADRwefmD5mXR3GyYNLsZtey6Hmzbge04i0wK6dScubFlbjDFAqz1ItZwyvyHHMZHQIu8Fri6NgnxUt8PUjpNSjNKaespma4VdSMy9yyvDoi1z4j67PeZRFEstkd3D/8bxHrB6Mbf7/f7r0gSV6vVkprNpnR6+llqt9tSt9uVOp3OFa1qPPd6PWnpfU2sB78A48wj4iNQ9j8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rmarkdown shiny application preview\"\n        title=\"rmarkdown shiny application preview\"\n        src=\"/static/bc175fa9e6d2f24b6fe048d5ed38306a/0a47e/rmarkdown_preview.png\"\n        srcset=\"/static/bc175fa9e6d2f24b6fe048d5ed38306a/8a4e8/rmarkdown_preview.png 150w,\n/static/bc175fa9e6d2f24b6fe048d5ed38306a/5a46d/rmarkdown_preview.png 300w,\n/static/bc175fa9e6d2f24b6fe048d5ed38306a/0a47e/rmarkdown_preview.png 600w,\n/static/bc175fa9e6d2f24b6fe048d5ed38306a/1cfc2/rmarkdown_preview.png 900w,\n/static/bc175fa9e6d2f24b6fe048d5ed38306a/c1b63/rmarkdown_preview.png 1200w,\n/static/bc175fa9e6d2f24b6fe048d5ed38306a/10ab7/rmarkdown_preview.png 1552w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Let's get started!</p>\n<p><span id=\"work\"></span></p>\n<h2>How do I get this working?</h2>\n<p>The beauty of this approach is that your can write your UI using good ole Rmarkdown. In terms of the shiny UI, there isn't much to do unless you want to have inputs and other elements besides the report. To get the app running, this tutorial will cover three steps.</p>\n<ol>\n<li>Prepare the UI</li>\n<li>Draft a rmarkdown template as a parameterized report</li>\n<li>Write a render function that compiles the template </li>\n</ol>\n<p>This app will demonstrate how to render a report based on user selection.</p>\n<p><span id=\"work-ui\"></span></p>\n<h3>Preparing the UI</h3>\n<p>In the data, there is a grouping variable <code>prim_state</code>. We will use the distinct values (which are state abbreviations) in this column and render them in the select input. This will allow the user to generate a report on the state level. </p>\n<p>I decided to go the custom route with my select inputs (personal preference), feel free to use any method that you like. I've applied some styling as well. The stylings can be found in <code>www/css/styles.css</code>.</p>\n<p>The select input must have two elements: <code>tags$label()</code> element and the input element <code>tags$select()</code>. We will also render each distinct state name as the html element <code>&#x3C;option></code> and order the states alphabetically. </p>\n<p>We will need a button to trigger the rendering of the report as well. For good accessibility and semantic HTML practices, these elements will be wrapped in an form element and given a legend.</p>\n<p>Here's how the form is coded. </p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># build form</span>\ntags<span class=\"token operator\">$</span>form<span class=\"token punctuation\">(</span>\n\n    <span class=\"token comment\"># set form legend</span>\n    tags<span class=\"token operator\">$</span>legend<span class=\"token punctuation\">(</span><span class=\"token string\">\"Define Parameters for the Report\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\"># set label</span>\n    tags<span class=\"token operator\">$</span>label<span class=\"token punctuation\">(</span>`<span class=\"token keyword\">for</span>`<span class=\"token operator\">=</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Select a State\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\"># define the select input element</span>\n    tags<span class=\"token operator\">$</span>select<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"state\"</span><span class=\"token punctuation\">,</span> \n\n        <span class=\"token comment\"># return as html</span>\n        HTML<span class=\"token punctuation\">(</span>\n\n            <span class=\"token comment\"># set default selected option</span>\n            c<span class=\"token punctuation\">(</span><span class=\"token string\">\"Select a State\"</span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token comment\"># wrap each distinct value as: &lt;option value=\"prim_state\">prim_state&lt;/option></span>\n                sapply<span class=\"token punctuation\">(</span>\n\n                    <span class=\"token comment\"># pull unique values and order them</span>\n                    sort<span class=\"token punctuation\">(</span>unique<span class=\"token punctuation\">(</span>librarians<span class=\"token operator\">$</span>prim_state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n                        <span class=\"token comment\"># build html object</span>\n                        paste0<span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;option value='\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span><span class=\"token string\">\"'>\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span> <span class=\"token string\">\"&lt;/option>\"</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n    \n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\"># button</span>\n    tags<span class=\"token operator\">$</span>button<span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"render\"</span><span class=\"token punctuation\">,</span> class<span class=\"token operator\">=</span><span class=\"token string\">\"action-button shiny-bound-input\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Render\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Before we move on, we will need to create one final element and that is where we want our report to be rendered into. Use the <code>htmlOutput</code> function in the ui and set a unique id for the output from the server. I'm going to call this \"report\" for simplicity.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">htmlOutput<span class=\"token punctuation\">(</span><span class=\"token string\">\"report\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>See the <code>app.R</code> file for the full ui code.</p>\n<p><span id=\"work-template\"></span></p>\n<h3>Drafting your rmarkdown template as a parameterized report</h3>\n<p>In your project directory, create a new Rmarkdown file. This file will serve as the template for the app for which we will pass data into.</p>\n<p>Before we get started writing our template, it's a good idea to think about what we might want to use. So, what do we want to use in our markdown template? How do we define this in the template? </p>\n<p>Most importantly, we need some data so we will create a <code>data</code> parameter that receive an object from our sever. It would also be helpful to print the user's selection somewhere in the report so we will add a param <code>selection</code>. </p>\n<p>Any parameters that you want to access in the shiny server and in the Rmarkdown template must be defined in the YAML through the <code>params</code> property. Each param is declared on a new line and given an initial value.  Here's how to write the <code>data</code> and <code>selection</code> params.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">---\noutput: html_document\nparams:\n    data: null\n    selection: null\n---</code></pre></div>\n<p>I'm setting each param to <code>null</code> as a default value. Depending on your setup (if you want the app to render the template on load), you may want to set default values.</p>\n<p>Take a look at the output format. The output format is set to <code>html_document</code> as we want to shiny to render our template as an html file (this will create a <code>.html</code> file in our directory) and then load it into our UI. Continue adding as params (if needed) and add other YAML properties as needed.</p>\n<p>With our parameters defined, we can access them in the report inline using...</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">`r params<span class=\"token operator\">$</span>selection`</code></pre></div>\n<p>Or in code chunks. </p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">x <span class=\"token operator\">=</span> params<span class=\"token operator\">$</span>data\nprint<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now that we have our parameters defined, let's finish writing our template. In this example, we want to create a basic report that summarizes the top 10 areas where librarians are located and we also want to display the data in a table. First, let's create a top 10 object (note where the reference to params is located).</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># top 10 summary</span>\ntop_ten <span class=\"token operator\">&lt;-</span> params<span class=\"token operator\">$</span>data <span class=\"token percent-operator operator\">%>%</span>\n    group_by<span class=\"token punctuation\">(</span>area_name<span class=\"token punctuation\">)</span> <span class=\"token percent-operator operator\">%>%</span>\n    summarize<span class=\"token punctuation\">(</span><span class=\"token string\">\"tot_emp\"</span> <span class=\"token operator\">=</span> sum<span class=\"token punctuation\">(</span>tot_emp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token percent-operator operator\">%>%</span>\n    top_n<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token percent-operator operator\">%>%</span>\n    arrange<span class=\"token punctuation\">(</span>tot_emp<span class=\"token punctuation\">)</span> <span class=\"token percent-operator operator\">%>%</span>\n    mutate<span class=\"token punctuation\">(</span>area_name <span class=\"token operator\">=</span> factor<span class=\"token punctuation\">(</span>area_name<span class=\"token punctuation\">,</span> area_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now that we have our summarized object, we can create our chart and table using the object <code>top_ten</code> as we would with any other data object.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># plot top 10 areas by selected state</span>\nggplot<span class=\"token punctuation\">(</span>data <span class=\"token operator\">=</span> top_ten<span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x <span class=\"token operator\">=</span> area_name<span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span> tot_emp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    geom_col<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    coord_flip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    ggtitle<span class=\"token punctuation\">(</span><span class=\"token string\">\"Which states have the most employed librarians?\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    labs<span class=\"token punctuation\">(</span>x <span class=\"token operator\">=</span> <span class=\"token keyword\">NULL</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span> <span class=\"token string\">\"Total Employed\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    theme_minimal<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>We will use the <code>kableExtra</code> package to render a data table.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># render a data table using the kableExtra package</span>\nkableExtra<span class=\"token operator\">::</span>kable<span class=\"token punctuation\">(</span>top_ten<span class=\"token punctuation\">)</span> <span class=\"token percent-operator operator\">%>%</span> kable_styling<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>That's the basics for the Rmarkdown template! You can create many more visualizations as you like. Just remember to reference the <code>params$your_param_name_here</code> each time.</p>\n<p><span id=\"work-render\"></span></p>\n<h3>Rendering the template server-side</h3>\n<p>The last thing that we will write is our render function. Since we want the report to render when the button is clicked, we will start off be writing everything in an <code>observeEvent</code>. </p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">observeEvent<span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>render<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\"># do something here</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>In terms of passing data to your markdown template, you have a few options. You can either: </p>\n<ol>\n<li>prep the data in the shiny server code or </li>\n<li>pass the dataset to the markdown report and filter it there. </li>\n</ol>\n<p>I'm not sure if there's a difference between the two approaches. There might be performance issues. I would hypothesize that passing large datasets to our markdown template, and then rendering them would take longer than filtering the data in the shiny server. If you have other outputs that depend on the filtered data, then you may want to do all filtering through the server. Since this app is pretty simple, I'll prep the data in the render function.</p>\n<p>Now, we will write a simple filter that filters our dataset <code>librarians</code> using the selected value from our select input. We can use base R for this. I'll call this <code>librarians_filtered</code> for now.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">librarians_filtered <span class=\"token operator\">&lt;-</span> librarians<span class=\"token punctuation\">[</span>librarians<span class=\"token operator\">$</span>prim_state <span class=\"token operator\">==</span> input<span class=\"token operator\">$</span>state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span></code></pre></div>\n<p>*<strong>NOTE</strong>: the object <code>librarians</code> is loaded at the top the file. </p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">librarians <span class=\"token operator\">&lt;-</span> readRDS<span class=\"token punctuation\">(</span><span class=\"token string\">\"data/librarians_538.RDS\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Next, we will define our output method to tell shiny what we want to send to the ui and where. In our ui, we created the <code>htmlOutput(\"report\")</code> element. We will reference that here and send our ui via the <code>renderUI</code> function to the report element.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">observeEvent<span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>render<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\"># filter data</span>\n    librarians_filtered <span class=\"token operator\">&lt;-</span> librarians<span class=\"token punctuation\">[</span>librarians<span class=\"token operator\">$</span>prim_state <span class=\"token operator\">==</span> input<span class=\"token operator\">$</span>state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span>\n\n    <span class=\"token comment\"># output</span>\n    output<span class=\"token operator\">$</span>report <span class=\"token operator\">&lt;-</span> renderUI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\"># do something here</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Let's focus on <code>output$report</code>. What we want to do here is to return an html file that was rendered from our Rmarkdown template. We will also pass the data from the server to the params that we defined in the yaml (<code>params$data</code> and <code>params$selection</code>). We will use the <code>render</code> function from the <code>rmarkdown</code> package. This function has the argument <code>params</code> which allows us to send data to our template. </p>\n<p>Here's what the render function is written.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">rmarkdown<span class=\"token operator\">::</span>render<span class=\"token punctuation\">(</span>\n    input<span class=\"token operator\">=</span><span class=\"token string\">\"report_template.md\"</span><span class=\"token punctuation\">,</span> \n    params <span class=\"token operator\">=</span> list<span class=\"token punctuation\">(</span>selection <span class=\"token operator\">=</span> input<span class=\"token operator\">$</span>state<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>librarians_filtered<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>The input is the path to the Rmarkdown template and we've passed the data as a list. We can call <code>input$state</code> directly and use <code>librarians_filtered</code> for the object that we defined above.</p>\n<p>If you were to run the shiny app as is and render the report, you wouldn't see the report. That's because told shiny to render the template, but we haven't told shiny to load the rendered file. </p>\n<p>If we look back at our Rmarkdown template, we defined the output type in the yaml as \"html_document\". The easiest way to include the rendered doc is by wrapping our render function in the <code>includeHTML()</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">includeHTML<span class=\"token punctuation\">(</span>\n    rmarkdown<span class=\"token operator\">::</span>render<span class=\"token punctuation\">(</span>\n        input<span class=\"token operator\">=</span><span class=\"token string\">\"report_template.md\"</span><span class=\"token punctuation\">,</span> \n        params <span class=\"token operator\">=</span> list<span class=\"token punctuation\">(</span>selection <span class=\"token operator\">=</span> input<span class=\"token operator\">$</span>state<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>librarians_filtered<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>       </code></pre></div>\n<p>Now, let's put it all together.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">observeEvent<span class=\"token punctuation\">(</span>input<span class=\"token operator\">$</span>render<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\"># filter data</span>\n    librarians_filtered <span class=\"token operator\">&lt;-</span> librarians<span class=\"token punctuation\">[</span>librarians<span class=\"token operator\">$</span>prim_state <span class=\"token operator\">==</span> input<span class=\"token operator\">$</span>state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span>\n\n    <span class=\"token comment\"># output</span>\n    output<span class=\"token operator\">$</span>report <span class=\"token operator\">&lt;-</span> renderUI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        includeHTML<span class=\"token punctuation\">(</span>\n            rmarkdown<span class=\"token operator\">::</span>render<span class=\"token punctuation\">(</span>\n                input<span class=\"token operator\">=</span><span class=\"token string\">\"report_template.md\"</span><span class=\"token punctuation\">,</span> \n                params <span class=\"token operator\">=</span> list<span class=\"token punctuation\">(</span>selection <span class=\"token operator\">=</span> input<span class=\"token operator\">$</span>state<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>librarians_filtered<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>That's it. </p>\n<p><span id=\"further-thoughts\"></span></p>\n<h2>Further thoughts</h2>\n<p>You can create additional templates, render them accordingly, and pass as many parameters as you like. I haven't tested interactive visualizations in templates, but I would imagine they would work as long as you reference the correct <code>param</code>. </p>\n<p>Even though this is basic example, I've noticed that it takes a few seconds to render and load the template. The dataset is fairly small too. I would recommend preprocessing the data outside the markdown template (where possible). You can use loading animations and run them while the template is rendering. There are few loading ui packages on github. Search for <code>r shiny loading screen animations</code>.</p>\n<p>Another thing I noticed when using parameterized reports in shiny applications, is that the it additional shared css files are loaded into the application (i.e., shiny dependencies). This may be an issue if you are using custom css as some styles will be overwritten or clash with the additional css files. To my knowledge, there doesn't seem to be a way to prevent the css files from loading. </p>\n<p>For more information on parameterized reports, check out the <a href=\"https://rmarkdown.rstudio.com/developer_parameterized_reports.html%23parameter_types%2F\">documentation</a>.</p>\n<p><span id=\"run\"></span></p>\n<h2>How do I run the example?</h2>\n<p>You can run this demo by cloning the <a href=\"https://github.com/davidruvolo51/shinyAppTutorials\">github repository</a> and opening the Rproject file in <code>rmarkdown-app</code> directory. Alternatively, you can run the app through the console using:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">install.packages<span class=\"token punctuation\">(</span>shiny<span class=\"token punctuation\">)</span>\nshiny<span class=\"token operator\">::</span>runGithub<span class=\"token punctuation\">(</span>repo<span class=\"token operator\">=</span><span class=\"token string\">\"shinyAppTutorials\"</span><span class=\"token punctuation\">,</span> username<span class=\"token operator\">=</span><span class=\"token string\">\"davidruvolo51\"</span><span class=\"token punctuation\">,</span> subdir<span class=\"token operator\">=</span><span class=\"token string\">\"rmarkdown-app\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Let me know if you have any questions.</p>","frontmatter":{"title":"Using Rmarkdown files in Shiny","subtitle":"Building your UI with Rmarkdown reports","abstract":"Rmarkdown is perfect for shiny applications. If you have set content that needs to update when a new selection is made, you can pass parameters from your ui and server into a Rmd template.","date":"2019-10-30","updated":"2019-10-30","keywords":["rmarkdown"]},"fields":{"readingTime":{"minutes":9.785}}}},"pageContext":{"slug":"/tutorials/rmarkdown-shiny/"}}}