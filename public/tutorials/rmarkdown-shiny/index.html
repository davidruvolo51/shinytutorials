<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/shinytutorials/styles.e4eb1dd19da7ec968a25.css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2b2b2b}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#d4d0ab}.token.punctuation{color:#fefefe}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#abe338}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.important,.token.regex{color:gold}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:700}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:400}}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:url(/shinytutorials/static/open-sans-v17-latin-regular-5f4d4bc11d64b6cb605b7030c1997270.eot);src:local("Open Sans Regular"),local("OpenSans-Regular"),url(/shinytutorials/static/open-sans-v17-latin-regular-5f4d4bc11d64b6cb605b7030c1997270.eot?#iefix) format("embedded-opentype"),url(/shinytutorials/static/open-sans-v17-latin-regular-33543c5cc5d88f5695dd08c87d280dfd.woff2) format("woff2"),url(/shinytutorials/static/open-sans-v17-latin-regular-de0869e324680c99efa1250515b4b41c.woff) format("woff"),url(/shinytutorials/static/open-sans-v17-latin-regular-049a929c5d81988b3ae6d2f985ca7aa5.ttf) format("truetype"),url(/shinytutorials/static/open-sans-v17-latin-regular-7aab4c13671282c90669eb6a10357e41.svg#OpenSans) format("svg")}@font-face{font-family:Open Sans;font-style:normal;font-weight:600;src:url(/shinytutorials/static/open-sans-v17-latin-600-ddacaf4a9db58cda27c76ce88c408546.eot);src:local("Open Sans SemiBold"),local("OpenSans-SemiBold"),url(/shinytutorials/static/open-sans-v17-latin-600-ddacaf4a9db58cda27c76ce88c408546.eot?#iefix) format("embedded-opentype"),url(/shinytutorials/static/open-sans-v17-latin-600-819af3d3abdc9f135d49b80a91e2ff4c.woff2) format("woff2"),url(/shinytutorials/static/open-sans-v17-latin-600-449d681cd6006390e1bee3c3a660430b.woff) format("woff"),url(/shinytutorials/static/open-sans-v17-latin-600-8f7128145a3c2b83923552a328df7cdc.ttf) format("truetype"),url(/shinytutorials/static/open-sans-v17-latin-600-e16f375be3c2a73b58255a02f6d3a9ce.svg#OpenSans) format("svg")}body,html{padding:0;margin:0;font-family:Open Sans,Helvetica,sans-serif;cursor:default;font-size:15pt}article,aside,footer,header,main,nav{padding:0;margin:0;display:block}h1,h2,h3,h4,h5,h6{display:block;color:#2a2c32;line-height:1.3;padding:0;margin:0 0 6px}p{color:#3f454b;line-height:1.6;padding:0;margin:0 0 12px}ol li,ul li{margin:0;padding:0;line-height:1.7}ol li p,ul li p{padding:0;margin:0;line-height:1}ol li a,ul li a{padding:0;margin:0;line-height:1.5}li{color:#3f454b;line-height:1.3}a{color:#5177b8;text-decoration:none;box-shadow:0 2px 0 #5177b8}blockquote{line-height:1.3}input{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:90%;font-size:12pt;padding:8px 8px 8px 12px;border-radius:0;border:none;background-color:#f6f6f6;box-shadow:inset 0 2px 2px #d8d8d8}img,input{display:block}img{width:100%}:not(pre)>code{font-size:14pt}.icon{display:inline-block;width:20px;height:20px}.gatsby-highlight{margin:24px 0;font-size:12pt;overflow:auto}.gatsby-highlight pre{border-radius:6px}.gatsby-resp-image-link{box-shadow:none}button{display:block;border:none;background:none;cursor:pointer}.btn,.btn-link{display:block;padding:4px;margin:8px 0;font-size:14px;background-color:transparent;border-left:3px solid transparent;text-align:center}.btn-primary,.btn-secondary{text-transform:uppercase;letter-spacing:2px;font-weight:600;border-radius:3px;padding:6px 12px}.btn-primary{background-color:#5177b8;border:2px solid #5177b8;color:#fff;padding:8px 12px}.btn-primary:focus,.btn-primary:hover{background-color:transparent;border-color:#5177b8;color:#5177b8}.btn-secondary{background-color:transparent;border:2px solid #5177b8;color:#5177b8}.btn-secondary:focus,.btn-secondary:hover{background-color:#5177b8;color:#f6f6f6;border-color:#5177b8}.btn-keyword{font-size:12pt}.btn-keyword.selected,.btn-keyword:focus,.btn-keyword:hover{color:#5177b8;font-weight:600;border-left-color:#5177b8}.btn-centered{width:100px;margin:24px auto 0}.nav{position:fixed;top:0;left:0;width:100%;padding:6px 0;display:-ms-grid;display:grid;grid-template-columns:65% 35%;grid-template-areas:"brandLink menuBtn";-webkit-column-gap:0;column-gap:0;row-gap:0;background-color:#fff;box-shadow:0 2px 6px rgba(0,0,0,.18);z-index:15}.nav .nav-item{display:flex;align-items:center}.nav .brand-link{grid-area:brandLink;color:#5177b8;font-weight:600;font-size:14pt;letter-spacing:2px;padding:0 0 0 16px;box-shadow:none}.nav .brand-link .brand-link-icon path{fill:#5177b8}.nav .navigation{display:block;position:absolute;top:48px;width:1px;height:1px;clip:rect(0 0 0 0);clip:rect(0,0,0,0);padding:32px 0;background-color:#fff;z-index:14}.nav .navigation .menu-item{display:block;text-align:center}.nav .navigation .menu-item .menu-link{font-size:16pt;box-shadow:none}.nav .navigation.expanded{width:100%;height:auto;clip:auto;box-shadow:0 6px 6px rgba(0,0,0,.18)}.nav .menu-btns{justify-content:flex-end;grid-area:menuBtn}.nav .menu-btns .menu-button{margin:0}.nav .menu-btns .menu-button #menuBtn{margin-right:16px}@media (min-width:742px){.nav{grid-template-areas:"brandLink navLinks menuBtns";grid-template-columns:.75fr 3fr 1fr}.nav .brand-link{padding-bottom:0;grid-area:brandLink}.nav .navigation{position:static;display:flex;width:100%;grid-area:navLinks;box-shadow:none;margin-left:12px}.nav .navigation .menu-item{display:inline-block;width:auto;margin:0 24px 0 0}.nav .navigation .menu-item .menu-link{font-size:11pt}.nav .navigation .menu-item:last-child{margin-right:0}.nav .menu-btns{justify-content:flex-end;grid-area:menuBtns}.nav .menu-btns .menu-button{margin:0}.nav .menu-btns .menu-button#themeToggle{margin-right:24px}.nav .menu-btns .menu-item:not(.visible){display:none}}.menu{width:100%;margin:0 auto;list-style:none;padding:6px 0}.menu .menu-item{display:block;padding:0;margin:0 0 12px}.menu .menu-item .menu-link{position:relative;text-transform:uppercase;font-size:11pt;letter-spacing:2px;font-weight:600;color:#5177b8;padding-bottom:4px;border-bottom:2px solid transparent}.menu .menu-item .menu-link .menu-link-icon{position:relative;padding-right:6px;top:4px}.menu .menu-item .menu-link .menu-link-icon path{fill:#5177b8}.menu .menu-item .menu-link:hover{border-bottom-color:#5177b8}@media screen and (min-width:972px){.menu .menu-item{display:inline-block;margin:0 18px 0 0}}.footer{margin:0;padding:62px 0;background-color:#2a2c32}.footer h2{display:block;width:85%;margin:0 auto;padding-top:12px;color:#d8d8d8;letter-spacing:2.5px}.footer .menu{list-style:none;width:85%;margin:12px auto;padding:0}.footer .menu .menu-item{margin-right:24px}.footer .menu .menu-item .menu-link{color:#d8d8d8;box-shadow:none}.footer .menu .menu-item .menu-link .menu-link-icon path{fill:#d8d8d8}.footer .menu .menu-item .menu-link:hover{border-bottom-color:#d8d8d8}.post{padding:32px;border-radius:6px}.post .post-image{background-position:50%;background-size:cover;margin-bottom:12px}.post .post-title,.post .post-title-link{position:relative}.post .post-title{margin:0;padding:0}.post .post-title-link a{color:#2a2c32;box-shadow:0 1px 0 #3f454b}.post .post-status{position:relative;left:24px;top:-2px;font-size:11pt;text-transform:uppercase;font-weight:600;letter-spacing:2px;padding:3px 6px;border-radius:6px;background-color:#f6f6f6}.post .post-status[data-value=New]{background-color:rgba(81,119,184,.1);color:#5177b8}.post .post-status[data-value=Popular]{background-color:rgba(34,135,116,.1);color:#218573}.post .post-status[data-value=Favorite]{background-color:#a61c3c;color:#d8d8d8}.post .post-desc{padding:0;margin:0 0 6px;width:100%}.post .post-date{display:inline-block;color:#3f454b;font-size:11pt;font-family:consolas,courier,sans-serif;margin-right:12px}.post .post-tags{display:block;padding:0;margin:0 0 16px;list-style:none;color:#3f454b}.post .post-tags li{display:inline-block;margin-right:12px}.post .post-tags li .tag{border-radius:6px;font-size:11pt;padding:5px 10px;background-color:#f6f6f6;font-family:consolas,courier,sans-serif}.post .post-tags li .tag:before{content:"#"}.post .post-tags li:first-child{margin-left:0}.post .post-link{display:block;text-align:center;text-transform:uppercase;font-size:12pt;letter-spacing:2px;text-decoration:none;border-radius:4px;padding:6px 0;font-weight:600;box-shadow:none}.post .post-link:hover{text-decoration:underline}.post.post-feature{margin:16px auto;background-color:#fff}.post.post-feature .post-link{margin:0 auto;border:1px solid #5177b8;background-color:#5177b8;color:#fff}.post.post-plain{background-color:#fff;margin-bottom:16px}.post.post-plain .post-link{border:1px solid #5177b8}.post.post-plain .post-link:hover{background-color:#5177b8;color:#fff}.post.no-results-post{text-align:center}.post-form{padding:32px;border-radius:0 0 6px 6px;background-color:#fff;border-top:4px solid #5177b8;margin-bottom:16px}.post-form .input-label{display:block;padding:0;margin:0;font-size:18pt;color:#3f454b;font-weight:600}.post-form .input-example{line-height:1.5;padding:0;font-size:12pt;color:#3f454b;margin:0 0 12px}@media screen and (min-width:972px){.post{max-width:872px}.post.post-plain .post-link,.post.post-plain .post-tags{display:inline-flex;justify-content:center;align-items:center}.post.post-plain .post-link{width:125px;float:right}.post-form{max-width:872px}}.hero{width:100%;padding:44px 0;display:flex;position:relative;justify-content:center;align-items:center;background-color:#fff;overflow:hidden}.hero.hero-index .hero-content{width:90%;margin:0 auto;padding:72px 0;z-index:2}.hero.hero-index .hero-content .hero-title{font-size:21pt;letter-spacing:2.5px}.hero.hero-index .hero-content .hero-subtitle{font-weight:600;font-size:32pt;letter-spacing:2px;line-height:1.2}.hero.hero-index .hero-content .hero-image{display:block;width:300px;margin:44px auto;box-shadow:0 12px 3px -6px rgba(0,0,0,.18)}.hero.hero-text .hero-content{width:90%;margin:0 auto;padding:82px 0 0}.hero.hero-text .hero-content p{margin:0}.hero.hero-style-1{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNDQwcHgiIGhlaWdodD0iNjcxcHgiIHZpZXdCb3g9IjAgMCAxNDQwIDY3MSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTkuMSAoODYxNDQpIC0gaHR0cHM6Ly9za2V0Y2guY29tLS0+PHRpdGxlPmhlcm8tYmstZ3JheTwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9IkJhY2tncm91bmRzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBpZD0iaGVyby1iay1ncmF5LWNvcHkiIGZpbGw9IiM1MTc3YjgiIGZpbGwtb3BhY2l0eT0iMC4zIj48cGF0aCBkPSJNLTEuMjk5NjU0ODNlLTE0LDAgTDE0NDAsMCBDMTQ0MCw5NS45MTQ2OTE5IDE0NDAsMTg1Ljk3MzIwOCAxNDQwLDI3MC4xNzU1NDcgQzE0NDAsMzU0LjM3Nzg4NyAxNDQwLDQ3OS4zMTkzNzEgMTQ0MCw2NDUgQzEyODYuMzEwNjIsNTg3Ljc4MzUyNiAxMTI0LjkxNjc3LDU1MS45MDgyNTQgOTU1LjgxODQ0NSw1MzcuMzc0MTgzIEM3MDIuMTcwOTU5LDUxNS41NzMwNzYgNDU2Ljc1MDAwNiw3NDYuNzg4NDcxIDIxNi4yNzE0MTEsNjQ1IEM3MS41NDI5NDAxLDU4My43NDAxMjEgMC45MjI0ODU1MDIsNTA2LjI2ODcxIDEuMDM5NTg1MDhlLTEzLDQxMS42MzcxNzIgQy0wLjA2NjI0ODYzNzQsNDA0Ljg0MTE3MyAtMC4wNjYyNDg2Mzc0LDM5NC4yOTU0NDkgLTEuNTgxMzczOTJlLTE0LDM4MCBMLTEuMjk5NjU0ODNlLTE0LDAgWiIgaWQ9Imhlcm8tYmstZ3JheSIvPjwvZz48L2c+PC9zdmc+);background-size:cover;background-position:50% 100%;background-repeat:no-repeat}@media (min-width:972px){.hero.hero-index .hero-content,.hero.hero-text .hero-content{width:100%;max-width:972px}.hero.hero-index .hero-content .hero-image,.hero.hero-text .hero-content .hero-image{transform:scale(1.25)}}.flex{display:flex}.flex .flex-child{display:block;width:100%;height:auto}.flex.flex-30x70-layout,.flex.flex-33x3-layout,.flex.flex-50x2-layout{width:100%;flex-wrap:wrap}@media (min-width:812px){.flex.flex-30x70-layout .flex-child{display:inline-block}.flex.flex-30x70-layout .flex-child:nth-child(odd){width:30%}.flex.flex-30x70-layout .flex-child:nth-child(2n){width:70%}.flex.flex-33x3-layout .flex-child{display:inline-block;width:33%}.flex.flex-50x2-layout .flex-child{display:inline-block}.flex.flex-50x2-layout .flex-child:nth-child(2n),.flex.flex-50x2-layout .flex-child:nth-child(odd){width:50%}}.article-profile{display:inline-flex;justify-content:center;align-items:center;margin-top:12px}.article-profile .profile-img{width:40px;border-radius:50%}.article-profile .profile-name{font-size:12pt;margin-left:6px;color:#3f454b}.article-hero{padding-bottom:0}.article-hero h1{font-size:13pt;text-transform:uppercase;letter-spacing:2px}.article-hero h2{font-size:28pt}.article-hero .article-dates,.article-hero .article-readtime{margin:0;line-height:1.5;font-size:11pt;text-transform:uppercase;letter-spacing:2px;padding:0}.article-hero .article-dates time,.article-hero .article-readtime time{font-weight:400}.article-hero .article-readtime{color:#5177b8}.article{width:100%;padding:32px 0;border-radius:6px;background-color:#fff}.article .article-abstract,.article .article-body,.article .article-footer,.article .article-title{display:block;width:90%;margin:0 auto}.article .article-title{text-align:center}.article .article-abstract{color:#3f454b;line-height:1.6}.article .article-abstract :not(h2){color:#3f454b}.article .article-body h2{padding:0;margin:24px 0 0}.article .article-body a{color:#5177b8}.article .article-body blockquote{background-color:#f6f6f6;padding:12px;margin:44px 0;border-left:10px solid #5177b8}.article .article-body blockquote p{margin:0}.article .article-body table{margin:16px 0}.article .article-footer{border-top:1px solid #a3a6a8;margin-top:12px;padding-top:12px}.article .article-footer .article-tags{display:inline-block;padding:0;margin:0;list-style:none;color:#3f454b}.article .article-footer .article-tags li{display:inline-block;margin-right:12px}.article .article-footer .article-tags li .tag{border-radius:6px;font-size:11pt;padding:5px 10px;background-color:#f6f6f6;font-family:consolas,courier,sans-serif}.article .article-footer .article-tags li .tag:before{content:"#"}.article .article-footer .article-tags li:first-child{margin-left:0}.article-toc h2{font-size:21pt}.article-toc ol{font-size:13pt}.article-toc ol li{margin-bottom:12px}.article-toc ol li ol{margin-top:12px;list-style:upper-alpha}.article-toc ol li ol li{margin-bottom:6px}.article-toc ol li ol li ol{list-style:lower-roman}.article-toc ol li:last-child,.article-toc ol li ol li:last-child{margin-bottom:0}.article-toc ol a{box-shadow:none}.article-toc ol a :focus,.article-toc ol a:hover{box-shadow:0 2px 0 0 #5177b8}@media (min-width:972px){.article{max-width:812px}}.main{padding:0;min-height:60vh}.main .full-section{width:100%}.main .full-section .full-section-content,.main .main-section{width:90%;margin:0 auto}.main .main-section{padding:24px 0}.main .filled-section{padding:44px 0}.main .filled-section:not(.welcome-section){background-color:#f6f6f6}.main .filled-section:not(.welcome-section) p:not(.post-desc){text-align:center}.main .filled-section h2{text-align:center;text-transform:uppercase;letter-spacing:2px;padding:0;margin:0}.main .filled-section:last-child{margin-bottom:0}.main .filled-section.welcome-section p{max-width:812px;margin:0 auto}@media (min-width:972px){.main .full-section .full-section-content,.main .main-section{max-width:972px}}.sidebar-layout{display:flex;width:100%;flex-wrap:wrap}.sidebar-layout .sidebar-panel{position:static;padding-top:50px}.sidebar-layout .sidebar-panel .sidebar-content{background-color:#fff;margin:0 auto;padding:32px;border-radius:6px}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title{display:block;width:100%}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle{position:relative;margin:0;padding:0;font-size:18pt}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon{position:absolute;top:4px;margin-left:12px;transform:rotate(-45deg);transform-origin:center center;transition:all .3s ease-in-out}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon circle{fill:#f6f6f6}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon line{stroke:#5177b8}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-title .sidebar-toggle .sidebar-toggle-icon.rotated{transform:rotate(0)}.sidebar-layout .sidebar-panel .sidebar-content .sidebar-caption{margin:0 0 12px;line-height:1.3;font-size:14pt}.sidebar-layout .sidebar-panel .sidebar-content .taglist{list-style:none;padding:0;margin:0 0 16px -6px}.sidebar-layout .sidebar-panel .sidebar-content .taglist .taglist-item{width:200px;padding:0 24px 0 0;margin-bottom:12px;cursor:pointer}.sidebar-layout .sidebar-panel .sidebar-content.expanded{position:absolute;width:1px;height:1px;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);overflow:hidden}.sidebar-layout .main-panel{padding-top:50px}.sidebar-layout .main-panel,.sidebar-layout .sidebar-panel{width:90%;margin:0 auto}@media (min-width:972px){.sidebar-layout .sidebar-panel{width:30%;max-width:500px;margin:0 auto;position:-webkit-sticky;position:sticky;top:62px;height:100%}.sidebar-layout .sidebar-panel .sidebar-content{width:70%;max-height:565px;overflow-y:auto}.sidebar-layout .main-panel{width:70%}}#menuBtn{display:flex;justify-content:center;align-items:center;background-color:transparent}#menuBtn .menu-icon{display:block;margin:0 auto;position:relative}#menuBtn .menu-icon .menu-bar{display:block;height:3px;width:30px;border-radius:6px;margin-bottom:6px;background-color:#5177b8;transition:all .2s ease-in-out}#menuBtn .menu-icon .menu-bar:first-child{margin-top:2px}#menuBtn.open .menu-bar:first-child{opacity:0}#menuBtn.open .menu-bar:nth-child(2){transform:rotate(-45deg);transform-origin:center .5px;background-color:#5177b8}#menuBtn.open .menu-bar:nth-child(3){transform:rotate(45deg);transform-origin:24.85px -2.5px;background-color:#5177b8}#menuBtn.open .menu-label{color:#5177b8}.article table,.datatable{width:100%;margin:12px auto;font-weight:400;border-spacing:0;text-align:left;font-size:13pt}.article table caption,.datatable caption{text-align:left;font-size:16pt;margin:12px 0;color:#2a2c32;font-weight:600}.article table thead tr th,.datatable thead tr th{font-weight:600;text-transform:uppercase;letter-spacing:2px;font-size:11pt;padding:4px 12px;border-bottom:2px solid #2a2c32;color:#2a2c32}.article table tbody tr td,.datatable tbody tr td{padding:8px 12px}.article table tbody tr td .hidden-colname,.datatable tbody tr td .hidden-colname{display:none}.article table tbody tr:nth-child(2n),.datatable tbody tr:nth-child(2n){background-color:#f6f6f6}@media (max-width:892px){.datatable thead{display:none}.datatable tbody tr{display:block;margin-bottom:16px;counter-increment:rowCounter}.datatable tbody tr:nth-child(2n){background-color:transparent}.datatable tbody tr td{display:block;padding:6px 0 6px 6px;color:#3f454b}.datatable tbody tr td:first-child{font-size:16pt;color:#2a2c32}.datatable tbody tr td:first-child:before{content:counter(rowCounter) ".";display:inline-block;margin-right:4px;font-size:15pt}.datatable tbody tr td:not(:first-child){border-bottom:1px solid #f6f6f6}.datatable tbody tr td .hidden-colname{display:inline-block;width:150px}.datatable tbody tr td .hidden-colname:after{content:":"}.datatable-container{display:block;width:100%;overflow-x:scroll}}.visually-hidden{position:absolute;width:1px;height:1px;clip:rect(0 0 0 0);clip:rect(0,0,0,0);overflow:hidden}#theme-toggle-icon path{fill:#5177b8}.tutorial-index{padding:0 0 66px;background-color:#f6f6f6}.tutorial-index .tutorial-index-posts{padding:32px 0}.tutorial-index .tutorial-index-posts h2{padding-left:32px;margin-bottom:32px}.tutorial{padding:0 0 50px}.about-page,.tutorial{background-color:#f6f6f6}.about-page #repos .column-4,.about-page #repos .column-5,.about-page #repos .column-6,.about-page #repos thead th:nth-child(n+4){text-align:left}.privacy-page{background-color:#f6f6f6}@media (min-width:972px){.related-projects .post.post-feature,.tutorial-latest .post.post-feature{max-width:40%}.related-projects .post.post-feature:nth-child(odd),.tutorial-latest .post.post-feature:nth-child(odd){margin-right:32px}.tutorial-index .tutorial-index-posts{padding-top:82px}.about-page #repos .column-4,.about-page #repos .column-5,.about-page #repos .column-6,.about-page #repos thead th:nth-child(n+4){text-align:right}.gallery-page .post .post-link{width:250px}}body[data-theme=dark],body[data-theme=dark] h1,body[data-theme=dark] h2,body[data-theme=dark] h3,body[data-theme=dark] h4{color:#f6f6f6}body[data-theme=dark] p{color:#d8d8d8}body[data-theme=dark] a{color:#d8d8d8;text-decoration:none;box-shadow:0 2px 0 #f6f6f6}body[data-theme=dark] a.btn{box-shadow:none}body[data-theme=dark] ol li,body[data-theme=dark] ul li{color:#d8d8d8}body[data-theme=dark] :not(pre)>code[class*=language-],body[data-theme=dark] pre[class*=language-]{background:#13141b}body[data-theme=dark] .hero-image #dashboard rect#background{fill:#3f454b}body[data-theme=dark] .menu .menu-item .menu-link:hover{border-bottom-color:#f6f6f6}body[data-theme=dark] .nav{background-color:#2a2c32}body[data-theme=dark] .nav .nav-item{background-color:#2a2c32;color:#f6f6f6}body[data-theme=dark] .nav .navigation .menu-item .menu-link{color:#f6f6f6}body[data-theme=dark] .nav .menu-btns #themeToggle path,body[data-theme=dark] .nav .navigation .menu-item .menu-link .menu-link-icon path{fill:#f6f6f6}body[data-theme=dark] .nav .menu-btns #menuBtn .menu-icon .menu-bar{background-color:#f6f6f6}body[data-theme=dark] .hero{background-color:#2a2c32}body[data-theme=dark] .hero.article-hero,body[data-theme=dark] .hero.hero-text{position:relative;background-color:#2a2c32;overflow:hidden}body[data-theme=dark] .hero.article-hero:before,body[data-theme=dark] .hero.hero-text:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(81,119,184,.1);z-index:1}body[data-theme=dark] .hero.article-hero .hero-content .article-readtime,body[data-theme=dark] .hero.article-hero .hero-content .profile-name,body[data-theme=dark] .hero.hero-text .hero-content .article-readtime,body[data-theme=dark] .hero.hero-text .hero-content .profile-name{color:#d8d8d8}body[data-theme=dark] .main,body[data-theme=dark] .main .filled-section,body[data-theme=dark] .main .full-section,body[data-theme=dark] .main .main-section{background-color:#2a2c32}body[data-theme=dark] .post{background-color:#3f454b}body[data-theme=dark] .post h3 a{color:#d8d8d8}body[data-theme=dark] .post .post-date{color:#f6f6f6}body[data-theme=dark] .post .post-tags .tag{color:#2a2c32;background-color:#d8d8d8}body[data-theme=dark] .post .post-status[data-value=New]{background-color:#2a2c32;color:#d8d8d8}body[data-theme=dark] .post .post-status[data-value=Popular]{background-color:#218573;color:#f6f6f6}body[data-theme=dark] .tutorial-index{background-color:#2a2c32}body[data-theme=dark] .tutorial-index #reset,body[data-theme=dark] .tutorial-index .post.post-plain .post-link{background-color:#5177b8;color:#f6f6f6}body[data-theme=dark] .sidebar-layout{background-color:#2a2c32}body[data-theme=dark] .form,body[data-theme=dark] .sidebar-layout .sidebar-panel .sidebar-content{background-color:#3f454b}body[data-theme=dark] .form label,body[data-theme=dark] .form p{color:#d8d8d8}body[data-theme=dark] #search{background-color:#d8d8d8}body[data-theme=dark] .btn-keyword{color:#f6f6f6}body[data-theme=dark] .btn-keyword.selected,body[data-theme=dark] .btn-keyword:hover{border-left-color:#f6f6f6}body[data-theme=dark] .tutorial .sidebar-layout .sidebar-panel .sidebar-content{background-color:rgba(81,119,184,.1)}body[data-theme=dark] .tutorial .sidebar-layout .sidebar-panel .sidebar-content a{box-shadow:none}body[data-theme=dark] .tutorial .sidebar-layout .sidebar-panel .sidebar-content a:hover{box-shadow:0 2px 0 #d8d8d8}body[data-theme=dark] .tutorial .article{background-color:#2a2c32}body[data-theme=dark] .tutorial .article .article-abstract p,body[data-theme=dark] .tutorial .article a{color:#d8d8d8}body[data-theme=dark] .tutorial .article blockquote{background-color:#3f454b}body[data-theme=dark] .tutorial .article blockquote p{color:#f6f6f6}body[data-theme=dark] .tutorial .article .article-tags li code{background-color:#3f454b}body[data-theme=dark] .tutorial .article table{background-color:rgba(81,119,184,.1);padding:6px}body[data-theme=dark] .tutorial .article table thead tr th{color:#f6f6f6;border-bottom-color:#f6f6f6}body[data-theme=dark] .tutorial .article table tbody tr{background-color:transparent}body[data-theme=dark] .tutorial .article table tbody tr td{border-bottom:1px solid #a3a6a8}body[data-theme=dark] .tutorial .article table tbody tr:nth-child(2n){background-color:transparent}body[data-theme=dark] .tutorial .article table tbody tr:last-child td{border-bottom:none}body[data-theme=dark] .datatable{background-color:rgba(81,119,184,.1);padding:6px}body[data-theme=dark] .datatable thead tr th{color:#f6f6f6;border-bottom-color:#f6f6f6}body[data-theme=dark] .datatable tbody tr{background-color:transparent}body[data-theme=dark] .datatable tbody tr td{border-bottom:1px solid #a3a6a8;color:#f6f6f6}body[data-theme=dark] .datatable tbody tr td:last-child{border-bottom:none}body[data-theme=dark] .datatable tbody tr:nth-child(2n){background-color:transparent}@media (min-width:972px){body[data-theme=dark] .datatable tbody tr td:last-child{border-bottom:1px solid #a3a6a8}body[data-theme=dark] .datatable tbody tr:last-child td{border-bottom:none}}</style><meta name="generator" content="Gatsby 2.21.31"/><link rel="icon" href="/shinytutorials/favicon-32x32.png?v=b6a2858e17f3490fc076bd67d2c3059b"/><link rel="manifest" href="/shinytutorials/manifest.webmanifest" crossorigin="use-credentials"/><link rel="apple-touch-icon" sizes="48x48" href="/shinytutorials/icons/icon-48x48.png?v=b6a2858e17f3490fc076bd67d2c3059b"/><link rel="apple-touch-icon" sizes="72x72" href="/shinytutorials/icons/icon-72x72.png?v=b6a2858e17f3490fc076bd67d2c3059b"/><link rel="apple-touch-icon" sizes="96x96" href="/shinytutorials/icons/icon-96x96.png?v=b6a2858e17f3490fc076bd67d2c3059b"/><link rel="apple-touch-icon" sizes="144x144" href="/shinytutorials/icons/icon-144x144.png?v=b6a2858e17f3490fc076bd67d2c3059b"/><link rel="apple-touch-icon" sizes="192x192" href="/shinytutorials/icons/icon-192x192.png?v=b6a2858e17f3490fc076bd67d2c3059b"/><link rel="apple-touch-icon" sizes="256x256" href="/shinytutorials/icons/icon-256x256.png?v=b6a2858e17f3490fc076bd67d2c3059b"/><link rel="apple-touch-icon" sizes="384x384" href="/shinytutorials/icons/icon-384x384.png?v=b6a2858e17f3490fc076bd67d2c3059b"/><link rel="apple-touch-icon" sizes="512x512" href="/shinytutorials/icons/icon-512x512.png?v=b6a2858e17f3490fc076bd67d2c3059b"/><title data-react-helmet="true">shinyTutorials | Using Rmarkdown files in Shiny</title><meta data-react-helmet="true" name="description" content="Using Rmarkdown files in Shiny Building your UI with Rmarkdown reports"/><meta data-react-helmet="true" property="og:title" content="Using Rmarkdown files in Shiny"/><meta data-react-helmet="true" property="og:description" content="Using Rmarkdown files in Shiny Building your UI with Rmarkdown reports"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="dcruvolo"/><meta data-react-helmet="true" name="twitter:title" content="Using Rmarkdown files in Shiny"/><meta data-react-helmet="true" name="twitter:description" content="Using Rmarkdown files in Shiny Building your UI with Rmarkdown reports"/><meta data-react-helmet="true" name="keywords" content="rmarkdown"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="shinytutorials latest posts" href="/shinytutorials/rss.xml"/><link as="script" rel="preload" href="/shinytutorials/webpack-runtime-9a456ce07a38feb9be63.js"/><link as="script" rel="preload" href="/shinytutorials/framework-d18255661b01063664e4.js"/><link as="script" rel="preload" href="/shinytutorials/app-94763455d3e9aec55c1f.js"/><link as="script" rel="preload" href="/shinytutorials/styles-8636a280cbc61d53ad10.js"/><link as="script" rel="preload" href="/shinytutorials/commons-c22ed27833d982c3b8cb.js"/><link as="script" rel="preload" href="/shinytutorials/ec800322c0f71b5715d75b0073f476a066af1f45-b5d52b976fc50d0f1ca2.js"/><link as="script" rel="preload" href="/shinytutorials/component---src-components-tutorials-js-e593508aa4749986bc9f.js"/><link as="fetch" rel="preload" href="/shinytutorials/page-data/tutorials/rmarkdown-shiny/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/shinytutorials/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="nav" role="navigation"><a class="nav-item brand-link" href="/shinytutorials/">shinyTutorials</a><ul class="menu nav-item navigation "></ul><ul class="nav-item menu menu-btns"><li class="menu-item menu-button visible"><button id="themeToggle" class="menu-button"><span class="visually-hidden">toggle theme</span><svg id="theme-toggle-icon" class="icon theme-icon" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>toggle theme</title><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="light-bulb" fill="#000000"><path d="M11,11.8999819 C13.2822403,11.4367116 15,9.41895791 15,7 C15,4.23857625 12.7614237,2 10,2 C7.23857625,2 5,4.23857625 5,7 C5,9.41895791 6.71775968,11.4367116 9,11.8999819 L9,14 L11,14 L11,11.8999819 Z M13,13.3263688 C15.3649473,12.2029049 17,9.79239596 17,7 C17,3.13400675 13.8659932,0 10,0 C6.13400675,0 3,3.13400675 3,7 C3,9.79239596 4.63505267,12.2029049 7,13.3263688 L7,16 L13,16 L13,13.3263688 Z M7,17 L13,17 L13,18.5 C13,19.3284271 12.3349702,20 11.501424,20 L8.49857602,20 C7.67093534,20 7,19.3342028 7,18.5 L7,17 Z" id="Combined-Shape"></path></g></g></svg></button></li><li class="menu-item menu-button"><button id="menuBtn" class="" aria-expanded="false"><span class="visually-hidden">open or close menu</span><span class="menu-icon" aria-hidden="true"><span class="menu-bar"></span><span class="menu-bar"></span><span class="menu-bar"></span></span></button></li></ul></nav><header class="hero hero-index article-hero"><div class="hero-content"><h1 class="hero-title"></h1><h2 class="hero-subtitle"></h2><h1>Using Rmarkdown files in Shiny</h1><h2>Building your UI with Rmarkdown reports</h2><p class="article-dates">Published: <time>2019-10-30</time></p><p class="article-readtime"><time>10</time> minute read</p><div class="article-profile"><img class="profile-img" src="/shinytutorials/static/dcruvolo-16a2e1e5e48ba95aed1c754fd7fd0d57.jpeg" alt="@dcruvolo"/><span class="profile-name">@dcruvolo</span></div></div></header><main id="main" class="main tutorial" aria-label="main content"><div class="sidebar-layout"><aside class="sidebar-panel article-toc"><section class="sidebar-content"><div><h2>Contents</h2>
<ol>
<li><a href="#about">Why would I need this?</a></li>
<li>
<p><a href="#work">How do I get this working?</a></p>
<ol>
<li><a href="#work-ui">Preparing the UI</a></li>
<li><a href="#work-template">Drafting your Rmarkdown template as a parameterized report</a></li>
<li><a href="#work-render">Rending the template server-side</a></li>
</ol>
</li>
<li><a href="#further-thoughts">Further Thoughts</a></li>
<li><a href="#run">How do I run the example?</a></li>
</ol>
</div></section></aside><div class="main-panel tutorial-body"><article class="article"><section class="article-abstract"><h2>Overview</h2><p>Rmarkdown is perfect for shiny applications. If you have set content that needs to update when a new selection is made, you can pass parameters from your ui and server into a Rmd template.</p></section><section class="article-body">
<p><span id="about"></span></p>
<h2>Why would I need this?</h2>
<p>Rmarkdown is useful tool for generating data-driven documents in the R environment. Given that markdown documents can be rendered to several formats (html, docx, etc.), you can use <code>.Rmd</code> files as a substitute for shiny UIs. In other words, you can write in Rmarkdown and let the shiny server render your file(s) into HTML documents. This can be a good approach if you want to turn a report into a shiny app or if you want to speed up the development phase of your shiny apps. Alternatively, you may want to use flexdashboards.</p>
<p>The <a href="https://github.com/fivethirtyeight/data/tree/master/librarians">data</a> used in this app comes from 538's article titled, <a href="https://fivethirtyeight.com/features/where-are-americas-librarians/">Where are America's Librarians</a>. I have a local copy of the data which can be updated by running the script <code>scripts/data_0_source.R</code>. On a side note, I prefer to work with a local copy of a dataset or other dependency. This limits the number of external requests that are made at the begining of the app which may result in slow startup times. </p>
<p>The purpose of this app is to create a shiny app that allows users to make a selection, transform data based on that selection, and then render and display a report using the transformed data. The dataset is grouped by state (variable: <code>prim_state</code>). In this example, we will create a select input element that will allow us to filter the data by state, and then render a report using the state level data. Here's the application we will create.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/shinytutorials/static/bc175fa9e6d2f24b6fe048d5ed38306a/10ab7/rmarkdown_preview.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 61.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAB4klEQVQoz5WSy27TUBCGT1gUqSwq9sACIULF41BVgBAPYMFDYInsKS9QGprQJFaksspFQiQSr9BuQuKoRbHjW3zHjv0z5+QiKqoAI/0aeez/85mZw3Z2bu9ubd18y1hB5treviU/LD6Si8Vd+c7de3KhcIPq7G96QyqRHrN3B++fNxQF5fJHHB2V0WgoUJQm6vWGULX6CZVKFScnNdRq9bUU8vDa4eEHHB9XxLelUuklcxz7CRbxkyvLsiQIwiQMw2QVcRwn9G6TYg5wXXefDQaDPf4wn88z8ubqeIyzs3MMhyPouo7p1IBpmrAsS2Rdn1JtIQIgTdOclHEGsZ6y0Wi0tzwhL+aTyQTfh0Nh1DQNE00XRt/3/1AQBMgpll6oqnoVyF/yj4IwRJbNYZgWvnz9BnV8gSiK4HneGuZ5Pmgsm4EUOW9Fo1MZhinams1m2BT/ADRwefmD5mXR3GyYNLsZtey6Hmzbge04i0wK6dScubFlbjDFAqz1ItZwyvyHHMZHQIu8Fri6NgnxUt8PUjpNSjNKaespma4VdSMy9yyvDoi1z4j67PeZRFEstkd3D/8bxHrB6Mbf7/f7r0gSV6vVkprNpnR6+llqt9tSt9uVOp3OFa1qPPd6PWnpfU2sB78A48wj4iNQ9j8AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="rmarkdown shiny application preview"
        title="rmarkdown shiny application preview"
        src="/shinytutorials/static/bc175fa9e6d2f24b6fe048d5ed38306a/0a47e/rmarkdown_preview.png"
        srcset="/shinytutorials/static/bc175fa9e6d2f24b6fe048d5ed38306a/8a4e8/rmarkdown_preview.png 150w,
/shinytutorials/static/bc175fa9e6d2f24b6fe048d5ed38306a/5a46d/rmarkdown_preview.png 300w,
/shinytutorials/static/bc175fa9e6d2f24b6fe048d5ed38306a/0a47e/rmarkdown_preview.png 600w,
/shinytutorials/static/bc175fa9e6d2f24b6fe048d5ed38306a/1cfc2/rmarkdown_preview.png 900w,
/shinytutorials/static/bc175fa9e6d2f24b6fe048d5ed38306a/c1b63/rmarkdown_preview.png 1200w,
/shinytutorials/static/bc175fa9e6d2f24b6fe048d5ed38306a/10ab7/rmarkdown_preview.png 1552w"
        sizes="(max-width: 600px) 100vw, 600px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Let's get started!</p>
<p><span id="work"></span></p>
<h2>How do I get this working?</h2>
<p>The beauty of this approach is that your can write your UI using good ole Rmarkdown. In terms of the shiny UI, there isn't much to do unless you want to have inputs and other elements besides the report. To get the app running, this tutorial will cover three steps.</p>
<ol>
<li>Prepare the UI</li>
<li>Draft a rmarkdown template as a parameterized report</li>
<li>Write a render function that compiles the template </li>
</ol>
<p>This app will demonstrate how to render a report based on user selection.</p>
<p><span id="work-ui"></span></p>
<h3>Preparing the UI</h3>
<p>In the data, there is a grouping variable <code>prim_state</code>. We will use the distinct values (which are state abbreviations) in this column and render them in the select input. This will allow the user to generate a report on the state level. </p>
<p>I decided to go the custom route with my select inputs (personal preference), feel free to use any method that you like. I've applied some styling as well. The stylings can be found in <code>www/css/styles.css</code>.</p>
<p>The select input must have two elements: <code>tags$label()</code> element and the input element <code>tags$select()</code>. We will also render each distinct state name as the html element <code>&#x3C;option></code> and order the states alphabetically. </p>
<p>We will need a button to trigger the rendering of the report as well. For good accessibility and semantic HTML practices, these elements will be wrapped in an form element and given a legend.</p>
<p>Here's how the form is coded. </p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token comment"># build form</span>
tags<span class="token operator">$</span>form<span class="token punctuation">(</span>

    <span class="token comment"># set form legend</span>
    tags<span class="token operator">$</span>legend<span class="token punctuation">(</span><span class="token string">"Define Parameters for the Report"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment"># set label</span>
    tags<span class="token operator">$</span>label<span class="token punctuation">(</span>`<span class="token keyword">for</span>`<span class="token operator">=</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token string">"Select a State"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment"># define the select input element</span>
    tags<span class="token operator">$</span>select<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"state"</span><span class="token punctuation">,</span> 

        <span class="token comment"># return as html</span>
        HTML<span class="token punctuation">(</span>

            <span class="token comment"># set default selected option</span>
            c<span class="token punctuation">(</span><span class="token string">"Select a State"</span><span class="token punctuation">,</span>

                <span class="token comment"># wrap each distinct value as: &lt;option value="prim_state">prim_state&lt;/option></span>
                sapply<span class="token punctuation">(</span>

                    <span class="token comment"># pull unique values and order them</span>
                    sort<span class="token punctuation">(</span>unique<span class="token punctuation">(</span>librarians<span class="token operator">$</span>prim_state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">{</span>

                        <span class="token comment"># build html object</span>
                        paste0<span class="token punctuation">(</span><span class="token string">"&lt;option value='"</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span><span class="token string">"'>"</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span> <span class="token string">"&lt;/option>"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    
    <span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment"># button</span>
    tags<span class="token operator">$</span>button<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"render"</span><span class="token punctuation">,</span> class<span class="token operator">=</span><span class="token string">"action-button shiny-bound-input"</span><span class="token punctuation">,</span> <span class="token string">"Render"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<p>Before we move on, we will need to create one final element and that is where we want our report to be rendered into. Use the <code>htmlOutput</code> function in the ui and set a unique id for the output from the server. I'm going to call this "report" for simplicity.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">htmlOutput<span class="token punctuation">(</span><span class="token string">"report"</span><span class="token punctuation">)</span></code></pre></div>
<p>See the <code>app.R</code> file for the full ui code.</p>
<p><span id="work-template"></span></p>
<h3>Drafting your rmarkdown template as a parameterized report</h3>
<p>In your project directory, create a new Rmarkdown file. This file will serve as the template for the app for which we will pass data into.</p>
<p>Before we get started writing our template, it's a good idea to think about what we might want to use. So, what do we want to use in our markdown template? How do we define this in the template? </p>
<p>Most importantly, we need some data so we will create a <code>data</code> parameter that receive an object from our sever. It would also be helpful to print the user's selection somewhere in the report so we will add a param <code>selection</code>. </p>
<p>Any parameters that you want to access in the shiny server and in the Rmarkdown template must be defined in the YAML through the <code>params</code> property. Each param is declared on a new line and given an initial value.  Here's how to write the <code>data</code> and <code>selection</code> params.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">---
output: html_document
params:
    data: null
    selection: null
---</code></pre></div>
<p>I'm setting each param to <code>null</code> as a default value. Depending on your setup (if you want the app to render the template on load), you may want to set default values.</p>
<p>Take a look at the output format. The output format is set to <code>html_document</code> as we want to shiny to render our template as an html file (this will create a <code>.html</code> file in our directory) and then load it into our UI. Continue adding as params (if needed) and add other YAML properties as needed.</p>
<p>With our parameters defined, we can access them in the report inline using...</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">`r params<span class="token operator">$</span>selection`</code></pre></div>
<p>Or in code chunks. </p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">x <span class="token operator">=</span> params<span class="token operator">$</span>data
print<span class="token punctuation">(</span>x<span class="token punctuation">)</span></code></pre></div>
<p>Now that we have our parameters defined, let's finish writing our template. In this example, we want to create a basic report that summarizes the top 10 areas where librarians are located and we also want to display the data in a table. First, let's create a top 10 object (note where the reference to params is located).</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token comment"># top 10 summary</span>
top_ten <span class="token operator">&lt;-</span> params<span class="token operator">$</span>data <span class="token percent-operator operator">%>%</span>
    group_by<span class="token punctuation">(</span>area_name<span class="token punctuation">)</span> <span class="token percent-operator operator">%>%</span>
    summarize<span class="token punctuation">(</span><span class="token string">"tot_emp"</span> <span class="token operator">=</span> sum<span class="token punctuation">(</span>tot_emp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%>%</span>
    top_n<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%>%</span>
    arrange<span class="token punctuation">(</span>tot_emp<span class="token punctuation">)</span> <span class="token percent-operator operator">%>%</span>
    mutate<span class="token punctuation">(</span>area_name <span class="token operator">=</span> factor<span class="token punctuation">(</span>area_name<span class="token punctuation">,</span> area_name<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>Now that we have our summarized object, we can create our chart and table using the object <code>top_ten</code> as we would with any other data object.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token comment"># plot top 10 areas by selected state</span>
ggplot<span class="token punctuation">(</span>data <span class="token operator">=</span> top_ten<span class="token punctuation">,</span> aes<span class="token punctuation">(</span>x <span class="token operator">=</span> area_name<span class="token punctuation">,</span> y<span class="token operator">=</span> tot_emp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
    geom_col<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
    coord_flip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
    ggtitle<span class="token punctuation">(</span><span class="token string">"Which states have the most employed librarians?"</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
    labs<span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> y<span class="token operator">=</span> <span class="token string">"Total Employed"</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
    theme_minimal<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>We will use the <code>kableExtra</code> package to render a data table.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token comment"># render a data table using the kableExtra package</span>
kableExtra<span class="token operator">::</span>kable<span class="token punctuation">(</span>top_ten<span class="token punctuation">)</span> <span class="token percent-operator operator">%>%</span> kable_styling<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>That's the basics for the Rmarkdown template! You can create many more visualizations as you like. Just remember to reference the <code>params$your_param_name_here</code> each time.</p>
<p><span id="work-render"></span></p>
<h3>Rendering the template server-side</h3>
<p>The last thing that we will write is our render function. Since we want the report to render when the button is clicked, we will start off be writing everything in an <code>observeEvent</code>. </p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>render<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment"># do something here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>In terms of passing data to your markdown template, you have a few options. You can either: </p>
<ol>
<li>prep the data in the shiny server code or </li>
<li>pass the dataset to the markdown report and filter it there. </li>
</ol>
<p>I'm not sure if there's a difference between the two approaches. There might be performance issues. I would hypothesize that passing large datasets to our markdown template, and then rendering them would take longer than filtering the data in the shiny server. If you have other outputs that depend on the filtered data, then you may want to do all filtering through the server. Since this app is pretty simple, I'll prep the data in the render function.</p>
<p>Now, we will write a simple filter that filters our dataset <code>librarians</code> using the selected value from our select input. We can use base R for this. I'll call this <code>librarians_filtered</code> for now.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">librarians_filtered <span class="token operator">&lt;-</span> librarians<span class="token punctuation">[</span>librarians<span class="token operator">$</span>prim_state <span class="token operator">==</span> input<span class="token operator">$</span>state<span class="token punctuation">,</span> <span class="token punctuation">]</span></code></pre></div>
<p>*<strong>NOTE</strong>: the object <code>librarians</code> is loaded at the top the file. </p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">librarians <span class="token operator">&lt;-</span> readRDS<span class="token punctuation">(</span><span class="token string">"data/librarians_538.RDS"</span><span class="token punctuation">)</span></code></pre></div>
<p>Next, we will define our output method to tell shiny what we want to send to the ui and where. In our ui, we created the <code>htmlOutput("report")</code> element. We will reference that here and send our ui via the <code>renderUI</code> function to the report element.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>render<span class="token punctuation">,</span> <span class="token punctuation">{</span>

    <span class="token comment"># filter data</span>
    librarians_filtered <span class="token operator">&lt;-</span> librarians<span class="token punctuation">[</span>librarians<span class="token operator">$</span>prim_state <span class="token operator">==</span> input<span class="token operator">$</span>state<span class="token punctuation">,</span> <span class="token punctuation">]</span>

    <span class="token comment"># output</span>
    output<span class="token operator">$</span>report <span class="token operator">&lt;-</span> renderUI<span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment"># do something here</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Let's focus on <code>output$report</code>. What we want to do here is to return an html file that was rendered from our Rmarkdown template. We will also pass the data from the server to the params that we defined in the yaml (<code>params$data</code> and <code>params$selection</code>). We will use the <code>render</code> function from the <code>rmarkdown</code> package. This function has the argument <code>params</code> which allows us to send data to our template. </p>
<p>Here's what the render function is written.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">rmarkdown<span class="token operator">::</span>render<span class="token punctuation">(</span>
    input<span class="token operator">=</span><span class="token string">"report_template.md"</span><span class="token punctuation">,</span> 
    params <span class="token operator">=</span> list<span class="token punctuation">(</span>selection <span class="token operator">=</span> input<span class="token operator">$</span>state<span class="token punctuation">,</span> data<span class="token operator">=</span>librarians_filtered<span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<p>The input is the path to the Rmarkdown template and we've passed the data as a list. We can call <code>input$state</code> directly and use <code>librarians_filtered</code> for the object that we defined above.</p>
<p>If you were to run the shiny app as is and render the report, you wouldn't see the report. That's because told shiny to render the template, but we haven't told shiny to load the rendered file. </p>
<p>If we look back at our Rmarkdown template, we defined the output type in the yaml as "html_document". The easiest way to include the rendered doc is by wrapping our render function in the <code>includeHTML()</code> function.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">includeHTML<span class="token punctuation">(</span>
    rmarkdown<span class="token operator">::</span>render<span class="token punctuation">(</span>
        input<span class="token operator">=</span><span class="token string">"report_template.md"</span><span class="token punctuation">,</span> 
        params <span class="token operator">=</span> list<span class="token punctuation">(</span>selection <span class="token operator">=</span> input<span class="token operator">$</span>state<span class="token punctuation">,</span> data<span class="token operator">=</span>librarians_filtered<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span>       </code></pre></div>
<p>Now, let's put it all together.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>render<span class="token punctuation">,</span> <span class="token punctuation">{</span>

    <span class="token comment"># filter data</span>
    librarians_filtered <span class="token operator">&lt;-</span> librarians<span class="token punctuation">[</span>librarians<span class="token operator">$</span>prim_state <span class="token operator">==</span> input<span class="token operator">$</span>state<span class="token punctuation">,</span> <span class="token punctuation">]</span>

    <span class="token comment"># output</span>
    output<span class="token operator">$</span>report <span class="token operator">&lt;-</span> renderUI<span class="token punctuation">(</span><span class="token punctuation">{</span>
        includeHTML<span class="token punctuation">(</span>
            rmarkdown<span class="token operator">::</span>render<span class="token punctuation">(</span>
                input<span class="token operator">=</span><span class="token string">"report_template.md"</span><span class="token punctuation">,</span> 
                params <span class="token operator">=</span> list<span class="token punctuation">(</span>selection <span class="token operator">=</span> input<span class="token operator">$</span>state<span class="token punctuation">,</span> data<span class="token operator">=</span>librarians_filtered<span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>That's it. </p>
<p><span id="further-thoughts"></span></p>
<h2>Further thoughts</h2>
<p>You can create additional templates, render them accordingly, and pass as many parameters as you like. I haven't tested interactive visualizations in templates, but I would imagine they would work as long as you reference the correct <code>param</code>. </p>
<p>Even though this is basic example, I've noticed that it takes a few seconds to render and load the template. The dataset is fairly small too. I would recommend preprocessing the data outside the markdown template (where possible). You can use loading animations and run them while the template is rendering. There are few loading ui packages on github. Search for <code>r shiny loading screen animations</code>.</p>
<p>Another thing I noticed when using parameterized reports in shiny applications, is that the it additional shared css files are loaded into the application (i.e., shiny dependencies). This may be an issue if you are using custom css as some styles will be overwritten or clash with the additional css files. To my knowledge, there doesn't seem to be a way to prevent the css files from loading. </p>
<p>For more information on parameterized reports, check out the <a href="https://rmarkdown.rstudio.com/developer_parameterized_reports.html%23parameter_types%2F">documentation</a>.</p>
<p><span id="run"></span></p>
<h2>How do I run the example?</h2>
<p>You can run this demo by cloning the <a href="https://github.com/davidruvolo51/shinyAppTutorials">github repository</a> and opening the Rproject file in <code>rmarkdown-app</code> directory. Alternatively, you can run the app through the console using:</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">install.packages<span class="token punctuation">(</span>shiny<span class="token punctuation">)</span>
shiny<span class="token operator">::</span>runGithub<span class="token punctuation">(</span>repo<span class="token operator">=</span><span class="token string">"shinyAppTutorials"</span><span class="token punctuation">,</span> username<span class="token operator">=</span><span class="token string">"davidruvolo51"</span><span class="token punctuation">,</span> subdir<span class="token operator">=</span><span class="token string">"rmarkdown-app"</span><span class="token punctuation">)</span></code></pre></div>
<p>Let me know if you have any questions.</p></section><div class="article-footer"><p>Keywords</p><ul class="post-meta-tags article-tags" aria-label="post tags"><li><code class="tag tag-rmarkdown">rmarkdown</code></li></ul></div></article></div></div></main><footer class="footer"><h2>shinyTutorials</h2><ul class="menu footer-menu"><li class="menu-item"><a class="menu-link" href="/shinytutorials/privacy/">Privacy</a></li></ul><ul class="menu footer-menu"><li class="menu-item"><a class="menu-link" href="https://www.twitter.com/dcruvolo"><svg class="icon menu-link-icon" height="30" width="30" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg>@dcruvolo</a></li><li class="menu-item"><a class="menu-link" href="https://github.com/davidruvolo51/shinyAppTutorials"><svg class="icon menu-link-icon" height="30" width="30" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>shinyAppTutorials</a></li><li class="menu-item"><a class="menu-link" href="https://davidruvolo51.github.io/portfolio/"><svg class="icon" width="50" height="50" viewBox="0 0 50 40" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="user" transform="translate(11.280196, 6.000000)" stroke="currentColor" stroke-width="2" fill="currentColor"><path d="M27.1829506,38.463564 C27.1829506,31.1581236 23.1247009,23.3692614 18.2303544,21.0113097 C16.8720034,20.3568962 15.4135775,20 13.9041559,20 C12.4962651,20 11.1176019,20.3104979 9.81412773,20.8833092 C4.68481072,23.1373859 0.63453826,31.6314453 0.63453826,39.073266" id="body"></path><circle id="head" cx="13.7198041" cy="9" r="9"></circle></g></svg>My Portfolio</a></li></ul></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/,/^(?:\/do\-not\-track\/me\/too\/)$/];
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-76117337-11',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-76117337-11', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/tutorials/rmarkdown-shiny/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-94763455d3e9aec55c1f.js"],"component---src-components-tutorials-js":["/component---src-components-tutorials-js-e593508aa4749986bc9f.js"],"component---src-pages-404-js":["/component---src-pages-404-js-fc9328d8dc44e995d784.js"],"component---src-pages-about-js":["/component---src-pages-about-js-e0256c61f202e82589cd.js"],"component---src-pages-gallery-index-js":["/component---src-pages-gallery-index-js-9cc9e51783b6d2973666.js"],"component---src-pages-index-js":["/component---src-pages-index-js-8f3885645fd12e453b51.js"],"component---src-pages-privacy-js":["/component---src-pages-privacy-js-375248e5958e7f20e79a.js"],"component---src-pages-tutorials-index-js":["/component---src-pages-tutorials-index-js-dbda65d85c7254734ce5.js"]};/*]]>*/</script><script src="/shinytutorials/component---src-components-tutorials-js-e593508aa4749986bc9f.js" async=""></script><script src="/shinytutorials/ec800322c0f71b5715d75b0073f476a066af1f45-b5d52b976fc50d0f1ca2.js" async=""></script><script src="/shinytutorials/commons-c22ed27833d982c3b8cb.js" async=""></script><script src="/shinytutorials/styles-8636a280cbc61d53ad10.js" async=""></script><script src="/shinytutorials/app-94763455d3e9aec55c1f.js" async=""></script><script src="/shinytutorials/framework-d18255661b01063664e4.js" async=""></script><script src="/shinytutorials/webpack-runtime-9a456ce07a38feb9be63.js" async=""></script></body></html>